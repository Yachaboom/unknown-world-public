# U-050 오버레이 팔레트/강도 튜닝 실행 가이드

## 1. 개요

핫스팟/CRT 오버레이의 색상·알파·글로우 강도를 튜닝하여 기존 콘텐츠를 "너무 덮거나 너무 쨍하게" 만드는 문제를 해결했습니다. Option A(면 최소화, 테두리/outline 중심 강조) 전략을 적용했습니다.

**예상 소요 시간**: 5분

**의존성**:
- 의존 유닛: U-010[Mvp] (Scene Canvas/핫스팟), U-037[Mvp] (critical/ambient 레이어링)
- 선행 완료 필요: 없음 (의존 유닛은 이미 완료됨)

---

## 2. 빠른 시작 (Quick Start)

### 2.1 환경 준비

```bash
cd frontend
pnpm install
```

### 2.2 개발 서버 실행

```bash
pnpm dev
```

브라우저에서 http://localhost:8001 접속

### 2.3 첫 화면/결과 확인

- 프로필 선택 화면이 나타남
- 프로필(서사꾼/탐험가/기술전문가) 중 하나 선택
- 게임 화면에서 Scene Canvas에 핫스팟(신비한 책장, 빛나는 포탈 등)이 표시됨

---

## 3. 핵심 기능 시나리오

### 시나리오 A: 핫스팟 기본 상태 확인

**목적**: 핫스팟이 콘텐츠를 과도하게 덮지 않는지 확인

**실행**:
1. 게임 화면에서 Scene Canvas 영역 확인
2. 핫스팟 오버레이가 dashed 테두리로 표시되는지 확인

**기대 결과**:
- 핫스팟 배경이 거의 투명 (rgba 0.02)
- 테두리가 1.5px dashed 녹색
- 글로우가 미세함 (4px blur)

**확인 포인트**:
- ✅ Scene Canvas 이미지가 선명하게 보임
- ✅ 핫스팟 영역이 인식 가능하지만 덮이지 않음

---

### 시나리오 B: 핫스팟 호버 효과 확인

**목적**: 호버 시 강조가 테두리 중심인지 확인

**실행**:
1. 핫스팟 위로 마우스 이동
2. 호버 상태의 스타일 변화 확인

**기대 결과**:
- 배경: 아주 미세한 마젠타 틴트 (rgba 0.04)
- 테두리: 2px solid 마젠타
- 글로우: 컴팩트 (6px blur)
- scale 변화 없음

**확인 포인트**:
- ✅ 호버 시에도 콘텐츠가 덮이지 않음
- ✅ 툴팁이 상단에 표시됨

---

### 시나리오 C: CRT 오버레이 강도 확인

**목적**: CRT 효과가 텍스트 대비를 해치지 않는지 확인

**실행**:
1. 화면 전체의 스캔라인 효과 확인
2. critical 영역(재화, 비용, 배지 등)의 가독성 확인

**기대 결과**:
- 스캔라인: 2px 간격, opacity 0.45
- 플리커: 0.5s 주기 (느림, 미세한 명암 변화)
- critical 영역은 오버레이 위에 표시됨

**확인 포인트**:
- ✅ 텍스트 가독성 양호
- ✅ 플리커가 눈에 피로하지 않음

---

### 시나리오 D: 모바일 반응형 확인

**목적**: 모바일에서 터치 타겟과 툴팁이 적절한지 확인

**실행**:
1. 브라우저 DevTools에서 모바일 뷰포트(375x667) 에뮬레이션
2. 핫스팟 터치 영역 크기 확인
3. 핫스팟 터치 시 툴팁 위치 확인

**기대 결과**:
- 핫스팟 최소 크기: 44px x 44px
- 툴팁: 핫스팟 아래에 표시 (상단 가림 방지)
- 툴팁 화살표: 위쪽을 가리킴

**확인 포인트**:
- ✅ 터치 타겟이 충분히 큼 (44px 이상)
- ✅ 툴팁이 화면을 가리지 않음

---

### 시나리오 E: prefers-reduced-motion 확인

**목적**: 접근성 설정 시 애니메이션이 완화되는지 확인

**실행**:
1. 브라우저 DevTools → Rendering → Emulate CSS media feature → prefers-reduced-motion: reduce
2. 화면의 애니메이션 상태 확인

**기대 결과**:
- CRT 플리커: 비활성화, opacity 0.12
- 글리치 효과: 비활성화
- 핫스팟 트랜지션: 비활성화
- 드롭 타겟 펄스: 비활성화

**확인 포인트**:
- ✅ 모든 반복 애니메이션이 정지됨
- ✅ CRT 분위기는 정적 오버레이로 유지됨

---

## 4. 실행 결과 확인

### 4.1 스크린샷 파일

- `U-050-screenshot-01-initial.png`: 초기 게임 화면
- `U-050-screenshot-02-hover.png`: 핫스팟 호버 상태
- `U-050-screenshot-03-mobile.png`: 모바일 뷰포트
- `U-050-screenshot-04-tablet.png`: 태블릿 뷰포트

### 4.2 성공/실패 판단 기준

**성공**:
- ✅ 핫스팟 면(fill) 강도가 최소화됨 (0.02~0.06)
- ✅ 강조가 테두리/outline 중심으로 이동함
- ✅ CRT 플리커가 느려짐 (0.5s)
- ✅ 모바일 터치 타겟 44px 이상
- ✅ reduced-motion 지원 완료

**실패 시 확인**:
- ❌ 핫스팟이 보이지 않음 → border-color 확인
- ❌ 호버가 동작하지 않음 → .hovered 클래스 적용 확인
- ❌ 플리커가 여전히 빠름 → animation 속성 확인

---

## 5. 문제 해결 (Troubleshooting)

### 5.1 일반적인 오류

**오류**: 핫스팟이 전혀 보이지 않음
- **원인**: border 속성 누락 또는 색상이 배경과 동일
- **해결**: `--text-color` 변수가 `#33ff00`인지 확인

**오류**: 호버 시 색상 변화 없음
- **원인**: `.hovered` 클래스가 적용되지 않음
- **해결**: SceneCanvas.tsx의 `isHovered` 상태 확인

**오류**: 모바일에서 툴팁이 위에 표시됨
- **원인**: 미디어 쿼리 적용 안됨
- **해결**: `@media (max-width: 768px)` 섹션 확인

### 5.2 환경별 주의사항

- **Windows**: 폰트 렌더링이 다를 수 있으나 기능에 영향 없음
- **Safari**: `backdrop-filter` 지원 확인 필요 (해당 없음)

---

## 6. 변경 요약

### v5 최종 조정 (스캔라인 밸런스 + 액션 카드 간격)

| 요소 | Before (v4) | After (v5) | 효과 |
|------|-------------|------------|------|
| 스캔라인 opacity | 0.55 | 0.45 | 가독성과 분위기 밸런스 |
| 액션 카드 가격/위험도 | margin-bottom: 0 | margin-bottom: 8px | 카드 테두리 겹침 방지 |

### v4 스캔라인 강화 (CRT 분위기 강조)

| 요소 | Before (v3) | After (v4) | 효과 |
|------|-------------|------------|------|
| 스캔라인 opacity | 0.25 | 0.55 | 스캔라인 선명도 대폭 강화 |
| 스캔라인 간격 | 3px | 2px | 촘촘한 스캔라인 |
| 플리커 속도 | 0.1s | 0.5s | 눈 피로 감소 |
| 플리커 범위 | 0.18-0.38 | 0.95-1.0 | 미세한 명암 변화 |
| Scene Canvas CRT | opacity 0.7 | opacity 0.8 | 분위기 강화 |
| Scene Canvas 스캔라인 | 0.25 | 0.4 | 캔버스 스캔라인 강화 |

### v3 추가 개선 (자글거림 강화 + 테두리 끊김 수정)

| 요소 | Before (v2) | After (v3) | 효과 |
|------|-------------|------------|------|
| CRT 플리커 속도 | 0.3s | 0.1s | 자글거림 체감 강화 |
| CRT 플리커 범위 | 0.22-0.28 | 0.18-0.38 (11단계) | 명암 변화 극대화 |
| 스캔라인 opacity | 0.2 | 0.25 | 스캔라인 선명도 |
| Scene Canvas CRT | opacity 0.6 | opacity 0.7 | 분위기 강화 |
| 버튼 호버 강조 | outline 2px | box-shadow inset | 테두리 끊김 방지 |

### v2 추가 개선 (아이콘 식별성)

| 요소 | Before (v1) | After (v2) | 효과 |
|------|-------------|------------|------|
| 버튼 호버 배경 | 불투명 마젠타 | rgba(0.15) 틴트 | 아이콘 식별성 보호 |

### v1 기본 변경

| 요소 | Before | After | 효과 |
|------|--------|-------|------|
| 핫스팟 fill | 0.05 | 0.02 | 콘텐츠 보호 |
| 핫스팟 border | 2px solid | 1.5px dashed | 부드러운 존재감 |
| 핫스팟 글로우 | 8px/0.3 | 4px/0.15 | 덜 쨍함 |
| 호버 fill | 0.15 | 0.04 | 덮임 방지 |
| 드롭 펄스 | 0.6s | 1.2s | 피로도 감소 |
| 모바일 툴팁 | 상단 | 하단 | 가림 방지 |
