# U-074[Mvp] 핫스팟/아이템 인터랙션 안내 UX 실행 가이드

## 1. 개요

플레이어가 **핫스팟을 클릭하여 진행하거나 아이템을 드래그 앤 드롭할 수 있다는 것을 안내하는 UX**를 구현했습니다. 첫 N번(3회)만 hover 힌트가 표시되며, 학습 후 자동으로 숨김 처리됩니다. 또한 첫 세션 시작 시 화면 코너에 작은 팝업 형태의 온보딩 가이드가 표시됩니다.

**예상 소요 시간**: 10분

**의존성**:

- 의존 유닛: U-010[Mvp] (Scene Canvas + Hotspot Overlay), U-012[Mvp] (DnD 드롭 이벤트)
- 선행 완료 필요: 프론트엔드 개발 서버 실행 가능

---

## 2. 빠른 시작 (Quick Start)

### 2.1 환경 준비

```bash
# 프론트엔드 의존성 설치
cd frontend
pnpm install
```

### 2.2 개발 서버 실행

```bash
# 프론트엔드 개발 서버 시작
cd frontend
pnpm run dev
```

### 2.3 첫 화면/결과 확인

- 브라우저에서 `http://localhost:8001/` 접속
- 성공 지표: 프로필 선택 화면 표시

---

## 3. 핵심 기능 시나리오

### 시나리오 A: 온보딩 가이드 표시 및 진행

**목적**: 첫 세션 시작 시 화면 코너에 온보딩 가이드가 표시되는지 검증

**실행**:

1. 브라우저 로컬 스토리지 초기화 (DevTools > Application > Local Storage > 삭제)
2. 페이지 새로고침
3. 프로필 선택 (예: "서사꾼" 프로필)
4. 게임 시작 후 화면 우하단 확인

**기대 결과**:

- 화면 우하단에 "조작 안내" 팝업이 표시됨
- 1/3 진행 표시 (점 인디케이터)
- "화면의 반짝이는 영역을 클릭하면 조사할 수 있습니다" 메시지 표시

**확인 포인트**:

- ✅ 온보딩 가이드 팝업이 화면 우하단에 표시됨
- ✅ 단계별 진행 인디케이터(점 3개) 표시됨
- ✅ "다음" 버튼 클릭 시 다음 단계로 이동
- ✅ "건너뛰기" 버튼 클릭 시 가이드 닫힘

---

### 시나리오 B: 핫스팟 hover 힌트 표시 (첫 3회)

**목적**: 핫스팟에 마우스를 올렸을 때 "클릭하여 조사" 힌트가 첫 3번만 표시되는지 검증

**전제 조건**:

- 게임이 시작된 상태 (프로필 선택 완료)
- Scene Canvas에 핫스팟이 표시된 상태

**실행**:

1. 로컬 스토리지 초기화 (또는 `unknown-world-onboarding` 키 삭제)
2. 핫스팟 영역에 마우스를 올림 (1회)
3. 마우스를 핫스팟에서 벗어났다가 다시 올림 (2회)
4. 동일하게 반복 (3회)
5. 4번째 hover 시도

**기대 결과**:

```
1~3회: "클릭하여 조사" 힌트가 핫스팟 하단에 표시됨
4회~: 힌트 표시 안 됨 (학습 완료)
```

**확인 포인트**:

- ✅ 첫 3회 hover 시 "클릭하여 조사" 힌트 표시
- ✅ 4회째부터 힌트 표시 안 됨
- ✅ 힌트에 클릭 아이콘(SVG) 포함
- ✅ 힌트 스타일이 마젠타 테마와 일관됨

---

### 시나리오 C: 아이템 hover 힌트 표시 (첫 3회)

**목적**: 인벤토리 아이템에 마우스를 올렸을 때 "드래그하여 사용" 힌트가 첫 3번만 표시되는지 검증

**전제 조건**:

- 게임이 시작된 상태
- 인벤토리에 아이템이 있는 상태

**실행**:

1. 로컬 스토리지 초기화
2. 인벤토리 아이템에 마우스를 올림 (1회)
3. 마우스를 아이템에서 벗어났다가 다시 올림 (2회)
4. 동일하게 반복 (3회)
5. 4번째 hover 시도

**기대 결과**:

```
1~3회: "드래그하여 사용" 힌트가 아이템 상단에 표시됨
4회~: 힌트 표시 안 됨 (학습 완료)
```

**확인 포인트**:

- ✅ 첫 3회 hover 시 "드래그하여 사용" 힌트 표시
- ✅ 4회째부터 힌트 표시 안 됨
- ✅ 힌트에 드래그 아이콘(손 모양 SVG) 포함
- ✅ 힌트 스타일이 그린 테마와 일관됨

---

### 시나리오 D: 온보딩 완료 후 재접속

**목적**: 온보딩 완료 상태가 localStorage에 저장되어 재접속 시 표시되지 않는지 검증

**실행**:

1. 시나리오 A 완료 (온보딩 가이드 "시작하기" 클릭)
2. 페이지 새로고침
3. 프로필 선택 후 게임 시작

**기대 결과**:

- 온보딩 가이드가 표시되지 않음

**확인 포인트**:

- ✅ localStorage에 `unknown-world-onboarding` 키가 존재
- ✅ `onboardingComplete: true` 값 저장됨
- ✅ 재접속 시 온보딩 가이드 미표시

---

### 시나리오 E: 다국어 지원 검증

**목적**: 힌트 및 온보딩 텍스트가 언어 설정에 따라 올바르게 표시되는지 검증

**실행 (한국어)**:

1. 프로필 선택 화면에서 언어를 "한국어"로 설정
2. 온보딩 가이드 텍스트 확인
3. 핫스팟/아이템 hover 힌트 텍스트 확인

**기대 결과 (한국어)**:

```
온보딩: "조작 안내", "클릭하면 조사할 수 있습니다", "드래그하면 사용할 수 있습니다"
힌트: "클릭하여 조사", "드래그하여 사용"
```

**실행 (영어)**:

1. 프로필 선택 화면에서 언어를 "English"로 설정
2. 온보딩 가이드 텍스트 확인
3. 핫스팟/아이템 hover 힌트 텍스트 확인

**기대 결과 (영어)**:

```
온보딩: "Controls Guide", "Click the highlighted areas...", "Drag inventory items..."
힌트: "Click to investigate", "Drag to use"
```

**확인 포인트**:

- ✅ 한국어 모드에서 한국어 텍스트 표시
- ✅ 영어 모드에서 영어 텍스트 표시
- ✅ 언어 전환 시 텍스트 즉시 변경

---

## 4. 실행 결과 확인

### 4.1 로그 확인

- 위치: 브라우저 DevTools > Console
- 주요 로그 메시지:
  - 온보딩 상태 변경 시 zustand persist 로그
  - 힌트 카운트 증가 시 상태 업데이트 로그

### 4.2 localStorage 확인

- 위치: DevTools > Application > Local Storage > `http://localhost:8001`
- 키: `unknown-world-onboarding`
- 값 예시:

```json
{
  "state": {
    "onboardingComplete": true,
    "hotspotHintCount": 3,
    "itemHintCount": 3
  },
  "version": 0
}
```

### 4.3 성능 지표 (선택)

- 힌트 렌더링 시간: ~5ms 이내
- 온보딩 가이드 애니메이션: 0.3s slide-in

### 4.4 성공/실패 판단 기준

**성공**:

- ✅ 온보딩 가이드가 화면 우하단에 표시됨
- ✅ 핫스팟 hover 시 "클릭하여 조사" 힌트 표시 (첫 3회)
- ✅ 아이템 hover 시 "드래그하여 사용" 힌트 표시 (첫 3회)
- ✅ localStorage에 온보딩 상태 저장됨
- ✅ 다국어(ko/en) 지원 확인

**실패 시 확인**:

- ❌ 온보딩 가이드 미표시 → localStorage 초기화 후 재시도
- ❌ 힌트 미표시 → onboardingStore 상태 확인 (DevTools)
- ❌ 스타일 깨짐 → CSS 파일 임포트 확인

---

## 5. 문제 해결 (Troubleshooting)

### 5.1 일반적인 오류

**오류**: 온보딩 가이드가 표시되지 않음

- **원인**: localStorage에 이미 `onboardingComplete: true` 저장됨
- **해결**:
  1. DevTools > Application > Local Storage
  2. `unknown-world-onboarding` 키 삭제
  3. 페이지 새로고침

**오류**: 힌트가 4회 이상 표시됨

- **원인**: onboardingStore 상태 동기화 문제
- **해결**:
  1. localStorage 초기화
  2. 브라우저 캐시 삭제
  3. 페이지 하드 리프레시 (Ctrl+Shift+R)

**오류**: 스타일이 적용되지 않음

- **원인**: CSS 파일 임포트 누락
- **해결**:
  1. `interaction-hint.css`, `onboarding-guide.css` 파일 존재 확인
  2. 컴포넌트에서 CSS import 문 확인

### 5.2 환경별 주의사항

- **Windows**: 정상 동작
- **macOS/Linux**: 정상 동작
- **브라우저**: Chrome, Firefox, Edge 지원

---

## 6. 다음 단계

- CP-MVP-03: 인터랙션 안내가 포함된 데모 시나리오 완성
- 데모 프로필 옵션: 온보딩 완료 상태로 시작하는 프로필 고려
