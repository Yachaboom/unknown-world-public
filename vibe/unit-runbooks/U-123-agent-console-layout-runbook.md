# U-123[Mvp] Agent Console 배치 재조정 실행 가이드

## 1. 개요

Agent Console의 접기/펼치기 토글을 제거하고, **대기열(Queue)을 상단, 검증 배지(Badges)를 하단**에 항상 노출하도록 레이아웃을 재조정했습니다. 이를 통해 에이전트의 "검증 시스템" 존재감을 강화하고 불필요한 토글 인터랙션을 제거합니다.

**예상 소요 시간**: 5분

**의존성**:

- 의존 유닛: U-114[Mvp] (접기 구현 → 수정 대상), U-082[Mvp] (축소 레이아웃 기준선)
- 선행 완료 필요: U-114, U-082 완료 상태

---

## 2. 빠른 시작 (Quick Start)

### 2.1 환경 준비

```bash
pnpm install
```

### 2.2 즉시 실행

```bash
pnpm run dev:front
```

### 2.3 첫 화면/결과 확인

- 브라우저에서 `http://localhost:8001/` 접속
- 프로필 선택(서사꾼/탐험가/기술 전문가 중 아무 것)
- 성공 지표: 게임 UI가 로드되고 우측 Agent Console 영역이 보임

---

## 3. 핵심 기능 시나리오

### 시나리오 A: 유휴(idle) 상태에서 레이아웃 확인

**목적**: 접기 토글이 제거되고, 대기열+배지가 항상 노출되는지 확인

**실행**:

1. 프로필 선택 후 게임 화면 진입
2. Agent Console 영역 관찰 (우측 상단)

**기대 결과**:

- StreamingStatus: `● 대기 중`
- ModelLabel: `⚡ 빠름 (FAST)`
- 대기열: `대기 중...` 텍스트 표시
- CRT 테마 구분선 (얇은 반투명 라인)
- 검증 배지: `[ 검증 대기 중 ]` 텍스트 표시

**확인 포인트**:

- ✅ 접기/펼치기 토글 버튼(▼/▲)이 **없음**
- ✅ 대기열이 상단에 위치
- ✅ 배지가 하단에 위치
- ✅ 구분선이 대기열/배지 사이에 보임
- ✅ 전체 높이가 과도하게 커지지 않음

---

### 시나리오 B: 스트리밍 중 레이아웃 확인

**목적**: 턴 처리 중 대기열 단계 진행과 배지가 동시에 보이는지 확인

**실행**:

1. 하단 액션 카드(탐색하기/조사하기/대화하기) 중 하나 클릭
2. Agent Console의 대기열 영역 관찰

**기대 결과**:

- 대기열: 7단계 (Parse → Validate → Plan → Resolve → Render → Verify → Commit) 진행 표시
  - ● 완료, ◎ 진행 중, ○ 대기
- 배지: 검증 결과 순차 표시 (Schema OK, Economy OK 등)
- 자동 복구: `#0` 또는 발생 시 `#N` 표시

**확인 포인트**:

- ✅ 대기열이 실시간으로 진행 상태 반영
- ✅ 배지가 접히지 않고 항상 노출
- ✅ 대기열과 배지가 동시에 보임 (구분선으로 분리)

---

### 시나리오 C: 스트리밍 완료 후 최종 상태

**목적**: 턴 완료 후 배지 결과가 정상 표시되는지 확인

**실행**:

1. 시나리오 B의 스트리밍이 완료될 때까지 대기
2. Agent Console의 최종 상태 관찰

**기대 결과**:

- 대기열: 다시 `대기 중...` (idle 상태로 복귀)
- 배지: 4개 배지 결과 표시
  - Schema ✓OK / Economy ✓OK / Safety ✓OK / Consistency ✓OK
  - 또는 실패 시 ✗FAIL 표시
- 자동 복구: repair 발생 시 `#N` 표시 (없으면 비표시)

**확인 포인트**:

- ✅ 배지 4개가 2x2 그리드로 컴팩트하게 표시
- ✅ 실패 배지 발생 시 붉은색으로 구분
- ✅ RepairTrace가 조건부로 표시

---

## 4. 실행 결과 확인

### 4.1 성공/실패 판단 기준

**성공**:

- ✅ 접기/펼치기 토글 버튼이 제거됨
- ✅ 대기열(Queue)이 상단에 항상 노출
- ✅ 검증 배지(Badges)가 하단에 항상 노출
- ✅ CRT 테마 구분선으로 영역 분리
- ✅ Agent Console 전체 높이가 과도하지 않음 (컴팩트 배지 유지)
- ✅ 린트/타입체크 통과

**실패 시 확인**:

- ❌ 토글 버튼이 여전히 보임 → `AgentConsole.tsx`에서 `agent-badges-toggle` 관련 코드 잔재 확인
- ❌ 배지가 안 보임 → `agent-badges-section` 영역 렌더링 로직 확인
- ❌ 구분선이 안 보임 → `agent-console-divider` CSS 확인

---

## 5. 문제 해결 (Troubleshooting)

### 5.1 일반적인 오류

**오류**: Agent Console 영역이 비정상적으로 큼

- **원인**: 배지 항상 노출로 높이 증가
- **해결**: `badges-grid`의 `gap` 값 축소, 배지 폰트 크기 확인

**오류**: 구분선이 보이지 않음

- **원인**: `opacity: 0.3` 설정으로 어두운 배경에서 잘 안 보일 수 있음
- **해결**: `style.css`의 `.agent-console-divider` opacity 값 조정

### 5.2 환경별 주의사항

- **Windows**: 특이사항 없음
- **macOS/Linux**: 특이사항 없음

---

## 6. 다음 단계

- CP-MVP-03: "대기열 + 배지 상시 노출" 상태에서 데모 체감 검증
- U-119[Mmp]: WIG 기반 폴리시에서 Agent Console 레이아웃 최종 점검
