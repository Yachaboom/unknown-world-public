# U-073[Mvp] 레이아웃 확장 - 좌우 빈공간 활용 실행 가이드

## 1. 개요

좌우 빈공간을 활용하여 레이아웃을 확장하고, 패널들이 덜 답답하게 배치되어 "게임 HUD"로서의 인상을 강화하는 UI 개선입니다.

**핵심 변경사항:**
- max-width **1800px**로 설정하여 좌우 패널 충분히 넓게
- 좌우 빈공간에 CRT 그리드 패턴/텍스처 적용으로 게임 테마 강화 (Q3 Option B)
- **Scene Canvas 4:3 비율 적용** (모든 해상도에서 일관된 비율)
- 사이드 패널에 minmax 기반 유연한 너비 적용 (**280~420px** 범위)
- NarrativeFeed가 남은 공간을 유연하게 활용

**예상 소요 시간**: 5분

**의존성**:
- 의존 유닛: U-049[Mvp] - 레이아웃/스크롤 설계 개선
- 선행 완료 필요: U-049 런북 실행 완료 권장

---

## 2. 빠른 시작 (Quick Start)

### 2.1 환경 준비

```bash
cd frontend
pnpm install
```

### 2.2 개발 서버 실행

```bash
pnpm dev --port 8001
```

### 2.3 첫 화면 확인

- 브라우저에서 `http://localhost:8001` 접속
- 성공 지표: 게임 컨테이너가 **화면 전체 너비**를 사용하고 있음

---

## 3. 핵심 기능 시나리오

### 시나리오 A: 와이드스크린 레이아웃 (1920px 이상)

**목적**: 와이드스크린에서 패널이 더 넓게 펼쳐지고, 좌우 빈공간에 장식 패턴이 보이는지 검증

**실행**:
1. 브라우저 창을 1920px 이상으로 확대
2. 또는 DevTools(F12) → Toggle Device Toolbar → 1920x1080 설정

**기대 결과**:
- 게임 컨테이너: **1800px max-width**, 중앙 정렬
- 좌측/우측 사이드 패널: 최대 **420px**까지 확장
- 패널 간 간격: **16px** (--spacing-md)
- **좌우 빈공간에 CRT 그리드 패턴이 표시됨** (게임 테마 강화)

**확인 포인트**:
- ✅ 게임 UI가 1600px 폭으로 중앙에 위치
- ✅ 좌우 빈공간에 미세한 녹색 그리드 패턴이 보임
- ✅ 사이드 패널이 340px 이상으로 확장됨
- ✅ **Scene Canvas가 4:3 비율로 표시됨** (로그창 공간 확보)
- ✅ NarrativeFeed가 Scene Canvas 아래 남은 공간을 차지

---

### 시나리오 B: 일반 해상도 레이아웃 (1366px ~ 1919px)

**목적**: 최소 지원 해상도에서 레이아웃이 깨지지 않는지 검증

**실행**:
1. DevTools → Toggle Device Toolbar → 1366x768 또는 1600x900 설정

**기대 결과**:
- 좌측/우측 사이드 패널: **280px ~ 380px** 범위
- 중앙 영역: 최소 400px 보장
- 전체 레이아웃이 화면에 맞게 조정됨

**확인 포인트**:
- ✅ 모든 패널이 화면 내에 표시됨 (가로 스크롤 없음)
- ✅ 텍스트가 잘리지 않음
- ✅ **Scene Canvas가 4:3 비율로 표시됨** (로그창 공간 확보)
- ✅ NarrativeFeed가 적절한 높이로 표시됨 (최소 200px)

---

### 시나리오 C: 컴팩트 레이아웃 (1024px ~ 1365px)

**목적**: 컴팩트 모드에서 좌측 사이드바 숨김 동작 확인

**실행**:
1. DevTools → Toggle Device Toolbar → 1280x800 또는 1024x768 설정

**기대 결과**:
- 좌측 사이드바(Inventory/Quest/Rule Board): **숨김**
- 우측 사이드바(Agent Console/Economy/Scanner): 표시 (200~260px)
- 2컬럼 레이아웃 (center + sidebar-right)

**확인 포인트**:
- ✅ 좌측 사이드바가 완전히 숨겨짐
- ✅ 중앙 영역이 넓어짐
- ✅ 우측 패널이 정상 표시됨

---

### 시나리오 D: 태블릿/모바일 레이아웃 (768px 이하)

**목적**: 모바일 단일 컬럼 레이아웃 확인

**실행**:
1. DevTools → Toggle Device Toolbar → iPhone 14 Pro 또는 iPad

**기대 결과**:
- 양쪽 사이드바 모두 숨김
- 단일 컬럼: Header → Center → Footer
- 간격 축소 (4px)

**확인 포인트**:
- ✅ 사이드바 없이 중앙 콘텐츠만 표시
- ✅ **Scene Canvas가 4:3 비율로 표시됨** (모바일 최적화)
- ✅ 액션 카드가 가로 스크롤로 전환
- ✅ 헤더/푸터가 적절한 높이로 축소

---

## 4. 실행 결과 확인

### 4.1 CSS 변수 확인 (DevTools)

브라우저 DevTools에서 `:root` 또는 `.game-container` 요소의 스타일을 확인:

```css
/* 와이드스크린 (1920px+) */
--layout-side-panel-max: 400px;
--layout-gap: 16px;

/* 일반 (1366px~1919px) */
--layout-side-panel-min: 260px;
--layout-side-panel-max: 340px;
--layout-gap: 8px;

/* 컴팩트 (1024px~1365px) */
--layout-side-panel-min: 220px;
--layout-side-panel-max: 280px;
```

### 4.2 그리드 레이아웃 확인

DevTools → Elements → `.game-container` 선택 → Grid 배지 클릭:

- 3컬럼 그리드가 minmax로 정의됨
- 중앙 컬럼이 1fr로 남은 공간 채움

### 4.3 성공/실패 판단 기준

**성공**:
- ✅ 와이드스크린에서 좌우 빈공간이 사라지고 UI가 가득 참
- ✅ 최소 지원 해상도(1366x768)에서 레이아웃이 깨지지 않음
- ✅ 반응형 브레이크포인트에서 자연스럽게 전환됨
- ✅ 패널 콘텐츠(텍스트, 버튼)가 정상 표시됨

**실패 시 확인**:
- ❌ 가로 스크롤 발생 → 중앙 최소 너비(--layout-center-min) 확인
- ❌ 패널이 너무 좁음 → 미디어쿼리 브레이크포인트 확인
- ❌ 콘텐츠 잘림 → overflow 속성 확인

---

## 5. 문제 해결 (Troubleshooting)

### 5.1 일반적인 오류

**오류**: 레이아웃이 중앙에 고정됨 (이전 상태)
- **원인**: CSS 캐시 또는 빌드 미반영
- **해결**: 
  1. 브라우저 캐시 클리어 (Ctrl+Shift+R)
  2. `pnpm dev` 재시작

**오류**: 사이드 패널이 너무 좁거나 넓음
- **원인**: 미디어쿼리 범위 불일치
- **해결**: DevTools에서 현재 뷰포트 너비 확인 후 해당 브레이크포인트 CSS 확인

**오류**: 콘텐츠가 잘리거나 넘침
- **원인**: min-height, overflow 설정 문제
- **해결**: U-049 런북의 스크롤 전략 확인

### 5.2 환경별 주의사항

- **Windows**: 스크롤바가 레이아웃에 영향을 줄 수 있음 → `scrollbar-width: thin` 적용됨
- **macOS/Linux**: 오버레이 스크롤바는 레이아웃에 영향 없음

---

## 6. 변경된 CSS 변수 요약

| 변수 | 값 (기본) | 값 (와이드스크린) | 값 (컴팩트) |
|------|----------|------------------|-------------|
| `--layout-max-width` | 1800px | 1800px | 1800px |
| `--layout-side-panel-min` | 280px | 280px | 220px |
| `--layout-side-panel-max` | 380px | 420px | 280px |
| `--layout-center-min` | 400px | 400px | 400px |
| `--layout-gap` | 8px | 16px | 8px |

### 빈공간 장식 패턴

좌우 빈공간에는 CRT 테마에 맞는 장식 패턴이 적용됩니다:
- 수직/수평 스캔라인 그리드 (4px 간격)
- 미세한 도트 패턴 (20px 간격)
- 색상: 인광 녹색 (rgba(51, 255, 0, 0.02~0.03))

### Scene Canvas 비율

| 해상도 | 비율 | 설명 |
|--------|------|------|
| 데스크톱 (769px+) | **4:3** | 가로 넓은 Scene Canvas, 로그창 공간 확보 |
| 모바일 (768px 이하) | **4:3** | 모든 화면에서 일관된 비율 |

---

## 7. 다음 단계

- **CP-MVP-03**: 10분 데모 루프에서 와이드스크린 UI 체감 확인
- **MMP U-107**: 모바일 UX 추가 개선 (현재는 사이드바 숨김만 적용)
