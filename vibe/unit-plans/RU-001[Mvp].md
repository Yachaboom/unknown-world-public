# RU-001[Mvp]: 리팩토링 - 디렉토리/설정 정리

## 메타데이터

| 항목      | 내용        |
| --------- | ----------- |
| Unit ID   | RU-001[Mvp] |
| Phase     | MVP         |
| 예상 소요 | 45분        |
| 의존성    | U-004,U-003 |
| 우선순위  | High        |

## 작업 목표

스캐폴딩 단계에서 생기기 쉬운 “경로/버전/실행 방식의 흔들림”을 제거하고, 이후 유닛들이 **SSOT(tech-stack)와 규칙(RULE-001~010)** 을 위반하지 않도록 기준선을 정리한다.

**배경**: 초기에 기준을 안 잡으면 이후 유닛마다 같은 설정 문제로 시간이 소모되고, 데모 반복성이 무너진다. (참조: `vibe/prd.md` 10장)

**완료 기준**:

- 프론트/백엔드의 “실행 방법(명령/포트)”과 “버전 고정 원칙”이 로드맵/유닛 계획서와 모순 없이 정리된다.
- 채팅 UI 금지/단일 CSS/좌표 규약/보안 원칙이 초기 스캐폴딩에 반영된다. (RULE-002/007/009)
- 다음 유닛(U-005~U-008)이 스키마/스트리밍 구현에 집중할 수 있도록 파일/폴더 구조가 명확해진다.

## 영향받는 파일

**생성**:

- (선택) `frontend/README.md` - 프론트 실행/규칙 요약(프롬프트/키 노출 금지 포함)
- (선택) `backend/README.md` - 백엔드 실행/보안 요약(서비스계정, BYOK 금지 포함)

**수정**:

- `vibe/roadmap.md` - “빠른 실행” 커맨드가 실제 구조와 맞는지 점검/정리(필요 시)

**참조**:

- `vibe/tech-stack.md` - 버전/모델 ID 고정
- `.cursor/rules/00-core-critical.mdc` - RULE-001~010
- `.cursor/rules/10-frontend-game-ui.mdc` - 단일 CSS/고정 UI
- `.cursor/rules/20-backend-orchestrator.mdc` - SSE/검증/복구

## 구현 흐름

### 1단계: 구조/명명 규칙 정리

- `frontend/`, `backend/` 디렉토리 구조(특히 백엔드 패키지 루트)를 확정한다.
- 앞으로의 유닛 계획서에서 사용할 경로 표기 규칙을 통일한다.

### 2단계: 버전/실행 방식 정합성 점검

- `vibe/tech-stack.md` 버전과 스캐폴딩(패키지/requirements) 간 불일치를 제거한다. (RULE-010)
- 로컬 실행 커맨드를 팀 표준으로 합의하고, 로드맵의 “빠른 실행”과 맞춘다.

### 3단계: “금지사항”이 구조로 강제되게 만들기

- 채팅 UI로 회귀할 여지가 있는 레이아웃/컴포넌트 네이밍을 피한다(예: Chat*, Message*).
- 비밀정보가 실수로 포함되지 않도록 가이드/ignore 정책을 준비한다(키 파일 경로 명시 금지).

## 의존성 & 연결

**이전 작업에서 가져올 것**:

- **계획서**: [U-003[Mvp]](U-003[Mvp].md) - 백엔드 초기 구조/실행
- **계획서**: [U-004[Mvp]](U-004[Mvp].md) - 프론트 고정 레이아웃/스타일 기준

**다음 작업에 전달할 것**:

- U-005~U-008에서 사용할 공통 경로/명명 규칙
- 이후 리팩토링(RU) 단위의 기준(“정리 vs 기능 추가” 경계)

## 주의사항

**기술적 고려사항**:

- (RULE-010) “최신이라서” 업그레이드 금지: tech-stack SSOT 준수.
- (RULE-007) 서비스 계정 키/토큰/쿠키/프롬프트 원문을 레포/로그/UI에 노출 금지.

**잠재적 리스크**:

- 표준을 지나치게 많이 도입하면 초기 속도가 떨어짐 → “필수 금지사항/버전 고정/실행 방법”만 최소로 합의한다.

## 페어링 질문 (결정 필요)

- [ ] **Q1**: 프론트/백엔드의 공통 스키마(타입) SSOT를 어떻게 둘까?
  - Option A: MVP는 서버(Pydantic)·클라(Zod) 중복 정의(빠르게), 이후 MMP에서 통합
  - Option B: 초기부터 `shared/` JSON Schema 파일을 SSOT로 두고 생성/검증 자동화

## 참고 자료

- `vibe/tech-stack.md` - 버전/모델 라인업 고정
- `.cursor/rules/00-core-critical.mdc` - 핵심 금지사항/하드 게이트
