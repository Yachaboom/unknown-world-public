# [U-033] nanobanana mcp 에셋 매니페스트 + QA 개발 완료 보고서

## 메타데이터

- **작업 ID**: U-033[Mvp]
- **단계 번호**: 2.3 (에셋 관리)
- **작성 일시**: 2026-01-12 14:20
- **담당**: AI Agent

---

## 1. 작업 요약

`nanobanana mcp`로 생성되는 에셋의 무분별한 증가를 막고 품질을 유지하기 위해, 에셋 목록을 추적하는 **매니페스트(manifest.json)** 와 예산/대비/폴백 등을 검증하는 **QA 체크리스트(QA_CHECKLIST.md)** 를 도입했습니다.

---

## 2. 작업 범위

- **에셋 매니페스트 구축**: `frontend/public/ui/manifest.json` 생성 및 초기 에셋(아이콘, placeholder, chrome) 등록
- **QA 체크리스트 정의**: 용량 예산, 사이즈 규격, 대비, 투명도(rembg), 폴백 검증 절차 문서화
- **정합성 및 예산 검증**: 런북 시나리오를 통해 매니페스트와 실제 파일 간의 정합성 및 용량 예산(1.5MB) 준수 확인

---

## 3. 생성/수정 파일

| 파일 경로 | 유형 | 목적 |
| --- | --- | --- |
| `frontend/public/ui/manifest.json` | 신규 | 에셋 목록, 경로, 용량, 폴백, 사용처 추적 (SSOT) |
| `frontend/public/ui/QA_CHECKLIST.md` | 신규 | 에셋 추가/수정 시 수행해야 할 품질 검증 항목 정의 |

---

## 4. 구현 상세

### 4.1 핵심 설계

**매니페스트 스키마 (`manifest.json`)**:
- `totalBytes`, `budgetBytes`: 전체 용량 예산 관리 (현재 1.5MB 설정)
- `assets`: 개별 에셋 배열
  - `id`: 고유 식별자 (kebab-case)
  - `path`: `frontend/public/ui/` 기준 상대 경로
  - `type`: `icon` | `placeholder` | `chrome`
  - `fallback`: 로딩 실패 시 표시할 대체 텍스트/이모지
  - `bytes`: 파일 크기 (예산 검증용)
  - `usedIn`: 사용되는 컴포넌트 목록 (미사용 에셋 식별용)

**QA 체크리스트 (`QA_CHECKLIST.md`)**:
- **용량 예산**: 아이콘(30KB), Placeholder(300KB), Chrome(120KB) 상한 정의
- **품질 검증**: 16px 실루엣 식별성, 대비(Contrast), 투명 배경(Alpha) 확인
- **폴백**: 이미지 로드 실패 시 대체 텍스트/이모지 동작 확인

### 4.2 외부 영향 분석

- **데이터/파일 시스템**: `frontend/public/ui/` 내 에셋 파일들이 매니페스트에 의해 관리됨
- **개발 워크플로**: 에셋 추가 시 매니페스트 업데이트 및 QA 체크리스트 수행이 필수 절차로 추가됨

### 4.3 가정 및 제약사항

- **수동 관리**: 현재는 매니페스트 업데이트가 수동으로 이루어짐 (추후 CI/CD 스크립트로 자동화 고려 가능)
- **예산**: 초기 예산은 1.5MB로 설정했으나, 에셋 증가에 따라 조정될 수 있음

---

## 5. 런북(Runbook) 정보

- **파일 경로**: `vibe/unit-runbooks/U-033-asset-qa-runbook.md`
- **실행 결과**:
  - **시나리오 A (정합성)**: `manifest.json`에 등록된 모든 경로가 실제 파일과 일치함 확인
  - **시나리오 B (예산)**: 총 용량(약 556KB)이 예산(1.5MB) 이내임 확인 (사용률 약 35%)
  - **시나리오 D (폴백)**: 이미지 경로 변경 시 폴백 이모지 표시 확인

---

## 6. 리스크 및 주의사항

- **매니페스트 누락 위험**: 개발자가 에셋만 추가하고 매니페스트 업데이트를 누락할 수 있음 (PR 리뷰 시 확인 필요)
- **최적화 필요 에셋**: 일부 큰 에셋(`scanner-frame.png` 등)은 추가 최적화 권장

---

## 7. 다음 단계 안내

### 7.1 후속 작업
1. **U-029, U-031, U-032, U-038**: 에셋 생성/수정 작업 시 본 유닛의 매니페스트 및 QA 기준 준수
2. **자동화 도구**: 매니페스트 정합성 검증 스크립트(런북에 포함된 내용)를 npm script로 등록 고려

### 7.2 의존 단계 확인
- **선행 단계**: U-030[Mvp] (완료)
- **후속 단계**: U-029, U-031, U-032 등 구체적 에셋 생성 유닛

---

## 8. 자체 점검 결과

- [x] 런북 기반 요구사항 충족 확인
- [x] Repomix 최신 구조 반영 확인
- [x] 아키텍처/네이밍/경로 일관성 유지
- [x] 파괴적 변경/리스크/가정 명시

---

_본 보고서는 AI Agent에 의해 자동 생성되었습니다._
