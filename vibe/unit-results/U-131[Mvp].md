# U-131[Mvp]: 추상적 최종 목표(Overarching Mystery) 시스템 개발 완료 보고서

## 메타데이터

- **작업 ID**: U-131[Mvp]
- **단계 번호**: 2.3
- **작성 일시**: 2026-02-09 15:40
- **담당**: AI Agent

---

## 1. 작업 요약

모든 프로필에 공통적으로 적용되는 추상적 최종 목표인 **'메아리(Echo)'** 시스템을 구축했습니다. 이를 시스템 프롬프트에 주입하여 GM이 매 턴 내러티브와 퀘스트를 생성할 때 일관된 미스터리 지향점을 가지도록 설계했으며, 스토리 발산 문제를 구조적으로 해결했습니다.

---

## 2. 작업 범위

- **추상적 최종 목표 설계**: '모든 이야기와 선택을 묶는 공명'인 **Echo(메아리)** 컨셉 확정
- **시스템 프롬프트 고도화**: `game_master.{ko,en}.md`에 `<overarching_mystery>` 섹션 및 6대 GM 지침 추가
- **퀘스트 생성 규칙 보강**: `turn_output_instructions.{ko,en}.md`에 주 목표와 미스터리 간의 연결성 규칙 추가
- **다국어 지원**: 한국어(ko-KR) 및 영어(en-US) 환경 모두에서 동일한 미스터리 경험 제공
- **보안 준수**: 미스터리 원문 텍스트가 UI 및 에이전트 콘솔에 노출되지 않도록 설계 (RULE-007/008)

---

## 3. 생성/수정 파일

| 파일 경로 | 유형 | 목적 |
| --- | --- | --- |
| `backend/prompts/system/game_master.ko.md` | 수정 | 한국어 시스템 프롬프트에 미스터리 지침 추가 |
| `backend/prompts/system/game_master.en.md` | 수정 | 영어 시스템 프롬프트에 미스터리 지침 추가 |
| `backend/prompts/turn/turn_output_instructions.ko.md` | 수정 | 한국어 퀘스트 생성 규칙에 미스터리 연결 지침 추가 |
| `backend/prompts/turn/turn_output_instructions.en.md` | 수정 | 영어 퀘스트 생성 규칙에 미스터리 연결 지침 추가 |

---

## 4. 구현 상세

### 4.1 핵심 설계

**주요 지침 (GM Instruction)**:
- **은은한 반영**: "메아리" 단어 직접 언급 금지, 분위기와 비유를 통한 간접 묘사 강제
- **점진적 강화**: 턴이 누적될수록 미스터리의 존재감을 점진적으로 확대
- **장르 독립성**: 판타지, SF 등 어떤 장르에도 자연스럽게 녹아들 수 있는 추상성 유지

### 4.2 외부 영향 분석

- **데이터/파일 시스템**: 프롬프트 파일 버전 업그레이드 (v0.2.x -> v0.3.0)
- **내러티브 품질**: 장기 세션(5턴 이상)에서 스토리와 퀘스트의 정합성 대폭 향상
- **UI/UX**: 에이전트 콘솔의 Plan 단계에서 미스터리 반영 여부를 간접적으로 확인 가능

---

## 5. 런북(Runbook) 정보

- **파일 경로**: `vibe/unit-runbooks/U-131-overarching-mystery-runbook.md`
- **실행 결과**: 3종 프로필(Narrator, Explorer, Tech) 모두에서 미스터리 힌트가 은은하게 반영됨을 확인했으며, 퀘스트 라벨이 미스터리 테마와 일관성을 유지함을 검증 완료.

---

## 6. 리스크 및 주의사항

- **노골적 언급 리스크**: GM이 지침을 어기고 "메아리"를 직접 언급할 경우 몰입감이 저해될 수 있음. 현재 "노골적 언급 금지" 지침을 최상단에 배치하여 방어함.
- **장르 충돌**: 추상성을 잃고 특정 장르의 단어를 사용할 경우 다른 프로필에서의 일관성이 깨질 수 있음.

---

## 7. 다음 단계 안내

### 7.1 후속 작업

1. **U-133[Mvp]**: 첫 턴 시작 이미지 생성 시 Overarching Mystery를 시각적 모티프로 활용
2. **CP-MVP-03**: 데모 루프 시나리오에서 전체적인 스토리-퀘스트 정합성 최종 검증

---

## 8. 자체 점검 결과

- [x] 런북 기반 요구사항 충족 확인
- [x] Repomix 최신 구조 반영 확인
- [x] 아키텍처/네이밍/경로 일관성 유지
- [x] 파괴적 변경/리스크/가정 명시

---

_본 보고서는 AI Agent에 의해 자동 생성되었습니다._
