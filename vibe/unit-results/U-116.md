# U-116[Mvp] SaveGame 제거 + 프로필 초기 상태 정리 개발 완료 보고서

## 메타데이터

- **작업 ID**: U-116[Mvp]
- **단계 번호**: 2.3
- **작성 일시**: 2026-02-08 14:55
- **담당**: AI Agent

---

## 1. 작업 요약

MVP 데모의 안정성과 상태 무결성을 위해 `SaveGame`(LocalStorage 기반 진행 저장/불러오기) 시스템을 완전히 제거했습니다. 새로고침 시 항상 프로필 선택 화면으로 복귀하며, 각 프로필은 정책에 따라 깨끗한 초기 상태(핫스팟 제거 등)에서 시작됩니다. 언어 설정(`unknown_world_language`)만 영속성을 유지합니다.

---

## 2. 작업 범위

- **SaveGame 시스템 완전 제거**: `saveGame.ts`, `migrations.ts`, `saveGame.test.ts` 등 관련 로직 및 테스트 삭제/정리
- **세션 라이프사이클 단순화**: `sessionLifecycle.ts`에서 복원 로직을 제거하고 항상 프로필 선택 화면(`profile_select`)으로 부팅되도록 수정
- **UI 연동 해제**: `App.tsx`, `DemoProfileSelect.tsx`에서 "계속하기" 버튼 및 자동 저장 트리거 제거
- **프로필 초기 상태 정리 (U-098 흡수)**: `demoProfiles.ts`의 `sceneObjectDefs`를 빈 배열로 초기화하여 정밀분석 전용 핫스팟 정책(U-090) 준수
- **레거시 데이터 정리**: 부팅 시 기존 LocalStorage의 `unknown_world_savegame`, `current_profile` 데이터 자동 삭제

---

## 3. 생성/수정 파일

_(Repomix 결과 및 Git Commit 분석 기반)_

| 파일 경로 | 유형 | 목적 |
| --- | --- | --- |
| `frontend/src/save/migrations.ts` | **삭제** | 버전별 마이그레이션 체인 제거 |
| `frontend/src/save/saveGame.test.ts` | **삭제** | 관련 단위 테스트 제거 |
| `frontend/src/save/sessionLifecycle.test.ts` | **삭제** | 관련 단위 테스트 제거 |
| `frontend/src/save/saveGame.ts` | 수정 | 스키마 및 저장/로드 함수 제거, 레거시 정리 함수만 유지 |
| `frontend/src/save/sessionLifecycle.ts` | 수정 | 부팅 및 리셋 로직 단순화 (항상 프로필 선택) |
| `frontend/src/App.tsx` | 수정 | 턴 완료 시 자동 저장 제거 및 부팅 흐름 수정 |
| `frontend/src/data/demoProfiles.ts` | 수정 | 초기 핫스팟 제거(`sceneObjectDefs: []`) |
| `frontend/src/components/DemoProfileSelect.tsx` | 수정 | "계속하기" UI 버튼 제거 |
| `vibe/unit-runbooks/U-116-savegame-removal-runbook.md` | 신규 | 작업 검증을 위한 런북 생성 |

---

## 4. 구현 상세

### 4.1 핵심 설계

- **Stateless Bootstrapping**: `bootstrapSession()`은 더 이상 LocalStorage를 조회하지 않고 고정적으로 `{ phase: 'profile_select' }`를 반환합니다.
- **One-way Data Flow**: 프로필 선택 시 `startSessionFromProfile()`을 통해 `DEMO_PROFILES`의 정적 데이터가 각 store(`world`, `inventory`, `economy`)에 직접 주입됩니다.
- **Legacy Cleanup**: `saveGame.ts`의 `clearLegacySaveData()`가 부팅 시 1회 실행되어 잔존하는 구버전 데이터를 강제 제거합니다.

### 4.2 외부 영향 분석

- **데이터/파일 시스템**: LocalStorage의 `unknown_world_savegame`, `unknown_world_current_profile` 키가 더 이상 사용되지 않으며 삭제됩니다.
- **사용자 경험(UX)**: 게임 중 브라우저를 새로고침하면 진행 상황이 보존되지 않고 초기 화면으로 돌아갑니다. (MVP 안정성 우선 정책)

### 4.3 가정 및 제약사항

- **언어 설정 유지**: 사용자의 편의를 위해 `unknown_world_language`는 삭제 대상에서 제외되었습니다.
- **MMP 재설계**: 세션 영속성이 필요한 경우 MMP(U-113)에서 서버 사이드 저장소 또는 강화된 클라이언트 스키마로 재설계할 예정입니다.

---

## 5. 런북(Runbook) 정보

- **파일 경로**: `vibe/unit-runbooks/U-116-savegame-removal-runbook.md`
- **실행 결과**: 새로고침 시 프로필 선택 복귀, 레거시 데이터 정리, 초기 핫스팟 부재 시나리오 모두 검증 완료

---

## 6. 리스크 및 주의사항

- **진행 소실**: 긴 데모 시나리오 수행 중 새로고침 발생 시 처음부터 다시 시작해야 함을 유념해야 합니다.
- **테스트 코드 삭제**: `save/` 디렉토리의 많은 테스트가 삭제되었으므로, 향후 영속성 도입 시 새로운 테스트 스위트 작성이 필요합니다.

---

## 7. 다음 단계 안내

### 7.1 후속 작업

1. **U-099[Mvp]**: 거래 장부 i18n 혼합 출력 수정 (잔액 보존 정합성 확인 포함)
2. **CP-MVP-03**: 10분 데모 루프 통합 검증 (새로고침 시나리오 포함)

### 7.2 의존 단계 확인

- **선행 단계**: U-015, U-041, RU-004 (완료 및 제거됨)
- **후속 단계**: MMP U-113 (영속성 재설계)

---

## 8. 자체 점검 결과

- [x] 런북 기반 요구사항 충족 확인
- [x] Repomix 최신 구조 반영 확인
- [x] SaveGame 관련 UI 및 자동 저장 로직 완전 제거 확인
- [x] 프로필 시작 시 핫스팟 비활성화 확인

---

_본 보고서는 AI Agent에 의해 자동 생성되었습니다._
