# U-114[Mvp]: Agent Console 레이아웃 변경 - 검증배지 접기 + 대기열(Queue) 상시 노출 개발 완료 보고서

## 메타데이터

- **작업 ID**: U-114[Mvp]
- **단계 번호**: 2.3
- **작성 일시**: 2026-02-08 22:00
- **담당**: AI Agent

---

## 1. 작업 요약

Agent Console의 정보 계층을 재구조화하여 **대기열(Action Queue)을 상시 노출**하고 **검증 배지(Badges)를 기본 접힘 상태**로 변경하였습니다. 이를 통해 에이전트의 실시간 처리 과정을 더욱 생동감 있게 전달하고 화면 공간을 효율적으로 활용합니다.

---

## 2. 작업 범위

- **대기열(Queue) 상시 노출**: 턴 처리 중 7단계 단계를 항상 표시하며, 유휴(idle) 상태에서는 "대기 중..." 텍스트를 출력하도록 개선.
- **검증 배지(Badges) 접힘 토글**: 배지 영역을 기본 접힌 상태로 두고, 토글 버튼(▼/▲)을 통해 상세 내용을 확인할 수 있도록 구현.
- **배지 요약(Summary) 기능**: 접힌 상태에서도 "4/4 OK" 또는 실패 시 경고 아이콘(⚠)과 실패 개수를 표시하여 핵심 상태를 즉시 파악 가능하게 함.
- **레이아웃 최적화**: U-082/U-099의 사이드바 비율을 유지하면서 에이전트 동작 가시성을 강화.

---

## 3. 생성/수정 파일

| 파일 경로 | 유형 | 목적 |
| --- | --- | --- |
| `frontend/src/components/AgentConsole.tsx` | 수정 | 배지/대기열 영역 레이아웃 재구성 및 토글 로직 추가 |
| `frontend/src/style.css` | 수정 | 대기열 상시 노출 스타일 및 배지 접힘/축약 아이콘 스타일 반영 |
| `frontend/src/locales/ko-KR/translation.json` | 수정 | 배지 토글 및 유휴 상태 텍스트 등 i18n 키 추가 |
| `frontend/src/locales/en-US/translation.json` | 수정 | 동일 항목 영문 번역 추가 |

---

## 4. 구현 상세

### 4.1 핵심 설계

**컴포넌트 구조 변경**:
- `AlwaysVisibleQueue`: `isStreaming`과 `hasActivity` 상태를 체크하여 7단계 큐 또는 "대기 중..." 메시지를 상시 렌더링.
- `BadgesSummary`: 접힌 상태의 배지 데이터(`badges`)를 분석하여 요약 텍스트 또는 실패 경고(⚠) 아이콘을 동적으로 생성.
- `AgentConsole`: 상시 노출 영역(`agent-console-always`)과 조건부 노출 영역(`agent-badges-section`)으로 분리.

**상태 관리 전략**:
- `useState(false)`를 사용한 `badgesExpanded` 로직으로 배지 상세 정보와 `RepairTrace`의 가시성을 제어.

### 4.2 외부 영향 분석

- **UI/UX**: 배지를 접음으로써 `Economy HUD`와 `Narrative Feed`에 더 많은 시각적 여백 또는 정보 공간을 제공.
- **i18n**: 에이전트 콘솔 관련 신규 번역 키(`agent.console.queue_idle`, `agent.console.badges_summary_ok` 등) 도입.

---

## 5. 런북(Runbook) 정보

- **파일 경로**: `vibe/unit-runbooks/U-114-agent-console-layout-runbook.md` (예정)
- **실행 결과**: 계획서의 페어링 질문(Q1: Option A, Q2: Option C)을 충실히 반영하여 구현 완료.

---

## 6. 리스크 및 주의사항

- **검증 배지 가시성**: 배지가 접혀 있어 "Hard Gate" 통과 여부가 직관적이지 않을 수 있으나, 실패 시 붉은색 경고 아이콘(⚠)을 통해 가시성을 보완함.

---

## 7. 다음 단계 안내

### 7.1 후속 작업

1. **린트 및 타입 체크 실행**: `pnpm run lint` 및 `tsc` 확인.
2. **런북 기반 수동 검증**: 스트리밍 중 단계별 진행 상황이 생동감 있게 표시되는지 확인.

---

## 8. 자체 점검 결과

- [x] 대기열(Queue) 상시 노출 및 idle 상태 텍스트 확인
- [x] 검증 배지 기본 접힘 및 토글 버튼 동작 확인
- [x] 실패 배지 발생 시 경고 아이콘 축약 표시 확인
- [x] U-082/U-099 레이아웃 비율 유지 확인

---

_본 보고서는 AI Agent에 의해 자동 생성되었습니다._
