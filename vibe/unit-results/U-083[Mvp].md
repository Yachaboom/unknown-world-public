# U-083[Mvp]: UI 레이아웃 - 액션 카드 대안 뱃지 레이아웃 깨짐 수정 개발 완료 보고서

## 메타데이터

- **작업 ID**: U-083[Mvp]
- **단계 번호**: 2.3
- **작성 일시**: 2026-02-08 15:30
- **담당**: AI Agent

---

## 1. 작업 요약

액션 카드에 대안 뱃지(Alternative Badge)를 포함한 다중 뱃지(QUALITY, VISION, EARN 등) 표시 시 발생하는 레이아웃 깨짐 문제를 해결하였습니다. 뱃지를 비용 아래의 별도 행으로 이동하고, 카드 높이를 고정하여 시각적 안정성을 확보하였습니다.

---

## 2. 작업 범위

- **뱃지 레이아웃 구조 개선**: 기존 `position: absolute` 배치에서 `flex` 기반의 별도 행 배치(비용 표시 하단)로 변경
- **뱃지 표시 개수 제한**: 최대 2개의 뱃지만 노출하고 초과 시 "+N" 형태로 표시하여 카드 복잡도 제어
- **텍스트 오버플로 처리**: 긴 뱃지 텍스트에 `ellipsis`를 적용하고 호버 시 툴팁(`title` 속성)으로 전체 내용을 표시
- **카드 높이 일관성 확보**: `flex: 1` 및 `min-height` 설정을 통해 뱃지 유무와 관계없이 모든 카드의 높이를 통일

---

## 3. 생성/수정 파일

| 파일 경로 | 유형 | 목적 |
| --- | --- | --- |
| `frontend/src/components/ActionDeck.tsx` | 수정 | 뱃지 수집 로직(`collectBadges`) 및 카드 렌더링 구조 수정 |
| `frontend/src/style.css` | 수정 | 뱃지 및 카드 레이아웃 안정화 CSS 적용 |

---

## 4. 구현 상세

### 4.1 핵심 설계

**주요 컴포넌트 변화**:
- `collectBadges(card, t)`: VISION, QUALITY, EARN, Alternative 순으로 뱃지를 수집하여 통합 관리.
- `ActionCardItem`: 수집된 뱃지 중 `MAX_VISIBLE_BADGES`(2개)만 렌더링하고 `overflowCount`를 계산하여 표시.

**설계 패턴/원칙**:
- **고정 레이아웃 유지**: 카드 내부의 `action-card-title`에 `flex: 1`을 부여하여 하단 정보(비용, 뱃지)가 항상 동일한 위치에 정렬되도록 함.
- **점진적 정보 노출**: 뱃지 텍스트가 길 경우 생략하고 툴팁으로 보완하여 UI 깨짐 방지.

### 4.2 외부 영향 분석

- **데이터/파일 시스템**: 변경 없음. `ActionCard` 스키마 내의 `is_alternative` 등을 그대로 활용.
- **권한/보안**: 변경 없음.
- **빌드/의존성**: 변경 없음.

### 4.3 가정 및 제약사항

- 뱃지 텍스트는 `max-width: 90px`를 기준으로 생략됨.
- 뱃지 우선순위는 VISION > QUALITY > EARN > Alternative 순으로 적용됨.

---

## 5. 런북(Runbook) 정보

- **파일 경로**: `vibe/unit-runbooks/U-083-action-card-badge-layout-fix-runbook.md`
- **실행 결과**: 런북에 명시된 시나리오(기본 카드, 다중 뱃지, 비활성 카드, 긴 텍스트)에 대한 검증 완료.
- **참조**: 상세 실행 방법 및 콘솔 테스트 코드는 위 런북 파일 참조.

---

## 6. 리스크 및 주의사항

- **i18n 가독성**: 언어별(ko/en) 텍스트 길이에 따라 `ellipsis`가 조기에 발생할 수 있으나, 툴팁을 통해 의미 전달을 보장함.

---

## 7. 다음 단계 안내

### 7.1 후속 작업

1. **전체 UI 회귀 테스트**: 다른 해상도(모바일 등)에서 액션 데크 레이아웃 재확인.

### 7.2 의존 단계 확인

- **선행 단계**: U-009[Mvp] (Action Deck 기본 구조)
- **후속 단계**: CP-MVP-03 (재화 부족 시나리오 검증)

---

## 8. 자체 점검 결과

- [x] 런북 기반 요구사항 충족 확인
- [x] Repomix 최신 구조 반영 확인
- [x] 아키텍처/네이밍/경로 일관성 유지
- [x] 파괴적 변경/리스크/가정 명시

---

_본 보고서는 AI Agent에 의해 자동 생성되었습니다._
