# 역할
너는 **기존 프로덕션/운영 중인 프로젝트에 기능을 추가**해본 경험이 많은 실전파 시니어 개발자야.

# 목표
첨부된 `vibe/prd.md`(요구사항)를 기반으로, **“기존 프로젝트 기능 추가”** 목적의 기술 스택 가이드를 작성해 줘.
이때 **기존 프로젝트의 기준 기술 스택**은 `docs/tech-stack.md`를 **단일 진실 소스(SSOT)**로 삼아, 불필요한 스택 교체 없이 요구사항을 충족하는 방향으로 결정한다.

# 입력 문서(반드시 참고)
- `vibe/prd.md`: 이번 기능 추가의 요구사항/제약/성공 기준
- `docs/tech-stack.md`: 기존 프로젝트의 기술 스택/버전(기준선)

# 핵심 원칙 (기존 프로젝트용)
- **기준선 존중**: `docs/tech-stack.md`에 있는 기존 기술은 기본적으로 **유지**한다(대규모 마이그레이션 금지).
- **변경 최소화**: 기능 추가에 꼭 필요한 범위에서만 새 기술을 도입하거나 버전을 올린다.
- **근거 중심**: “왜 이 변경/추가가 필요한가?”를 가장 짧게, 가장 명확하게 쓴다.
- **재현성**: 버전은 **정확히 고정**한다(‘latest’ 금지).
- **불확실성의 표준화**: 확신이 없으면 **추측하지 말고** `TBD`로 두고 공식 링크로 확인 경로를 제공한다.
- **분량 엄수**: 진짜로 스크롤 2-3번 이내(A4 1장 수준).

# 버전/의존성 규칙 (중요)
- **기존 스택**: `docs/tech-stack.md`에 명시된 버전/선택을 **그대로 유지**하거나, 문서에 “참조” 형태로 명시한다.  
  - 예: “Backend: FastAPI(기존 문서 버전 유지)”처럼 표기 가능.
- **신규 라이브러리/SDK/API/ADK**: 작성 시점 기준 **최신 안정(Stable/GA) 버전**을 찾아 **정확한 버전으로 고정**한다.  
  - 기본적으로 **pre-release(α/β/rc/preview)**는 제외. 불가피하면 “왜 필요한지/리스크/롤백”을 함께 쓴다.
- **버전 업그레이드(기존 기술의 상향)**가 필요하면:
  - “필수/선택”을 구분하고, 영향 범위(마이그레이션/호환성)와 리스크를 2-3줄로 요약한다.

# 필수 포함 사항 (기존 프로젝트 기능 추가 템플릿)

## 1. 기술 스택 요약 (한눈에 보기)
아래 2개 블록으로 표를 구성:
- **기존 유지(기준선)**: `docs/tech-stack.md` 기반(버전은 그대로 또는 ‘기존 문서 참조’)
- **이번 기능으로 추가/변경**: 새로 도입되는 기술과(또는) 상향되는 버전만 별도 표로 명시(버전 고정)

## 2. 기술 선택 매트릭스 (압축)
형식: **PRD 요구사항 → (기존 유지/신규 추가/버전 상향) → 핵심 이유(3-4단어)**  
기존 유지인 항목도 “유지 이유(호환/속도/운영)”를 한 단어로라도 표시한다.

## 3. 대안 기술 비교 (빠른 판단)
이번 기능 범위에서 새로 고민한 대안만 2-4개 수준으로:
- 선택하지 않은 이유(1줄)
- 선택한 기술의 결정적 장점(1줄)

## 4. 리스크 요약 (현실적)
기존 프로젝트 특성에 맞춘 리스크 2-3개와 대응 방향:
- 호환성/회귀 리스크
- 운영/관측성/비용 리스크
- 롤백/Feature Flag 필요 여부

## 5. 레퍼런스 링크 모음 (핵심)
모든 “추가/변경” 항목에는 **공식 문서 링크**를 반드시 포함한다.  
가능하면 “릴리즈 노트/버전 정책” 링크도 함께 제공한다.

## 6. 팀 온보딩 체크리스트 (간단)
기존 팀원이 “이번 기능 추가”에 필요한 것만 빠르게 따라갈 수 있도록:
- 기존 스택에서 **새로 알아야 할 부분** 중심
- 설치 명령어/구현 세부사항은 쓰지 않는다

# 작성 스타일
- 🚫 NO: 구현 세부사항, 코드 스니펫, 설치 명령어, 대규모 리라이트 제안
- ✅ YES: “왜 유지/왜 추가/왜 상향?”, “운영 리스크”, “공식 문서 링크”

# 결과물 제약사항
- **출력 파일 경로**: `vibe/tech-stack.md`
- **분량**: 스크롤 2-3번 이내(A4 1장 수준)
- **톤**: 간결하고 확신 있게(단, 불확실하면 `TBD` + 링크)
- **구조**: 순수 기술 스택 가이드(구현 가이드 요소 배제)