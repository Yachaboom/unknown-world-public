# 로드맵 변경 이력

## 2026-02-03 - roadmap-update/gameplay-quality-enhancement

### 변경 요약

MVP 게임플레이 품질 강화를 위해 **인벤토리 스크롤(U-077)**, **명확한 목표 시스템(U-078)**, **재화 부족 시 이미지 생성 허용 + 재화 획득 경로 다양화(U-079)** 유닛 3개를 추가했습니다. 아이템이 많아질 때 패널이 깨지지 않고, 플레이어가 항상 목표를 알 수 있으며, 재화가 부족해도 게임이 막히지 않도록 합니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-077~U-079 백로그 추가, 진행률 재계산(MVP 82.8%→80.4%), 리스크 R-017/R-018 추가, 핵심 기능 책임 Unit 확장
- 🆕 `vibe/unit-plans/U-077[Mvp].md`: 인벤토리 패널 스크롤 및 아이템 관리 UX 개선 계획서
- 🆕 `vibe/unit-plans/U-078[Mvp].md`: 게임 목표 시스템 강화 - 명확한 목표 제시 및 진행 가이드 계획서
- 🆕 `vibe/unit-plans/U-079[Mvp].md`: 재화 부족 시 이미지 생성 허용 + 재화 획득 경로 다양화 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-077[Mvp]: 인벤토리 패널 스크롤 및 아이템 관리 UX 개선 - 아이템이 많아져도 레이아웃 유지
- U-078[Mvp]: 게임 목표 시스템 강화 - 명확한 주 목표/서브 목표 제시, 보상 지급 루프 완성
- U-079[Mvp]: 재화 부족 시 이미지 생성 허용 + 재화 획득 경로 다양화 - 경제 루프 완성, 게임 진행 차단 방지

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-077[Mvp]: Depends=U-011,U-049
- U-078[Mvp]: Depends=U-013,U-015
- U-079[Mvp]: Depends=U-014,U-019,U-078

### 진행률 변화

- **MVP**: 82/99 (82.8%) → 82/102 (80.4%) (신규 유닛 3개 추가로 분모 증가)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 82/117 (70.1%) → 82/120 (68.3%) (신규 유닛 3개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-078[Mvp]
- **신규 유닛 계획서**: 3개 생성(U-077, U-078, U-079) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-017: 재화 부족으로 게임 진행이 막히거나, 이미지 생성이 완전 차단되어 데모 체감 급락 - 대응: U-079
- R-018: 플레이어가 목표를 모르고 방황하여 "뭘 해야 하는지 모르겠다" 피드백 발생 - 대응: U-078

### 주의사항

- **U-079**는 RULE-005("잔액 음수 금지")를 **"잔액 부족 시 대안 제공"**으로 완화합니다. 단, ledger 기록은 정확히 유지해야 합니다.
- **U-078**에서 GM이 목표를 무시할 수 있으므로 프롬프트 지침을 강화하고, 목표 달성 검증 로직을 추가해야 합니다.
- **U-077**에서 dnd-kit과 스크롤 컨테이너의 호환성 테스트가 필요합니다.

---

## 2026-02-03 - roadmap-update/precise-analysis-and-session-persistence

### 변경 요약

MVP에서 **"정밀분석" 액션을 통한 Agentic Vision 분석**(U-076)과 MMP에서 **새로고침 시 세션 상태 복원**(U-113) 유닛을 추가했습니다. U-076은 기존 Scene 이미지에 대해 사용자가 명시적으로 "정밀분석"을 요청할 때만 Agentic Vision을 실행하여 정합성 있는 핫스팟을 추가합니다(MMP U-109의 선행 버전). U-113은 브라우저 새로고침 시에도 Scene 이미지, ActionDeck 등 UI 상태가 유지되도록 세션 영속성을 구현합니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-076(MVP), U-113(MMP) 백로그 추가, 진행률 재계산(MVP 83.7%→82.8%, MMP 0%→0%, 전체 71.3%→70.1%), 리스크 R-016 추가, 멀티모달 핵심 기능 책임 Unit 확장
- 🆕 `vibe/unit-plans/U-076[Mvp].md`: "정밀분석" 액션으로 기존 Scene 이미지 Agentic Vision 분석 및 핫스팟 추가 계획서
- 🆕 `vibe/unit-plans/U-113[Mmp].md`: 세션 상태 영속성 - 새로고침 시 Scene/ActionDeck/상태 복원 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-076[Mvp]: "정밀분석" 액션으로 기존 Scene 이미지 Agentic Vision 분석 및 핫스팟 추가 - 사용자 트리거 기반 이미지 분석으로 핫스팟 정합성 개선(MMP U-109 선행)
- U-113[Mmp]: 세션 상태 영속성 - 새로고침 시 Scene/ActionDeck/상태 복원 - 브라우저 새로고침 시 UI 상태 유실 방지

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-076[Mvp]: Depends=U-010,U-019,U-069
- U-113[Mmp]: Depends=U-015,U-041

### 진행률 변화

- **MVP**: 82/98 (83.7%) → 82/99 (82.8%) (신규 유닛 1개 추가로 분모 증가)
- **MMP**: 0/17 (0%) → 0/18 (0%) (신규 유닛 1개 추가로 분모 증가)
- **전체**: 82/115 (71.3%) → 82/117 (70.1%) (신규 유닛 2개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-069[Mvp]
- **신규 유닛 계획서**: 2개 생성(U-076, U-113) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-016: 새로고침/탭 종료 시 게임 진행 상태(Scene 이미지/ActionDeck)가 날아가 데모 중 치명적 손실 - 대응: U-113(MMP) + SaveGame 폴백

### 주의사항

- U-076은 MMP U-109(이미지 생성 시 자동 실행)의 **선행 버전**으로, 사용자가 명시적으로 "정밀분석" 카드를 선택할 때만 실행됩니다. 비용/지연을 사용자 선택에 맡겨 MVP 단순화를 달성합니다.
- U-076에서 이미지 생성은 하지 않고, 기존 이미지에 대한 분석 + 핫스팟 추가만 수행합니다.
- U-113은 SessionStorage/LocalStorage 선택, 복원 범위, 자동 vs 수동 복원 등 페어링 질문이 있으므로 구현 전 결정이 필요합니다.
- U-113 구현 전까지는 중요한 데모 전 수동 저장(SaveGame)을 권장합니다.

---

## 2026-02-03 - roadmap-update/mvp-quality-ux-enhancement

### 변경 요약

MVP 품질 및 UX 강화를 위해 **9개의 신규 유닛(U-067~U-075)**을 추가했습니다. Vertex AI Production 설정 핫픽스, 이미지 연결성 강화(참조 이미지), 텍스트 모델 티어링(FAST/Pro), 액션 로그 출력, Scene 로딩 UI, Scanner 유도 UX, 레이아웃 확장, 인터랙션 안내, 아이템 아이콘 동적 생성 등을 계획했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-067~U-075 백로그 추가, 진행률 재계산(MVP 92.1%→83.7%), 리스크(R-014, R-015) 추가, 핵심 기능 책임 Unit 확장
- 🆕 `vibe/unit-plans/U-067[Mvp].md`: 핫픽스 - Vertex AI Production 설정 수정 계획서
- 🆕 `vibe/unit-plans/U-068[Mvp].md`: 이전 턴 이미지 참조로 이미지 연결성 강화 계획서
- 🆕 `vibe/unit-plans/U-069[Mvp].md`: 텍스트 FAST 모델 + 정밀조사 트리거 Pro 전환 계획서
- 🆕 `vibe/unit-plans/U-070[Mvp].md`: 아이템-핫스팟 사용 시 액션 로그 출력 계획서
- 🆕 `vibe/unit-plans/U-071[Mvp].md`: Scene 처리중 UI 로딩 인디케이터 강화 계획서
- 🆕 `vibe/unit-plans/U-072[Mvp].md`: Scanner 의미론적 사용 유도 UX 계획서
- 🆕 `vibe/unit-plans/U-073[Mvp].md`: 레이아웃 확장 - 좌우 빈공간 활용 계획서
- 🆕 `vibe/unit-plans/U-074[Mvp].md`: 핫스팟/아이템 인터랙션 안내 UX 계획서
- 🆕 `vibe/unit-plans/U-075[Mvp].md`: 인벤토리 아이템 아이콘 동적 생성 및 이름 정합성 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-067[Mvp]: 핫픽스 - Vertex AI Production 설정 수정 - 데모/배포 환경 안정성 확보 (가장 선행)
- U-068[Mvp]: 이전 턴 이미지를 참조이미지로 사용하여 이미지 연결성 강화 - 시각적 일관성/몰입감 개선
- U-069[Mvp]: 텍스트 생성 FAST 모델 + "정밀조사" 트리거 Pro 모델 전환 - 비용 최적화 + 품질 선택권
- U-070[Mvp]: 아이템-핫스팟 사용 시 액션 로그 출력 - 인터랙션 피드백 강화
- U-071[Mvp]: Scene 처리중 UI 로딩 인디케이터 강화 - 처리 상태 가시성 개선
- U-072[Mvp]: Scanner 의미론적 사용 유도 UX - 멀티모달 기능 발견성 강화
- U-073[Mvp]: 레이아웃 확장 - 좌우 빈공간 활용으로 덜 답답한 UI
- U-074[Mvp]: 핫스팟/아이템 인터랙션 안내 UX - 핵심 인터랙션 발견성 강화
- U-075[Mvp]: 인벤토리 아이템 아이콘 동적 생성 및 이름 정합성 - 아이템 시각화/i18n 정합성

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-067[Mvp]: Depends=U-066 (가장 선행)
- U-068[Mvp]: Depends=U-067,U-066
- U-069[Mvp]: Depends=U-067
- U-070[Mvp]: Depends=U-012
- U-071[Mvp]: Depends=U-066
- U-072[Mvp]: Depends=U-022
- U-073[Mvp]: Depends=U-049
- U-074[Mvp]: Depends=U-012,U-010
- U-075[Mvp]: Depends=U-011,U-035

### 진행률 변화

- **MVP**: 82/89 (92.1%) → 82/98 (83.7%) (신규 유닛 9개 추가로 분모 증가)
- **MMP**: 0/17 (0%) → 0/17 (0%) (변경 없음)
- **전체**: 82/106 (77.4%) → 82/115 (71.3%) (신규 유닛 9개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-066[Mvp]
- **신규 유닛 계획서**: 9개 생성(U-067~U-075) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-014: 연속 장면 간 시각적 일관성 부족(동일 캐릭터/오브젝트가 다르게 그려짐)으로 몰입 저하 - 대응: U-068
- R-015: 핵심 인터랙션(핫스팟 클릭/아이템 DnD) 발견성 부족으로 플레이어가 텍스트 입력만 시도 - 대응: U-074, U-072

### 주의사항

- U-067(Vertex AI Production 설정)은 핫픽스로 **가장 선행**으로 진행해야 합니다.
- U-075(아이템 아이콘 동적 생성)는 이미지 생성 비용이 발생하므로 FAST 모델 사용 및 캐싱이 필수입니다.
- U-068(참조 이미지)에서 FAST 모델(`gemini-2.5-flash-image`)은 참조 이미지 수 제한이 있을 수 있습니다.
- 인터랙션 안내 UX(U-074)는 온보딩 가이드를 포함하며, 데모 프로필에서는 스킵 가능하도록 설계해야 합니다.

---

## 2026-02-02 - roadmap-update/image-delay-natural-flow

### 변경 요약

이미지 생성이 오래 걸려도 “멈춤/실패”로 느껴지지 않도록, **진행 연출 + late-binding(늦게 도착한 이미지의 안전한 결합) + 모델 티어링(FAST/QUALITY)** 을 MVP 범위에서 명시했습니다. 이를 위해 신규 MVP 유닛 **U-066**을 추가하고 PRD/Tech-stack/로드맵을 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 6.3(멀티모달) 및 8.5(이미지 모델)에 “지연 흡수 플로우 + `gemini-2.5-flash-image` 선택 가능” 요구 추가
- ✏️ `vibe/tech-stack.md`: 모델 라인업에 `gemini-2.5-flash-image`(저지연 프리뷰/초안, 선택) 추가
- ✏️ `vibe/roadmap.md`: U-066 백로그 추가, 멀티모달 완료 기준/책임 Unit 보강, 리스크 R-013 추가, 진행률 재계산
- 🆕 `vibe/unit-plans/U-066[Mvp].md`: 지연 흡수 플로우(연출/late binding) + 모델 티어링 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-066[Mvp]: 이미지 생성 지연 흡수 플로우(진행 연출/late binding) + 모델 티어링(FAST/QUALITY) - 지연이 길어도 폴백을 최소화하고 “장면이 늦게 도착해도 자연스럽게” 보이도록 UX/정합 가드 설계

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-066[Mvp]: Depends=U-065[Mvp],U-055[Mvp],U-020[Mvp]

### 진행률 변화

- **MVP**: 81/88 (92.0%) → 81/89 (91.0%) (신규 유닛 1개 추가로 분모 증가)
- **MMP**: 0/17 (0%) → 0/17 (0%) (변경 없음)
- **전체**: 81/105 (77.1%) → 81/106 (76.4%) (신규 유닛 1개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-064[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-066) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: PRD/Tech-stack/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-013: 이미지 생성 지연이 길 때 “장면 갱신” 타이밍이 어긋나 몰입이 깨질 수 있음(늦게 도착한 이미지가 새 장면을 덮는 문제 포함) - 대응: U-066

### 주의사항

- U-066은 “폴백 최소화”를 목표로 하지만, **RULE-004의 안전 폴백(텍스트-only)** 은 최후 수단으로 항상 유지해야 합니다.
- `gemini-2.5-flash-image`를 프리뷰/초안에 사용할 경우, 비용/품질/참조 이미지 제한을 고려해 **REF/편집/복잡 장면은 QUALITY 모델로 강제**하는 정책이 필요합니다.

---

## 2026-02-01 - roadmap-update/image-pipeline-integration

### 변경 요약

이미지 생성 서비스와 턴 파이프라인을 연결하여 **실플레이 기능을 완성**하기 위한 MVP 유닛 5개(U-051~U-055)를 추가하고, Panel Corner 이미지 방향 수정을 위한 MMP 유닛 1개(U-112)를 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-051~U-055(MVP), U-112(MMP) 백로그 추가, 멀티모달 핵심 기능 책임 Unit 확장, 진행률 재계산
- 🆕 `vibe/unit-plans/U-051[Mvp].md`: 렌더링 단계-이미지 생성 서비스 브릿지 구축 계획서
- 🆕 `vibe/unit-plans/U-052[Mvp].md`: 조건부 이미지 생성 제어 로직(should_generate 판정) 계획서
- 🆕 `vibe/unit-plans/U-053[Mvp].md`: 비동기 이미지 생성 및 결과 데이터 동기화 계획서
- 🆕 `vibe/unit-plans/U-054[Mvp].md`: 이미지 생성 폴백 및 실패 복구 체계 강화 계획서
- 🆕 `vibe/unit-plans/U-055[Mvp].md`: 이미지 파이프라인 Mock/Real 모드 통합 검증 계획서
- 🆕 `vibe/unit-plans/U-112[Mmp].md`: Panel Corner 이미지 방향 수정 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-051[Mvp]: 렌더링 단계-이미지 생성 서비스 브릿지 구축 - 현재 비어있는 render_stage에서 이미지 생성 서비스를 호출할 수 있도록 의존성 주입
- U-052[Mvp]: 조건부 이미지 생성 제어 로직 - TurnOutput 내 image_job 분석하여 생성 여부/프롬프트/해상도 추출
- U-053[Mvp]: 비동기 이미지 생성 및 결과 데이터 동기화 - 생성된 이미지 URL을 TurnOutput에 반영
- U-054[Mvp]: 이미지 생성 폴백 및 실패 복구 체계 강화 - RULE-004에 따른 안전한 텍스트 전용 모드 전환
- U-055[Mvp]: 이미지 파이프라인 Mock/Real 모드 통합 검증 - 전체 루프 검증 및 런북 작성
- U-112[Mmp]: Panel Corner 이미지 방향 수정 - panel-corner-br.png 식별성 개선

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-051[Mvp]: Depends=U-019[Mvp],RU-005[Mvp]
- U-052[Mvp]: Depends=U-051[Mvp],U-017[Mvp]
- U-053[Mvp]: Depends=U-052[Mvp]
- U-054[Mvp]: Depends=U-053[Mvp],U-018[Mvp]
- U-055[Mvp]: Depends=U-054[Mvp],CP-MVP-05
- U-112[Mmp]: Depends=U-032[Mvp]

### 진행률 변화

- **MVP**: 67/66 (101.5%) → 67/71 (94.4%) (신규 유닛 5개 추가로 분모 증가)
- **MMP**: 0/16 (0%) → 0/17 (0%) (신규 유닛 1개 추가로 분모 증가)
- **전체**: 67/82 (81.7%) → 67/88 (76.1%) (신규 유닛 6개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-019[Mvp]
- **신규 유닛 계획서**: 6개 생성(U-051~U-055, U-112) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음 (기존 R-002 비용/지연 리스크로 커버됨)

### 주의사항

- U-051~U-055는 순차적 의존성이 있으므로 순서대로 진행해야 합니다.
- U-055 Real 모드 검증은 Vertex AI 인증 환경이 필요합니다(.env 설정 확인).
- U-112는 MMP 유닛으로, MVP 완료 후 진행합니다.

---

## 2026-01-31 - roadmap-update/scanner-cost-debug-ttl

### 변경 요약

Scanner 분석 **비용 정책(MVP: Signal 무료)**을 PRD에 명시하고, Real mode 비전 모델 프롬프트 최적화 계획을 기존 유닛(U-021/U-022)에 보강했습니다. 또한 MMP에 **프론트엔드 디버깅 모드 토글 UI(U-110)** 와 **스토리지 TTL/정리 정책 정의(U-111)** 유닛을 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: (1) Scanner 비용 정책(MVP: 무료) 및 프롬프트 최적화 계획 명시(6.7) (2) 디버깅 모드 토글 UI 요구 추가(10.2) (3) 스토리지 TTL/정리 정책 요구 추가(6.6)
- ✏️ `vibe/roadmap.md`: U-110/U-111 백로그 추가, MMP 진행률 재계산(0/14→0/16), CP-MMP-02 의존성 확장
- ✏️ `vibe/unit-plans/U-021[Mvp].md`: MMP 프롬프트 최적화 예정 및 비용 정책 메모 추가
- ✏️ `vibe/unit-plans/U-022[Mvp].md`: 비용 정책(MVP: 무료) 및 MMP 프롬프트 최적화 예정 메모 추가
- 🆕 `vibe/unit-plans/U-110[Mmp].md`: 프론트엔드 디버깅 모드 토글 UI 계획서
- 🆕 `vibe/unit-plans/U-111[Mmp].md`: 스토리지 TTL/정리 정책 정의 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-110[Mmp]: 프론트엔드 디버깅 모드 토글 UI(스트림 로그/상태 diff/스토리지 사용량) - 심사자/개발자용 상세 관측 도구
- U-111[Mmp]: 스토리지 TTL/정리 정책 정의(로컬/GCS Lifecycle) - 디스크 용량 관리 및 민감 데이터 잔류 방지

**수정**:

- U-021[Mvp]: MMP 프롬프트 최적화 예정 메모 추가
- U-022[Mvp]: 비용 정책(MVP: 무료) 및 MMP 프롬프트 최적화 예정 메모 추가
- CP-MMP-02: Depends 확장 (이전: RU-011,U-107 → 이후: RU-011,U-107,U-110,U-111)

**삭제/Skip**:

- 없음

### 의존성 변경

- U-110[Mmp]: Depends=U-106
- U-111[Mmp]: Depends=U-102
- CP-MMP-02: Depends 변경 (이전: RU-011,U-107 → 이후: RU-011,U-107,U-110,U-111)

### 진행률 변화

- **MVP**: 64/66 (96.9%) → 64/66 (96.9%) (변경 없음)
- **MMP**: 0/14 (0%) → 0/16 (0%) (신규 유닛 2개 추가로 분모 증가)
- **전체**: 64/80 (80.0%) → 64/82 (78.0%) (신규 유닛 2개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-106[Mmp]
- **신규 유닛 계획서**: 2개 생성(U-110, U-111) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 2개(U-021, U-022) - 비용 정책/프롬프트 최적화 메모 추가, 상세도 유지/향상 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음(기존 리스크로 커버됨: R-002 비용/지연, R-005 스토리지 관리)

### 주의사항

- Scanner 비용 정책은 MVP에서 무료로 유지하고, MMP에서 비용 부과 여부를 재검토합니다.
- 스토리지 TTL/정리 정책 적용 시 진행 중 세션 이미지가 삭제되지 않도록 보호 로직을 필수로 포함합니다.
- 디버깅 모드에서 프롬프트 원문/CoT/비밀정보는 절대 노출하지 않습니다(RULE-007/008).

---

## 2026-01-28 23:45 - roadmap-update/mvp-env-ui-action-polish

### 변경 요약

MVP 데모 체감을 개선하기 위해 **백엔드 `.env` 자동 로딩(U-047)** 과 **real 모드 스모크 체크포인트(CP-MVP-07)** 를 추가하고, 프론트의 **UI/UX 스크롤/오버레이 폴리시(U-049/U-050)** 및 **mock 내러티브 템플릿 개선(U-048)** 계획을 로드맵/PRD에 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: (1) 로컬 `.env` 자동 로딩 요구 추가(8.2) (2) 레이아웃/스크롤 원칙(9.3) 및 오버레이 덮임 방지(9.5) 요구 보강 (3) Action 입력 에코를 “행동 로그”로 분리(9.0)
- ✏️ `vibe/roadmap.md`: U-047/U-048/U-049/U-050/CP-MVP-07 백로그 추가, 리스크(R-010~012) 추가, MVP/전체 진행률 및 예상 완료일 재계산
- 🆕 `vibe/unit-plans/U-047[Mvp].md`: Backend `.env` 자동 로딩(로컬) + 모드/ENV 가드 계획서
- 🆕 `vibe/unit-plans/CP-MVP-07.md`: 체크포인트 - real 모드 로컬 실행 게이트(.env/Vertex/스트리밍) 계획서
- 🆕 `vibe/unit-plans/U-048[Mvp].md`: MockOrchestrator 액션 echo/내러티브 템플릿 개선 계획서
- 🆕 `vibe/unit-plans/U-049[Mvp].md`: UI/UX 레이아웃/스크롤 설계 개선 계획서
- 🆕 `vibe/unit-plans/U-050[Mvp].md`: UI/UX 오버레이 팔레트/강도 튜닝 + 반응형 폴리시 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-047[Mvp]: Backend `.env` 자동 로딩(로컬) + 모드/ENV 가드(프롬프트/Vertex) - real 모드 실행 재현성/데모 체감 개선
- CP-MVP-07: 체크포인트 - real 모드 로컬 실행 게이트(.env/Vertex/스트리밍) - 인증/환경변수 드리프트로 인한 데모 실패 방지
- U-048[Mvp]: Mock Orchestrator 템플릿 개선(“...라고 말했습니다” 제거, 반복 완화) - mock 모드에서도 자연스러운 게임 로그 유지
- U-049[Mvp]: UI/UX 레이아웃/스크롤 설계 개선(카드 내부 스크롤) - 우측 컬럼 전체 스크롤 UX 개선
- U-050[Mvp]: UI/UX 오버레이 팔레트/강도 튜닝(덮임/쨍함 완화) + 반응형 폴리시 - 오버레이로 인한 콘텐츠 가림/피로도 완화

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-047[Mvp]: Depends=U-003[Mvp],U-016[Mvp]
- CP-MVP-07: Depends=U-047[Mvp],CP-MVP-04
- U-048[Mvp]: Depends=U-007[Mvp]
- U-049[Mvp]: Depends=U-004[Mvp],U-013[Mvp],U-014[Mvp]
- U-050[Mvp]: Depends=U-010[Mvp],U-037[Mvp]

### 진행률 변화

- **MVP**: 54/61 (88%) → 54/66 (81%) (신규 유닛 5개 추가로 분모 증가)
- **MMP**: 0/14 (0%) → 0/14 (0%) (변경 없음)
- **전체**: 54/75 (72%) → 54/80 (67%) (신규 유닛 5개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-046[Mvp]
- **신규 유닛 계획서**: 5개 생성(U-047, CP-MVP-07, U-048, U-049, U-050) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-010: 로컬/데모에서 실모델(real) 모드 환경변수 로딩 누락으로 mock 출력 또는 인증 실패 - 대응: U-047 + CP-MVP-07
- R-011: 오버레이/스크롤 전략으로 “게임 UI” 체감 저하 - 대응: U-049/U-050 + 가이드 기반 점검
- R-012: Action 실행 시 템플릿 문장 반복으로 몰입 저하(mock 모드) - 대응: U-048(+ real 모드 기본 동선)

### 주의사항

- `.env` 및 서비스 계정 키 파일은 레포에 커밋/로그 노출하지 않습니다(`.env.example`만 SSOT).
- UI/UX 폴리시는 “채팅 UI”로 회귀시키지 않고, 고정 HUD/패널 구조는 유지한 채로 스크롤/오버레이만 개선합니다(RULE-002).

---

## 2026-01-28 23:59 - roadmap-update/agentic-vision-grounding

### 변경 요약

Gemini 3 Flash의 **Agentic Vision(Code Execution)** 을 활용해 “생성된 장면 이미지 기반으로 행동/핫스팟을 더 구체적·사실적으로 제시”하는 기능을 MMP 신규 유닛(U-109)으로 계획했고, PRD/로드맵에 해당 요구사항 및 리스크/진행률을 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: Action Deck(6.7) 및 이미지 이해(8.6)에 “Agentic Vision 기반 행동 근거화(생성 이미지)” 요구사항 추가
- ✏️ `vibe/roadmap.md`: U-109[Mmp] 백로그 추가, R-009 리스크 추가, MMP/전체 진행률 및 예상 완료일 재계산(MMP D-7→D-8)
- 🆕 `vibe/unit-plans/U-109[Mmp].md`: Agentic Vision(Flash+Code Execution) 기반 affordances 추출 + Action Deck/Hotspots 정합화 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-109[Mmp]: Agentic Vision - 생성된 장면 이미지 기반 행동/핫스팟 근거화 - 장면과 행동 카드/핫스팟의 정합성 강화(환각 감소)

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-109[Mmp]: Depends=U-019,U-020,RU-005

### 진행률 변화

- **MVP**: 52/61 (85%) → 52/61 (85%) (변경 없음)
- **MMP**: 0/13 (0%) → 0/14 (0%) (신규 유닛 1개 추가로 분모 증가)
- **전체**: 52/74 (70%) → 52/75 (69%) (신규 유닛 1개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-046[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-109) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-009: Agentic Vision(코드 실행) 추가 호출로 비용/지연이 커져 UX가 악화되거나, 생성 이미지-행동/핫스팟 정합이 깨질 수 있음 - 대응: Key scene/명시적 트리거 + Economy 게이트/예상비용 + 실패 시 텍스트 폴백

### 주의사항

- Agentic Vision은 추가 호출이므로 “기본 자동 실행”은 비용/지연 리스크가 큽니다. 우선은 **명시적 트리거(예: 정밀 조사 카드)** 또는 Key scene 제한으로 도입하는 것이 안전합니다.
- 입력 이미지 참조(`scene_image_url` 등)를 TurnInput으로 전달할 경우, 서버는 **허용 경로 검증/경로 탈출 방지**를 필수로 포함해야 합니다.

---

## 2026-01-26 23:55 - roadmap-update/prompt-xml-tags

### 변경 요약

분리 프롬프트 포맷을 **md→json으로 전환**하는 계획을 제거하고, 대신 **분리된 프롬프트 `.md` 내부에서 XML 태그 규격(메타/섹션)을 통일**하는 방향으로 로드맵/PRD/가이드 문서를 정합화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 프롬프트 관리 원칙에 “.md 유지 + XML 태그 표준 + 메타 추출” 정책 문구 추가(3.2/10.4)
- ✏️ `vibe/roadmap.md`: U-046 신규 추가, R-008(프롬프트 포맷 드리프트) 리스크 추가, 진행률 재계산
- 🆕 `vibe/unit-plans/U-046[Mvp].md`: 분리 프롬프트 XML 태그 규격 통일 + 로더 파싱 단일화 계획서
- ✏️ `.cursor/rules/30-prompts-i18n.mdc`: 프롬프트 상단 메타/계약 표기를 XML 태그 표준 + 레거시 병행으로 정리
- ✏️ `vibe/unit-runbooks/U-036-prompt-loader-hotreload-runbook.md`: “JSON 형태 프롬프트 반환” 시나리오 제거(계획 변경 반영)
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-046[Mvp]: 분리 프롬프트(.md) XML 태그 규격 통일(메타/섹션) + 로더 파싱 단일화 계획 - 포맷 드리프트 방지 및 메타 추적/튜닝 안정화

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-046[Mvp]: Depends=U-036[Mvp]

### 진행률 변화

- **MVP**: 49/60 (81%) → 49/61 (80%)
- **MMP**: 0/13 (0%) → 0/13 (0%)
- **전체**: 49/73 (67%) → 49/74 (66%)

> 사유: 신규 유닛 1개(U-046) 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-036[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-046) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵/프롬프트 규칙/런북 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-008: 프롬프트 포맷 드리프트(프론트매터/태그 혼재) - 대응: XML 태그 규격 통일 + 로더 파싱/검증 단일화(U-046)

### 주의사항

- U-046 수행 전까지는 기존 프롬프트 로더/테스트와의 호환을 위해 레거시(`- key: value`) 메타 포맷을 유지하고, XML 태그 표준은 “점진 마이그레이션”으로 적용하세요.
- 분리 프롬프트는 `.md`를 유지하며, JSON 파일로의 포맷 전환은 계획에서 제외합니다.

---

## 2026-01-26 10:30 - roadmap-update/language-mix-rembg-preflight

### 변경 요약

한 화면에 ko/en이 섞여 노출되는 문제(`vibe/ref/en-ko-issue.png`)를 **서버 Hard Gate(언어 콘텐츠 검증+Repair)** 와 **프론트 세션 언어 SSOT(언어 전환=리셋)** 로 분해해 유닛(U-043~U-045) 계획으로 추가하고, rembg 모델의 “첫 실행 다운로드 지연”을 서버 부팅 preflight로 흡수하는 계획을 로드맵/PRD/부채 로그에 반영했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 언어 전환 정책(MVP: 토글=세션 리셋) 명시, rembg 모델 preflight 정책 문구 추가
- ✏️ `vibe/roadmap.md`: U-043~U-045 신규 추가, R-007(언어 혼합) 리스크 추가, CP-MVP-05 의존성 확장, 진행률/예상 완료 재계산
- ✏️ `vibe/debt-log.md`: ko/en 혼합 출력 이슈 등록 및 해결 유닛(U-043/U-044) 연결
- 🆕 `vibe/unit-plans/U-043[Mvp].md`: ko/en 혼합 출력 게이트(언어 검증+Repair) 계획서
- 🆕 `vibe/unit-plans/U-044[Mvp].md`: 세션 언어 SSOT(토글=리셋) + 혼합 출력(상태/시스템) 제거 계획서
- 🆕 `vibe/unit-plans/U-045[Mvp].md`: Backend 시작 시 rembg/모델 사전 점검 + 다운로드(preflight) 계획서
- ✏️ `vibe/unit-plans/CP-MVP-05.md`: 언어/리셋 정책 및 rembg preflight를 완료 기준/의존성에 반영
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-043[Mvp]: ko/en 혼합 출력 게이트(언어 검증+Repair) - “언어 필드 정합”뿐 아니라 “콘텐츠 언어 혼합”까지 Hard Gate로 차단
- U-044[Mvp]: 세션 언어 SSOT(토글=리셋) + 혼합 출력(상태/시스템) 제거 - 언어 전환 시 과거 텍스트 잔재로 인한 혼합을 세션 경계로 제거
- U-045[Mvp]: Backend 시작 시 rembg/모델 사전 점검 + 다운로드(preflight) - 첫 rembg 실행 다운로드/지연을 턴 경로에서 제거

**수정**:

- CP-MVP-05: Depends 확장 (이전: U-035,U-036 → 이후: U-035,U-036,U-043,U-044,U-045)

**삭제/Skip**:

- 없음

### 의존성 변경

- CP-MVP-05: Depends 변경 (이전: U-035,U-036 → 이후: U-035,U-036,U-043,U-044,U-045)

### 진행률 변화

- **MVP**: 48/57 (84%) → 48/60 (80%)
- **MMP**: 0/13 (0%) → 0/13 (0%)
- **전체**: 48/70 (68%) → 48/73 (66%)

> 사유: 신규 유닛 3개(U-043~U-045) 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-039[Mvp]
- **신규 유닛 계획서**: 3개 생성(U-043, U-044, U-045) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 1개(CP-MVP-05) - 섹션 누락 없음, 상세도 유지/향상 ✅
- **수정된 문서**: PRD/로드맵/부채 로그 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-007: ko/en 혼합 출력(내러티브/룰/퀘스트/UI)이 한 화면에 노출 - 대응: 세션 언어 SSOT(토글=리셋) + 언어 게이트/Repair + 폴백/하드코딩 정리

### 주의사항

- MVP에서 언어 전환은 “기존 상태 번역”이 아니라 세션 리셋으로 처리합니다(혼합 출력 방지 우선).
- rembg preflight는 네트워크/권한/경로 이슈로 실패할 수 있으므로, 실패 시 degraded 모드(원본 유지)로 수렴하도록 설계해야 합니다.

---

## 2026-01-24 18:10 - roadmap-update/terminology-savegame-migrations-asset-schema-fix-plan

### 변경 요약

용어(원장/Ledger)와 SaveGame 마이그레이션, 그리고 debt-log의 에셋 스키마 이슈를 “즉시 수정”이 아닌 **실행 가능한 유닛(U-040~U-042) 계획**으로 분해하여 로드맵/PRD/부채 로그에 반영했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: “재화 거래 장부(Resource Log)” 용어 반영, SaveGame 버전 불일치 시 마이그레이션/폴백 정책 문구 추가
- ✏️ `vibe/roadmap.md`: U-040~U-042 신규 추가, 진행률/예상 완료 재계산, 핵심 기능 책임 Unit 연결
- ✏️ `vibe/debt-log.md`: `rembg_model` 스키마 불일치 이슈에 해결 유닛(U-040) 연결
- 🆕 `vibe/unit-plans/U-040[Mvp].md`: 에셋 요청 스키마 정합(rembg_model 이슈) + 테스트/런북 복구 계획서
- 🆕 `vibe/unit-plans/U-041[Mvp].md`: SaveGame 마이그레이션(버전별 변환 로직) 계획서
- 🆕 `vibe/unit-plans/U-042[Mvp].md`: 용어/카피 정리(거래 장부/Resource Log) 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-040[Mvp]: 에셋 요청 스키마 정합(rembg_model 이슈) + 테스트/런북 복구 - debt-log에 기록된 검증 실패를 SSOT(스키마) 기준으로 해소
- U-041[Mvp]: SaveGame 마이그레이션: migrateSaveGame에 버전별 변환 로직 구현 - WorldState/SaveGame 스키마 변경 시에도 데모 루프를 끊지 않기 위한 기반
- U-042[Mvp]: 용어/카피 정리: 원장→거래 장부, Ledger→Resource Log 등 게임 친화 용어 통일 - 사용자 이해도/몰입을 해치는 용어 혼선 감소

**수정**:

- 없음(기존 유닛 ID/Phase 유지)

**삭제/Skip**:

- 없음

### 의존성 변경

- U-040[Mvp]: Depends=U-034
- U-041[Mvp]: Depends=RU-004
- U-042[Mvp]: Depends=U-014,U-039

### 진행률 변화

- **MVP**: 35/52 (67%) → 35/55 (64%)
- **MMP**: 0/13 (0%) → 0/13 (0%)
- **전체**: 35/65 (54%) → 35/68 (51%)

> 사유: 신규 유닛 3개(U-040~U-042) 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-015[Mvp]
- **신규 유닛 계획서**: 3개 생성(U-040, U-041, U-042) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: PRD/로드맵/부채 로그 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음(단, SaveGame 스키마 드리프트로 데모 루프가 끊기는 리스크를 U-041에서 완화 예정)

### 주의사항

- U-040은 “스키마/테스트/런북” 간 필드명 정합을 목표로 하며, 실제 테스트 실패 해소는 해당 유닛 수행 시점에 완료됩니다.
- U-041은 `loadSaveGame()`의 “검증→마이그레이션” 순서를 “버전 판별→마이그레이션→검증”으로 재구성해야 하므로, 변경 범위를 과소평가하지 않도록 주의하세요(테스트 필수).

---

## 2026-01-19 - roadmap-update/checkpoint-expansion-tech-debt

### 변경 요약

M3 통합 구간에서 기술 부채/회귀가 누적되는 것을 방지하기 위해 **중간 체크포인트 3개(CP-MVP-04~06)** 를 신규 추가하고, 진행률/예상 완료를 `unit-results/progress` 기준(완료 증거 기반)으로 재계산하여 로드맵 요약을 정합화했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: CP 확장(CP-MVP-04~06) 반영, 리스크(R-006) 추가, 진행률/예상 완료/현재 작업 표기 정합화
- 🆕 `vibe/unit-plans/CP-MVP-04.md`: 실모델 Hard Gate(스키마/경제/복구) 체크포인트 계획서 생성
- 🆕 `vibe/unit-plans/CP-MVP-05.md`: 멀티모달 이미지 게이트(텍스트 우선/폴백/비용) 체크포인트 계획서 생성
- 🆕 `vibe/unit-plans/CP-MVP-06.md`: Scanner 업로드 게이트(안전/좌표/비용) 체크포인트 계획서 생성

### 백로그 변경

**추가**:

- CP-MVP-04: 체크포인트 - 실모델 Hard Gate(스키마/경제/복구) - M3 통합 전 “Hard Gate” 기준선 확보
- CP-MVP-05: 체크포인트 - 멀티모달 이미지 게이트(텍스트 우선/폴백/비용) - 멀티모달 실패/지연/비용 리스크를 조기 차단
- CP-MVP-06: 체크포인트 - Scanner 업로드 게이트(안전/좌표/비용) - 업로드 입력의 보안/좌표/폴백 안정성 확보

**수정**:

- 없음(기존 유닛 ID/내용 축약 없이, 체크포인트만 추가)

### 의존성 변경

- 없음(신규 CP는 기존 유닛에 의존만 추가, 기존 유닛 Depends는 유지)

### 진행률 변화

- **MVP**: 41/49 (84%) → 31/52 (60%)
- **MMP**: 0/13 (0%) → 0/13 (0%)
- **전체**: 41/62 (66%) → 31/65 (48%)

> 사유: (1) 진행률을 `vibe/unit-results/` 및 `vibe/progress.md`의 “완료 증거가 있는 U/RU/CP” 기준으로 정합화했고, (2) 신규 체크포인트 3개 추가로 분모가 증가했습니다.

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **신규 유닛 계획서**: 3개 생성(CP-MVP-04, CP-MVP-05, CP-MVP-06) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-006: 통합 구간(M3)에서 체크포인트 부족으로 기술 부채/회귀 누적 - 대응: 중간 CP 추가 + debt-log 기록 + 리플레이 기반 회귀 확인

### 주의사항

- CP-MVP-03(10분 데모 루프)은 기존 ID를 유지합니다. 신규 CP-MVP-04~06은 **목표일/Depends 기준으로 실행 순서를 정렬**하여 운영하세요(번호가 실행 순서를 의미하지 않을 수 있음).
- `vibe/debt-log.md`에 “미해결”로 남아있는 항목(미추정)이 있으므로, CP 수행 시 반드시 부채 로그를 갱신하세요.

---

## 2026-01-18 - roadmap-update/cancel-ux-skeleton-note

### 변경 요약

취소 UX(Cancel 버튼)가 `frontend/src/turn/turnRunner.ts`의 `cancel()` 수준 **기본 골격만 존재**하고, Abort 정책(Abort 시 `onComplete` 미호출)으로 인해 취소 시 UI 복구가 미정인 점을 문서에 명시하여, 체크포인트(CP-MVP-02) 검증 범위와 RU-003-S1 정책 SSOT를 정합화했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: 진행 현황에 취소 UX 스텁 현황/SSOT(RU-003-S1) 메모 추가
- ✏️ `vibe/unit-plans/CP-MVP-02.md`: 취소 UX(스텁) out-of-scope 메모 및 참조(RU-003-S1) 추가
- ✏️ `vibe/refactors/RU-003-S1.md`: `turnRunner.cancel()` 골격 반영 및 Abort 정책 설명 보강

### 백로그 변경

**수정**:

- 없음(유닛 추가/삭제 없이 현황 메모 동기화)

### 의존성 변경

- 없음

### 진행률 변화

- **MVP**: 변경 없음
- **MMP**: 변경 없음
- **전체**: 변경 없음

### 품질 검증 결과

- **품질 기준 문서**: U-028[Mvp]
- **신규 유닛 계획서**: 0개
- **수정된 유닛 계획서**: 1개(CP-MVP-02) - 섹션 누락 없음, 상세도 유지/향상 ✅
- **수정된 리팩토링 노트**: 1개(RU-003-S1) - 현 구현 상태 보강 ✅
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음

### 주의사항

- Cancel UX는 “Abort 호출”만으로 끝나면 UI가 ‘멈춘 것처럼’ 보일 수 있습니다. (Abort 시 `onComplete` 미호출) 실제 UX 완성 전까지는 “기본 골격”으로만 취급하고, 정책(Option A/B)은 `RU-003-S1`을 SSOT로 삼아 확정하세요.

---

## 2026-01-14 - roadmap-update/i18n-json-locales

### 변경 요약

한/영 및 추후 언어 확장을 위해, 프론트 i18n 리소스를 **JSON 언어 파일 구조(ko-KR/en-US)** 로 운영하는 계획(U-039)을 로드맵에 추가하고, PRD/관련 유닛(U-015/RU-003)의 언어 정합을 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 3.3 “UI/System i18n 리소스 파일 구조(JSON)” 정책 추가
- ✏️ `vibe/roadmap.md`: U-039 추가, MVP/전체 진행률 및 M2 카운트 재계산
- 🆕 `vibe/unit-plans/U-039[Mvp].md`: i18n JSON 언어 파일 구조 도입 계획서 생성
- ✏️ `vibe/unit-plans/U-015[Mvp].md`: SaveGame `language` 복원 시 UI i18n 적용/의존성(U-039) 정합화
- ✏️ `vibe/unit-plans/RU-003[Mvp].md`: i18n 키/리소스 구조 참조를 U-039로 연결

### 백로그 변경

**추가**:

- U-039[Mvp]: i18n 언어 리소스 JSON 구조 도입(ko-KR/en-US, 확장 가능) - UI/시스템 문구의 키 기반 SSOT 확립 및 언어 확장 기반

**수정**:

- U-015[Mvp]: SaveGame(local) + Reset + Demo Profiles(3종) - `language` 복원 시 UI i18n까지 적용하도록 계획 보강
- RU-003[Mvp]: 리팩토링 - UI 상태 슬라이스/경계 정리 - i18n 구조 참조(U-039) 명시

### 의존성 변경

- U-015[Mvp]: Depends 변경 (이전: U-014,U-013 → 이후: U-014,U-013,U-039)
- U-039[Mvp]: Depends=U-004 (고정 HUD/헤더 구조 기반)

### 진행률 변화

- **MVP**: 41% (20/48) → 40% (20/49)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 32% (20/61) → 32% (20/62)

> 사유: 신규 유닛 1개(U-039) 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-030[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-039) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 2개(U-015, RU-003) - 섹션 누락 없음, 상세도 유지/향상 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음

### 주의사항

- U-039는 “UI i18n 리소스(JSON) 구조 + 키 기반 정리” 유닛이며, 사용자 노출 “언어 토글”은 **백엔드 언어 파이프라인(U-036)** 과 함께 enable 하여 UI/내러티브 혼합을 방지하세요.

---

## 2026-01-12 - roadmap-update/u037-remove-readable

### 변경 요약

Readable 모드가 “분위기/식별성” 균형에 도움이 되지 않는다는 피드백을 반영하여, Readable 토글을 제거하고 **중요도(critical/ambient) 기반 가독성 레이어링**으로 방향을 전환했습니다. 이에 맞춰 PRD/로드맵/U-037 계획서를 동기화하고, 진행 중인 U-038 계획서의 검증 문구도 최신 정책으로 정리했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: Readable 모드 제거, 중요도(critical/ambient) 기반 가독성/CRT 효과 정책으로 전환, 에셋 QA 문구 정합화
- ✏️ `vibe/roadmap.md`: R-004 대응 및 U-037 설명 업데이트
- ✏️ `vibe/unit-plans/U-037[Mvp].md`: Readable 완화 프로파일 → “Readable 제거 + 중요 영역 보호” 계획으로 재정의
- ✏️ `vibe/unit-plans/U-038[Mvp].md`: “Readable 모드에서 검증” 문구를 “기본 CRT 톤(효과 포함)” 기준으로 정합화
- ✏️ `vibe/architecture.md`: UI 설정/가독성 정책 설명을 PRD/로드맵과 정합화

### 백로그 변경

**수정**:

- U-037[Mvp]: CRT 지글거림 보강(Readable 완화 프로파일) → CRT/가독성 레이어링(Readable 모드 제거, 중요 영역 보호) - 모드 토글 대신 정보 계층 기반으로 분위기/식별성 동시 개선

### 의존성 변경

- 없음

### 진행률 변화

- **MVP**: 39% (19/48) → 39% (19/48)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 31% (19/61) → 31% (19/61)

### 품질 검증 결과

- **품질 기준 문서**: U-030[Mvp]
- **신규 유닛 계획서**: 0개
- **수정된 유닛 계획서**: 2개(U-037, U-038) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 유지 및 상세도 향상 ✅
- **수정된 문서**: PRD/로드맵/아키텍처 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**수정**:

- R-004: “Readable 모드 기반 완화” → “중요도(critical/ambient) 기반 가독성 레이어링”으로 대응 전환

### 주의사항

- 기존 `vibe/unit-results/` 및 일부 `vibe/unit-runbooks/`에는 역사적 이유로 Readable 토글(READ 버튼) 시나리오/문구가 남아 있을 수 있습니다. U-037 구현 완료 시점에 런북/문구를 최신 정책으로 정리하세요.

---

## 2026-01-11 - roadmap-update/crt-flicker-icon-v2

### 변경 요약

가독성(Readable) 튜닝으로 CRT 지글거림이 “완전 OFF”처럼 느껴지는 문제를 방지하기 위해, CRT 효과를 **완화 프로파일로 재정의**하는 유닛(U-037)과, Signal/Shard/Risk 등 **핵심 UI 아이콘 12종을 v2로 재생성**하는 유닛(U-038)을 로드맵에 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: Readable 모드/CRT 효과 보강 원칙 추가, 핵심 아이콘 12종(SSOT) 목록 명시
- ✏️ `vibe/roadmap.md`: U-037/U-038 추가, M2 카운트 조정(19→21) 및 상태/진행률 보정, 진행률/예상 완료 재계산, 에셋 유닛 Depends 누락(U-034) 정합화, "현재 작업" 표기 보정
- 🆕 `vibe/unit-plans/U-037[Mvp].md`: CRT 지글거림 보강(Readable 완화 프로파일) 계획서
- 🆕 `vibe/unit-plans/U-038[Mvp].md`: 핵심 UI 아이콘 12종 재생성(v2) 계획서
- ✏️ `vibe/unit-plans/U-033[Mvp].md`: 아이콘 v2(U-038) 산출물도 manifest/QA로 추적하도록 연동 힌트 추가

### 백로그 변경

**추가**:

- U-037[Mvp]: CRT 지글거림 보강(Readable 완화 프로파일) - 가독성 개선과 CRT 정체성 손실의 균형 보정
- U-038[Mvp]: 핵심 UI 아이콘 12종 재생성(v2) - 퀄리티/용량/사이즈(배율)/식별성 기준 고정

**수정**:

- U-029[Mvp]: Depends 누락 정합화 (이전: U-030,U-028,U-008 → 이후: U-030,U-028,U-008,U-034)
- U-031[Mvp]: Depends 누락 정합화 (이전: U-030,U-004 → 이후: U-030,U-004,U-034)
- U-032[Mvp]: Depends 누락 정합화 (이전: U-030,U-004 → 이후: U-030,U-004,U-034)

### 의존성 변경

- U-037[Mvp]: Depends=U-004,U-028
- U-038[Mvp]: Depends=U-033,U-034,U-030,U-028

### 진행률 변화

- **MVP**: 35% (16/46) → 33% (16/48)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 27% (16/59) → 26% (16/61)

> 사유: 신규 유닛 2개 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-029[Mvp]
- **신규 유닛 계획서**: 2개 생성(U-037, U-038) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 1개(U-033) - 섹션 누락 없음, 연동 힌트 추가 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**수정**:

- R-004: “가독성 vs CRT 정체성” 균형 붕괴 리스크를 명시하고, CRT 강도 프로파일 대응을 추가

### 주의사항

- Readable 모드의 의미는 “효과 완전 제거”가 아니라 “강도 완화”가 기본입니다(접근성/OS reduced motion에서는 완전 비활성화 가능).

---

## 2026-01-11 - roadmap-update/rembg-runtime-prompt-files

### 변경 요약

실시간 게임 진행 중 오브젝트 이미지 생성 시 **rembg 배경 제거 통합**(U-035)과, 스토리/이미지 프롬프트를 **ko/en 별도 md 파일로 분리 + 핫리로드**(U-036) 계획을 로드맵에 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/tech-stack.md`: rembg를 Dev/런타임 도구로 추가, 기술 선택 매트릭스에 "오브젝트 이미지 배경 제거" 항목 추가
- ✏️ `vibe/prd.md`: 6.3에 "오브젝트 이미지 배경 제거(rembg)" 추가, 3.2에 프롬프트 관리 원칙/핫리로드 명시
- ✏️ `vibe/roadmap.md`: U-035/U-036 추가, M2 카운트 조정(17→19), 멀티모달 책임 Unit 확장, 진행률 재계산
- 🆕 `vibe/unit-plans/U-035[Mvp].md`: 실시간 이미지 생성 시 rembg 배경 제거 통합 계획서
- 🆕 `vibe/unit-plans/U-036[Mvp].md`: 스토리/이미지 프롬프트 파일 분리(ko/en) + 핫리로드 계획서
- ✏️ `vibe/unit-plans/U-017[Mvp].md`: "다음 작업에 전달할 것"에 U-036 연동 힌트 추가
- ✏️ `vibe/unit-plans/U-019[Mvp].md`: "다음 작업에 전달할 것"에 U-035/U-036 연동 힌트 추가

### 백로그 변경

**추가**:

- U-035[Mvp]: 실시간 이미지 생성 시 rembg 배경 제거 통합 - 투명 합성이 필요한 오브젝트/아이템 이미지 지원
- U-036[Mvp]: 스토리/이미지 프롬프트 파일 분리(ko/en) + 핫리로드 - 프롬프트 편집/튜닝/버전 관리 용이성 확보

**수정**:

- U-017[Mvp]: U-036 연동 힌트 추가 (프롬프트 로딩 기반)
- U-019[Mvp]: U-035/U-036 연동 힌트 추가 (이미지 파이프라인 확장 기반)

### 의존성 변경

- U-035[Mvp]: Depends=U-019,U-020 (이미지 생성/렌더 이후 배경 제거)
- U-036[Mvp]: Depends=U-017,U-019 (텍스트/이미지 프롬프트 사용처 이후 통합 로더)

### 진행률 변화

- **MVP**: 32% (14/44) → 30% (14/46)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 25% (14/57) → 24% (14/59)

> 사유: 신규 유닛 2개 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-030[Mvp]
- **신규 유닛 계획서**: 2개 생성(U-035, U-036) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 2개(U-017, U-019) - 섹션 누락 없음, "다음 작업에 전달할 것" 연동 힌트 추가 ✅
- **수정된 문서**: PRD/tech-stack/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**해소(부분)**:

- rembg 사용이 개발용 에셋에만 제한되던 것을 런타임으로 확장하여, 오브젝트 투명 합성 요구를 충족

### 주의사항

- rembg는 첫 실행 시 모델 다운로드(100~200MB)가 발생합니다. 배포 환경에서는 사전 다운로드(`rembg d <model>`)를 권장합니다.
- 프롬프트 핫리로드는 개발 모드에서만 활성화하고, 운영에서는 시작 시 로드/캐싱을 기본으로 합니다.

---

## 2026-01-10 - roadmap-update/nanobanana-rembg-white-background

### 변경 요약

`rembg` 배경 제거를 더 **편리하고 안정적으로** 수행할 수 있도록, 배경 제거가 필요한 에셋은 **생성 단계에서 배경을 순백(#FFFFFF) 단색**으로 만들도록(그라데이션/텍스처/그림자 금지) 유닛 계획서와 SSOT 문서에 강하게 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 9.7에 “배경 단순화(순백 단색) 규칙” 추가
- ✏️ `frontend/public/ui/README.md`: 워크플로우/프롬프트 예시/체크리스트에 “순백 단색 배경” 규칙 추가
- ✏️ `vibe/unit-plans/U-029[Mvp].md`: 완료 기준/아트 디렉션/구현 흐름/주의사항에 “순백 단색 배경” 강제 추가
- ✏️ `vibe/unit-plans/U-030[Mvp].md`: 최소 런북 절차에 “순백 단색 배경 생성” 추가
- ✏️ `vibe/unit-plans/U-031[Mvp].md`: (조건부) 오버레이/스티커 변형 시 “순백 단색 배경” 강제 추가
- ✏️ `vibe/unit-plans/U-032[Mvp].md`: 크롬 에셋 생성/배경 제거 전제에 “순백 단색 배경” 강제 추가
- ✏️ `vibe/unit-plans/U-033[Mvp].md`: QA 체크리스트에 “순백 단색 배경(조건부)” 항목 추가
- ✏️ `vibe/unit-plans/U-034[Mvp].md`: 템플릿 헤더/완료 기준에 “순백 단색 배경(조건부)” 규칙 추가

### 백로그 변경

**수정**:

- U-029/U-031/U-032/U-033/U-034: 배경 제거(rembg) 전제 시 “순백 단색 배경 생성” 규칙 추가

### 의존성 변경

- 없음

### 진행률 변화

- **MVP**: 32% (14/44) → 32% (14/44)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 25% (14/57) → 25% (14/57)

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **수정된 유닛 계획서**: 6개(U-029, U-030, U-031, U-032, U-033, U-034) - 섹션 누락 없음, 상세도 유지/향상 ✅

### 주의사항

- “순백 단색 배경”은 **최종 결과 배경색**이 아니라, 배경 제거(rembg)를 위한 **원본 생성 단계 규칙**입니다(최종은 투명 PNG).
- 순백 배경에는 **그라데이션/텍스처/그림자**를 넣지 마세요(경계가 섞이면 제거 품질이 급락합니다).

---

## 2026-01-10 - roadmap-update/nanobanana-rembg-background-removal

### 변경 요약

`nanobanana mcp`로 생성한 UI 에셋 중 **투명 배경이 필요한 경우**, 결과에 배경이 남아 있으면 `rembg`로 배경 제거하도록 유닛 계획서/SSOT 문서를 동기화했습니다.  
(참조: `vibe/ref/rembg-guide.md`)

### 영향받은 문서

- ✏️ `vibe/prd.md`: 9.7 “UI 이미지 에셋 파이프라인(nanobanana mcp, Dev-only)”에 rembg 배경 제거(조건부) 규칙 추가
- ✏️ `vibe/roadmap.md`: 리스크 R-005 대응에 (필요 시) rembg 배경 제거 추가
- ✏️ `frontend/public/ui/README.md`: 에셋 워크플로우/체크리스트에 rembg 단계 추가(SSOT)
- ✏️ `vibe/unit-plans/U-029[Mvp].md`: 완료 기준/구현 흐름/주의사항에 rembg 배경 제거 절차 강제
- ✏️ `vibe/unit-plans/U-031[Mvp].md`: (조건부) 투명 오버레이/스티커형 산출물 필요 시 rembg 절차 추가
- ✏️ `vibe/unit-plans/U-032[Mvp].md`: (조건부) chrome 투명 PNG 필요 시 rembg 절차 추가
- ✏️ `vibe/unit-plans/U-033[Mvp].md`: QA 체크리스트에 투명도/배경 제거(rembg) 항목 추가
- ✏️ `vibe/unit-plans/U-034[Mvp].md`: 템플릿 사용 절차에 (필요 시) rembg 후처리 단계 추가
- ✏️ `vibe/unit-plans/U-030[Mvp].md`: 에셋 런북 절차에 (필요 시) rembg 단계 추가(최소 변경)

### 백로그 변경

**수정**:

- U-029[Mvp]: nanobanana mcp 에셋 패스(UI 아이콘/프레임/placeholder) - 투명 배경 필요 시 rembg 배경 제거 절차 강제
- U-031[Mvp]: nanobanana mcp 상태 Placeholder Pack - (조건부) rembg 절차 추가
- U-032[Mvp]: nanobanana mcp UI Chrome Pack - (조건부) rembg 절차 추가
- U-033[Mvp]: nanobanana mcp 에셋 매니페스트 + QA - QA에 rembg(투명도) 항목 추가
- U-034[Mvp]: nanobanana mcp 에셋 요청 스키마 + 템플릿 - 요청→생성→(필요 시 rembg)→저장→manifest→QA 절차 명시

### 의존성 변경

- 없음

### 진행률 변화

- **MVP**: 32% (14/44) → 32% (14/44)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 25% (14/57) → 25% (14/57)

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **수정된 유닛 계획서**: 6개(U-029, U-030, U-031, U-032, U-033, U-034) - 섹션 누락 없음, 상세도 유지/향상 ✅

### 리스크 변경

**수정**:

- R-005: 에셋 품질/난립 리스크 대응에 (필요 시) rembg 배경 제거를 추가

### 주의사항

- `rembg` 모델 선택/옵션은 `vibe/ref/rembg-guide.md`를 준수합니다(특히 애니/일러스트 계열은 `isnet-anime` 권장).
- Windows 환경에서는 한글 경로를 피하고(영문 경로), 첫 실행 시 모델 다운로드가 발생할 수 있습니다.

---

## 2026-01-10 - roadmap-update/nanobanana-mcp-expansion

### 변경 요약

`nanobanana mcp`를 개발용 이미지 에셋 제작 도구의 **공식 용어(SSOT)** 로 고정하고,
에셋 제작/관리 계획을 “단일 유닛”에서 **SSOT/placeholder/chrome/매니페스트/템플릿**까지 전방위로 확장했습니다.  
또한 `.gemini/rules/red-line.md`를 추가해 **보안/용어/dev-only** 레드라인을 명문화했습니다.

### 영향받은 문서

- 🆕 `.gemini/rules/red-line.md`: `nanobanana mcp` 용어 SSOT, dev-only 사용, 비밀정보/프롬프트 노출 금지 규칙 추가
- ✏️ `vibe/prd.md`: 9.7 “UI 이미지 에셋 파이프라인(nanobanana mcp, Dev-only)” 섹션 추가 및 요구사항 명문화
- ✏️ `vibe/roadmap.md`: U-030~U-034 추가, U-029 Depends 갱신, 진행률/마일스톤/리스크(R-005) 동기화
- ✏️ `vibe/commands.md`: 업데이트 항목의 표기를 `nanobanana mcp`로 통일
- ✏️ `vibe/ref/standard-guide.md`: Creative Autopilot 문맥에서 `nanobanana mcp` 용어 사용으로 정합화
- ✏️ `vibe/unit-plans/U-029[Mvp].md`: Depends=U-030,U-028,U-008로 갱신 및 템플릿/매니페스트 연동 힌트 추가
- 🆕 `vibe/unit-plans/U-030[Mvp].md`: 에셋 SSOT(폴더/네이밍/예산/폴백/라이선스)
- 🆕 `vibe/unit-plans/U-031[Mvp].md`: 상태 placeholder pack(Scene/오프라인/에러/차단)
- 🆕 `vibe/unit-plans/U-032[Mvp].md`: UI chrome pack(패널/카드 프레임/코너)
- 🆕 `vibe/unit-plans/U-033[Mvp].md`: 에셋 매니페스트 + QA 체크리스트
- 🆕 `vibe/unit-plans/U-034[Mvp].md`: 에셋 요청 스키마 + 프롬프트 템플릿(재현성)

### 백로그 변경

**추가**:

- U-030[Mvp]: nanobanana mcp 에셋 SSOT(폴더/네이밍/사이즈/폴백/라이선스) - 에셋 규칙 단일화/난립 방지
- U-031[Mvp]: nanobanana mcp 상태 Placeholder Pack - 실패/지연을 UX로 흡수
- U-032[Mvp]: nanobanana mcp UI Chrome Pack - “게임 HUD” 인상 강화(과잉 적용 금지)
- U-033[Mvp]: nanobanana mcp 에셋 매니페스트 + QA - 사용처/예산/가독성 관리
- U-034[Mvp]: nanobanana mcp 에셋 요청 스키마 + 템플릿 - 일관성/재현성 확보

**수정**:

- U-029[Mvp]: Depends 변경 (이전: U-028,U-008 → 이후: U-030,U-028,U-008) - SSOT 선행 강제

### 진행률 변화

- **MVP**: 31% (12/39) → 27% (12/44)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 23% (12/52) → 21% (12/57)

> 사유: 신규 유닛 5개 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **신규 유닛 계획서**: 5개 생성(U-030~U-034) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵/기존 유닛(U-029) - 섹션 누락 없음, 용어 SSOT 정합화 ✅

### 리스크 변경

**신규**:

- R-005: 에셋 난립/용량 비대화/스타일 불일치 - 영향: Medium - 대응: SSOT + 매니페스트/QA + 예산 상한

### 주의사항

- `nanobanana mcp`는 개발용 에셋 제작 도구로만 사용하며, 런타임 의존/비밀정보 커밋은 레드라인 위반입니다.

---

## 2026-01-10 - roadmap-update/ui-readability-nanobanana-assets

### 변경 요약

데모 UI의 “작은 글씨” 가독성 이슈를 해결하기 위한 MVP 유닛(U-028)과, nanobanana mcp를 활용해 필요한 UI 이미지 에셋을 제작/반영하는 MVP 유닛(U-029)을 백로그에 추가했습니다.  
또한 진행률 산정을 `vibe/unit-results/` 기반으로 고정하여 로드맵 대시보드/마일스톤/현재 작업 표시를 현실 값으로 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-028/U-029 추가, M2 카운트 조정, 가독성 리스크(R-004) 추가, 진행률/현재 작업 갱신
- ✏️ `vibe/prd.md`: 9.4 접근성/입력에 UI 스케일/Readable 모드 요구 추가, 9.6에 nanobanana mcp UI 에셋 활용 계획 명시
- 🆕 `vibe/unit-plans/U-028[Mvp].md`: UI 가독성 패스 계획서 생성
- 🆕 `vibe/unit-plans/U-029[Mvp].md`: nanobanana mcp UI 에셋 패스 계획서 생성

### 백로그 변경

**추가**:

- U-028[Mvp]: UI 가독성 패스(폰트 스케일/효과 토글/대비) - 작은 글씨로 인한 데모 체감 저하 방지
- U-029[Mvp]: nanobanana mcp 에셋 패스(UI 아이콘/프레임/placeholder) - 게임 UI 인상 강화(폴백 포함)

### 의존성 변경

- U-029[Mvp]: Depends=U-028,U-008 (Readable/스케일 및 Agent Console 연동 기반 위에서 에셋 반영)

### 진행률 변화

- **MVP**: 57% (21/37) → 31% (12/39)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 42% (21/50) → 23% (12/52)

> 사유: 로드맵의 진행률 표기가 `unit-results`(완료 증거)와 불일치하여, 완료 유닛을 `vibe/unit-results/`에 존재하는 U/RU/CP로 고정해 재계산했습니다. 또한 신규 유닛 2개 추가로 분모가 증가했습니다.

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **신규 유닛 계획서**: 2개 생성(U-028, U-029) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-004: 작은 글씨/과한 CRT 효과로 가독성 저하 - 영향: Medium - 대응: UI 스케일/Readable 모드 + 최소 글자 크기 가이드

### 주의사항

- U-029는 “에셋 제작/반영” 유닛이므로, 실제 이미지 파일 생성/커밋은 해당 유닛 수행 시점에 진행합니다(현재는 계획/규칙만 반영).

---

## 2026-01-04 - roadmap-update/http-streaming

### 변경 요약

기존 “SSE(EventSource) 기반 스트리밍” 전제를 제거하고, **HTTP Streaming (Fetch + POST) + NDJSON 이벤트 스트림**을 기본 스택으로 문서/유닛 계획서를 일괄 동기화했습니다.  
또한 `pnpm kill`이 `node.exe` 전체를 종료하는 문제를 해결하기 위한 MVP 유닛(U-027)을 백로그에 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 8.1/8.3/8.4의 스트리밍 스택을 HTTP Streaming으로 전환하고, NDJSON 이벤트 프로토콜(초안) 추가
- ✏️ `vibe/tech-stack.md`: Streaming/Reatime 항목을 HTTP Streaming으로 전환, 기술 선택 매트릭스/비교 섹션 동기화
- ✏️ `vibe/roadmap.md`: 진행률 재계산, U-027 추가, U-007/U-008 표기 변경, SSE 용어 정리
- ✏️ `vibe/architecture.md`: 백엔드 스트리밍 책임 표기 동기화
- ✏️ `.cursor/rules/20-backend-orchestrator.mdc`: 오케스트레이터 스트리밍 기본을 HTTP Streaming(Fetch+POST)로 전환
- ✏️ `vibe/unit-plans/*.md`: SSE 전제 제거 및 HTTP Streaming/NDJSON 기준으로 계획 동기화 (아래 목록 참조)

### 백로그 변경

**추가**:

- U-027[Mvp]: 개발 스크립트 - pnpm kill 포트 제한(8001~8020) - 다른 프로젝트 Node 프로세스 종료 방지

**수정**:

- U-007[Mvp]: `모의 Orchestrator + /api/turn SSE` → `모의 Orchestrator + /api/turn HTTP Streaming(POST)` - POST 입력(큰 TurnInput) 전제와 정합화
- U-008[Mvp]: `프론트 SSE 클라이언트` → `프론트 HTTP Streaming 클라이언트` - fetch+ReadableStream 기반 소비로 명확화
- RU-002[Mvp]: 이벤트/타입 통일 범위를 “SSE”에서 “NDJSON 스트림 이벤트”로 재정의
- U-024[Mvp]: `Action Queue SSE` → `Action Queue Streaming` - Autopilot 스트리밍도 동일 전제 유지
- CP-MVP-01 / CP-MMP-01: “SSE 스트리밍” 문구를 HTTP Streaming으로 교체(검증 기준 동일)

### 의존성 변경

- U-027[Mvp]: Depends=RU-001[Mvp] (포트 정책/kill:port SSOT 정리 이후 진행)

### 진행률 변화

- **MVP**: 33% → 19%
- **MMP**: 0% → 0%
- **전체**: 24% → 14%

> 사유: 완료 목록(unit-results 기준)과 진행률 표기가 불일치하여 **완료 유닛 7개 기준으로 재계산**했으며, 신규 유닛(U-027) 추가로 분모가 증가했습니다.

### 품질 검증 결과

- **품질 기준 문서**: U-006[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-027) - 필수 섹션/완료 기준/의존성/리스크 포함 ✅
- **수정된 유닛 계획서**: 다수 - 섹션 누락 없이 “SSE → HTTP Streaming” 전제만 치환(상세도 유지/향상) ✅

### 리스크 변경

**신규**:

- R-004: 스트림 프로토콜(NDJSON) 파서/호환성 불안정 - 영향: Medium - 대응: RU-002에서 이벤트 타입/에러 처리/폴백 계약을 단일화

**해소(부분)**:

- R-???(암묵): EventSource(GET) 제약으로 TurnInput(큰 JSON) 전송이 어려운 설계 리스크 → HTTP Streaming(POST)로 구조적 해소

### 주의사항

- 과거 작성된 `unit-results/`, `unit-runbooks/` 일부에는 “SSE” 용어가 남아 있을 수 있습니다(역사적 기록). 이후 구현/런북 갱신 시점에 최신 스택 기준으로 정리하는 것을 권장합니다.

---

