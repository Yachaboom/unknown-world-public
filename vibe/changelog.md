# 로드맵 변경 이력

## 2026-02-08 - roadmap-update/mmp-submission-sprint

### 변경 요약

**MMP 마일스톤 전면 재편**: Devpost Gemini 3 Hackathon 마감(2026-02-09 5PM PST)에 맞춰 M5를 **"해커톤 제출 준비(Submission Sprint)"**로 재편하고, 제출 요건 기반 4개 유닛 + 1개 체크포인트를 추가했다. 기존 U-100(Dockerfile) + U-101(Cloud Run)은 **U-120으로 흡수·간소화**(skip 처리). M6는 "품질 강화/후속(Post-Submission)"으로 기존 MMP 유닛을 이관했다.

### 영향받은 문서

- ✏️ vibe/roadmap.md: MMP 마일스톤 재편(M5→제출준비, M6→후속), 진행률 재계산, 제출 요건 매핑 테이블 추가, 리스크 R-025/R-026 추가, 스탠드업 갱신
- 🆕 vibe/unit-plans/U-119[Mmp].md: Frontend Layout 전체 다듬기 (WIG 기반 폴리시)
- 🆕 vibe/unit-plans/U-120[Mmp].md: 제출용 배포 + 공개 데모 URL (U-100+U-101 흡수)
- 🆕 vibe/unit-plans/U-121[Mmp].md: 제출 문서 패키지 (README + 아키텍처 + Write-up)
- 🆕 vibe/unit-plans/U-122[Mmp].md: 데모 영상 제작 (3분, 영어 자막)
- 🆕 vibe/unit-plans/CP-SUB-01.md: 해커톤 제출 완료 체크포인트

### 백로그 변경

**추가**:

- U-119[Mmp]: Frontend Layout 전체 다듬기 (WIG 기반 폴리시) - Innovation/Wow Factor 30% 대응, 첫인상 극대화
- U-120[Mmp]: 제출용 배포 + 공개 데모 URL - Devpost 필수(Public Project Link), U-100+U-101 흡수·간소화
- U-121[Mmp]: 제출 문서 패키지 (README + 아키텍처 + Write-up) - Devpost 필수(영문 Write-up, 아키텍처 심사 가점)
- U-122[Mmp]: 데모 영상 제작 (3분, 영어 자막) - Devpost 필수(데모 영상, YouTube 공개)
- CP-SUB-01: 해커톤 제출 완료 체크포인트 - 모든 제출 요건 최종 점검

**수정**:

- U-102[Mmp]: 의존성 `U-100` → `U-120` (U-100이 U-120에 흡수)
- U-107[Mmp]: 설명 보강 "접근성/단축키/모바일 UX (심층, U-119 후속)" → U-119가 1차 패스, U-107이 심층 2차 패스
- CP-MMP-01: 의존성 `U-101,RU-010` → `U-120,RU-010` (U-101이 U-120에 흡수)

**삭제/Skip**:

- U-100[Mmp]: Dockerfile/로컬 실행 - **skip (U-120에 흡수)** - 제출 마감에 맞춰 배포와 통합
- U-101[Mmp]: Cloud Run 배포 + env/secret - **skip (U-120에 흡수)** - 제출 마감에 맞춰 배포와 통합

### 마일스톤 재편

- **M5**: "배포/스토리지/관측 강화" → **"⚡해커톤 제출 준비 (Submission Sprint)"** (U-119, U-120, U-121, U-122, CP-SUB-01)
- **M6**: "장기 세션/회귀 자동화/보안 하드닝" → **"품질 강화/후속 (Post-Submission)"** (기존 M5+M6의 나머지 유닛 통합)

### 의존성 변경

- U-102: Depends 변경 (이전: U-100 → 이후: U-120)
- CP-MMP-01: Depends 변경 (이전: U-101,RU-010 → 이후: U-120,RU-010)
- U-121: 신규 Depends U-120 (공개 데모 URL 필요)
- U-122: 신규 Depends U-119,U-120 (다듬어진 UI + 배포 환경 필요)
- CP-SUB-01: 신규 Depends U-119,U-120,U-121,U-122

### 진행률 변화

- **MVP**: 115/124 (92.7%) → 115/124 (92.7%) (변경 없음)
- **MMP**: 0/18 (0%) → 0/21 (0%) (U-100/U-101 skip -2, 신규 +5 = net +3)
- **전체**: 115/142 (81.0%) → 115/145 (79.3%) (신규 유닛 추가로 인한 감소)

### 품질 검증 결과

- **품질 기준 문서**: U-116[Mvp] (SaveGame 제거)
- **신규 유닛 계획서**: 4개(U-119~U-122) + 1개 체크포인트(CP-SUB-01) 생성
- **품질 체크**: 모든 필수 섹션(메타데이터/목표/파일/흐름/의존성/주의사항/질문/참고) 포함 ✅
- **완료 기준**: 각 유닛 3개 이상 ✅
- **구현 단계**: 각 유닛 4~5단계 ✅
- **Devpost 요건 매핑**: 제출 요건 8개 항목 모두 유닛에 매핑 ✅

### 리스크 변경

**신규**:

- R-025: 배포 환경 다운 시 심사 불가 - 영향: High - 대응: U-120 min-instances=1 + 제출 기간 모니터링
- R-026: 영문 모드 UI/내러티브 품질 부족 - 영향: Med - 대응: U-099 i18n 수정 + U-119 WIG 폴리시

### 주의사항

- **마감 긴급**: Devpost 마감이 2026-02-09 5PM PST. M5(제출 준비) 유닛은 **최우선 실행** 필요.
- **제출 크리티컬 패스**: MVP 잔여(U-099 등) → U-119(폴리시) + U-120(배포) 병렬 → U-121(문서) → U-122(영상) → CP-SUB-01(제출)
- **영문 지원 필수**: Devpost 요건 "The Application must, at a minimum, support English language use." → U-099(i18n 수정)가 제출 전 완료되어야 함.
- U-100/U-101은 U-120에 흡수되었으므로, 기존 U-100/U-101 계획서는 참조용으로만 유지.
- CP-MMP-01의 의존성이 U-120으로 변경되었으므로, M6 시작 시 U-120 완료가 전제됨.

---

## 2026-02-08 - roadmap-update/mvp-ux-simplify-u114-u118

### 변경 요약

MVP UX 정리/단순화를 위한 유닛 5개 추가 및 관련 문서 동기화. **Agent Console 대기열 상시 노출**(U-114), **핫스팟 컴팩트 원형 디자인**(U-115), **SaveGame 완전 제거**(U-116), **인벤토리 드래그 영역 확장**(U-117), **온보딩 팝업 제거**(U-118). 기존 유닛 U-098 의존성 수정, U-113[Mmp] 의존성 재정의.

### 영향받은 문서

- ✏️ vibe/prd.md: 6.2(핫스팟 수량/형태 제한 추가), 6.6(세이브/로드 MVP 제거), 6.7(온보딩 팝업 제거 + 드래그 영역 확장), 6.8(Agent Console 배지 접기/대기열 상시 노출)
- ✏️ vibe/roadmap.md: 진행률 재계산(MVP 114/128=89.1%), 백로그 5개 추가, 핵심 기능 완료 기준 보강, 스탠드업 갱신
- 🆕 vibe/unit-plans/U-114[Mvp].md: Agent Console 검증배지 접기 + 대기열 상시 노출
- 🆕 vibe/unit-plans/U-115[Mvp].md: 핫스팟 컴팩트 원형 디자인 + 1~3개 제한/우선순위/겹침 방지
- 🆕 vibe/unit-plans/U-116[Mvp].md: SaveGame/진행상황 저장 시스템 완전 제거
- 🆕 vibe/unit-plans/U-117[Mvp].md: 인벤토리 드래그 영역 Row 전체 확장 + 드래그 이미지 아이콘만
- 🆕 vibe/unit-plans/U-118[Mvp].md: 스캐너 온보딩 팝업 제거
- ✏️ vibe/unit-plans/U-098[Mvp].md: 의존성 U-015→U-116, SaveGame 관련 내용 제거/간소화
- ✏️ vibe/unit-plans/U-113[Mmp].md: 의존성 U-015,U-041→U-116,CP-MMP-01, SaveGame 제거 후 재설계 전제 반영

### 백로그 변경

**추가**:

- U-114[Mvp]: Agent Console 검증배지 접기 + 대기열(Queue) 상시 노출 - 대기열이 에이전트 동작 가시화에 더 효과적
- U-115[Mvp]: 핫스팟 컴팩트 원형 디자인 + 1~3개 제한/우선순위/겹침 방지 - 핫스팟 UX 품질 완성(핫스팟 관련 최종 유닛)
- U-116[Mvp]: SaveGame/진행상황 저장 시스템 완전 제거 - 상태 불일치 원천 차단
- U-117[Mvp]: 인벤토리 드래그 영역 Row 전체 확장 + 드래그 이미지 아이콘만 - DnD 조작 편의성 향상
- U-118[Mvp]: 스캐너 온보딩 팝업 제거 - 게임 플로우 방해 제거, hover 힌트 유지

**수정**:

- U-098[Mvp]: 의존성 `U-015,U-090` → `U-116,U-090`, SaveGame 관련 내용 이관(U-116)으로 범위 축소(초기 핫스팟/데모 텍스트 제거 + store 리셋 보장)
- U-113[Mmp]: 의존성 `U-015,U-041` → `U-116,CP-MMP-01`, SaveGame 제거 후 MMP에서 처음부터 재설계 전제

### 의존성 변경

- U-098: Depends 변경 (이전: U-015,U-090 → 이후: U-116,U-090)
- U-113[Mmp]: Depends 변경 (이전: U-015,U-041 → 이후: U-116,CP-MMP-01)
- U-115: 핫스팟 관련 모든 유닛 선행 → Depends: U-090,U-087,U-098

### 진행률 변화

- **MVP**: 114/123 (92.7%) → 114/128 (89.1%) (새 작업 5개 추가로 인한 감소)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 114/141 (80.9%) → 114/146 (78.1%)

### 품질 검증 결과

- **품질 기준 문서**: U-088[Mvp] (인벤토리 Row 전환)
- **신규 유닛 계획서**: 5개 생성(U-114~U-118) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 2개(U-098, U-113) - SaveGame 제거 전제 반영, 상세도 유지 ✅

### 리스크 변경

**해소/완화**:

- R-016: "새로고침 시 게임 진행 상태 손실" - SaveGame 완전 제거(U-116)로 **원천 차단** (새로고침=항상 프로필 선택, 의도적 설계)
- R-023: "세이브 잔재로 상태 불일치" - SaveGame 제거로 **원천 차단**

**신규**:

- R-024: 데모 중 실수로 새로고침하면 진행이 완전히 날아감 - 영향: Medium - 대응: 데모 시나리오에 "새로고침 주의" 안내 + MMP에서 영속성 재설계(U-113)

### 주의사항

- U-116(SaveGame 제거)은 광범위한 코드 변경을 수반하므로, TypeScript 컴파일러로 미참조/에러를 체계적으로 추적해야 합니다.
- U-115(핫스팟 컴팩트 디자인)은 핫스팟 관련 모든 유닛(U-058, U-076, U-089, U-090, U-087, U-098) 완료 후 마지막에 진행해야 합니다.
- U-098의 SaveGame 관련 내용은 U-116으로 이관되었으므로, U-098 작업 시 U-116이 선행 완료되어야 합니다.

---

## 2026-02-08 - roadmap-update/hotfix-u097-u098-u099

### 변경 요약

⚡ **핫픽스 + MVP 유닛 3건 신규 추가**. SceneCanvas 렌더 중 Zustand setState 호출로 프로필 시작 후 첫 요청이 진행 불가한 치명적 버그(U-097), 새로고침 시 완전 리셋 미동작 및 프로필 시작 초기 핫스팟/데모 텍스트 잔재(U-098), 거래 장부의 i18n 혼합 출력 및 하단 여백 과다(U-099)를 해소합니다.

### 영향받은 문서

- 🆕 `vibe/unit-plans/U-097[Mvp].md`: SceneCanvas 렌더 중 setState 호출 분리 핫픽스 유닛 계획서
- 🆕 `vibe/unit-plans/U-098[Mvp].md`: 새로고침 완전 리셋 + 프로필 시작 초기 핫스팟/데모 텍스트 제거 유닛 계획서
- 🆕 `vibe/unit-plans/U-099[Mvp].md`: 거래 장부 i18n 혼합 출력 수정 + 하단 여백 과다 해소 유닛 계획서
- ✏️ `vibe/roadmap.md`: 진행률 업데이트, 백로그 3건 추가, 현재 포커스/블로커 변경, 리스크 R-022/R-023 추가, 책임 Unit 업데이트, 추가 메모 반영
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- **U-097[Mvp]**: ⚡핫픽스 - SceneCanvas 렌더 중 Zustand setState 호출 분리 (첫 요청 차단 해소) | Depends=U-085 | 🚧
- **U-098[Mvp]**: 새로고침 시 완전 리셋 + 프로필 시작 초기 핫스팟/데모 텍스트 제거 | Depends=U-015,U-090 | ⏸️
- **U-099[Mvp]**: 거래 장부(Resource Log) i18n 혼합 출력 수정 + 하단 여백 과다 해소 | Depends=U-042,U-044 | ⏸️

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-097: Depends=U-085 (SceneCanvas 크기 SSOT)
- U-098: Depends=U-015 (데모 프로필), U-090 (핫스팟 정밀분석 전용 정책)
- U-099: Depends=U-042 (Economy HUD), U-044 (i18n)

### 진행률 변화

- **MVP**: 113/119 (95.0%) → 113/122 (92.6%) (유닛 3건 추가로 비율 감소)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 113/137 (82.5%) → 113/140 (80.7%) (유닛 3건 추가로 비율 감소)

### 리스크 변경

- 🆕 R-022: SceneCanvas 렌더 중 Zustand setState 호출로 프로필 시작 후 첫 요청 진행 불가 | Critical | 100% → U-097로 해소
- 🆕 R-023: 새로고침/리셋 시 세션 상태 잔재(핫스팟/ledger)로 상태 불일치 | Medium | 40% → U-098/U-099로 해소

### 품질 검증 결과

- **품질 기준 문서**: U-089[Mvp]
- **신규 유닛 계획서**: 3개(U-097, U-098, U-099) — 각각 완료 기준/구현 흐름/영향 파일/주의사항 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 — 진행률/백로그/리스크/책임Unit/추가메모 일관 업데이트 ✅

---

## 2026-02-08 - roadmap-update/u086-intent-clarification

### 변경 요약

U-086의 작업 의도를 **명확히** 수정했습니다. 기존 설명은 "타이핑 효과와 이미지 생성 지연 **동기화**"로, 텍스트와 이미지를 동시에 맞춰 출력하는 것으로 오해될 수 있었습니다. 실제 의도는 **텍스트 생성 완료 후 이미지 생성(10~15초)을 기다리지 않고 텍스트를 먼저 느린 타이핑으로 출력**하여 지연을 자연스럽게 흡수하는 것입니다.

### 영향받은 문서

- ✏️ `vibe/unit-plans/U-086[Mvp].md`: 제목/작업 목표/배경/완료 기준/구현 흐름/주의사항/페어링 질문 전면 수정 — "동기화"에서 "텍스트 우선 출력(text-first delivery)"으로 의도 명확화
- ✏️ `vibe/roadmap.md`: U-086 백로그 항목 설명/진행 중 표기/일일 스탠드업/R-019 리스크 대응 문구 업데이트
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- 없음

**수정**:

- U-086[Mvp]: 제목 변경 (이전: "턴 진행 피드백 보강 - 타이핑 효과와 이미지 생성 지연 동기화" → 이후: "턴 진행 피드백 보강 - **텍스트 우선 타이핑 출력(이미지 생성 중 지연 흡수)**")
  - 작업 목표: "텍스트와 이미지 동기화" → "텍스트 생성 완료 즉시 출력, 이미지는 나중에 반영"
  - 배경: "멈춘 느낌 완화" → "현재 모두 완료 후 출력되는 구조를 text-first로 전환"
  - 완료 기준: "이미지 pending 동안 느린 타이핑" → "이미지 완료와 무관하게 즉시 타이핑 시작 + 이미지 pending이면 느린 속도"
  - 구현 흐름: 1단계를 "텍스트 우선 출력 흐름 연결"로 재구성, turnRunner에서 이미지 완료 대기 없이 NarrativeFeed 트리거
  - 페어링 질문: Q2 추가(텍스트 출력 트리거 시점: onFinal vs isStreaming=false)

**삭제/Skip**:

- 없음

### 의존성 변경

- 없음 (U-086의 Depends=U-066,U-071 유지)

### 진행률 변화

- **MVP**: 112/119 (94.1%) → 112/119 (94.1%) (변경 없음)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 112/137 (81.8%) → 112/137 (81.8%) (변경 없음)

### 품질 검증 결과

- **품질 기준 문서**: U-066[Mvp]
- **신규 유닛 계획서**: 0개
- **수정된 유닛 계획서**: 1개(U-086) — 전면 재작성, 기존 대비 상세도 향상(완료 기준 6개→6개 유지, 구현 흐름 3→4단계로 확장, 페어링 질문 1→2개로 확장) ✅
- **수정된 문서**: 로드맵 — 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음

**해소(부분)**:

- R-019 대응 문구를 "진행 피드백 보강" → "텍스트 우선 출력으로 피드백 보강"으로 의도 명확화

### 주의사항

- **핵심 변경**: U-086의 목표는 "텍스트와 이미지를 동기화"하는 것이 **아니라**, 텍스트를 **먼저** 사용자에게 전달하고 이미지는 나중에 반영하는 것입니다.
- 현재 구조: 텍스트 + 이미지 모두 생성 완료 → 모두 출력
- 변경 후 구조: 텍스트 생성 완료 → 즉시 느린 타이핑 출력(10~15초) → 이미지 도착 시 Scene Canvas에 late-binding 반영
- 구현 시 `turnRunner.ts`에서 텍스트 상태 갱신 시점을 이미지 생성 완료 이전으로 앞당기는 것이 핵심입니다.

---

## 2026-02-07 - roadmap-update/redundancy-analysis-dependency-cleanup

### 변경 요약

선행 완료 유닛 대비 후행 대기 유닛의 **중복/불필요/수정 필요성을 정밀 판독**했습니다. U-081(Quest/Rule 확장 시 Inventory 보호)을 U-077(인벤토리 스크롤)에 흡수하여 **skip 처리**하고, U-109[Mmp](Agentic Vision 자동 실행)의 의존성에 U-076(MVP 정밀분석 완료)을 추가하여 **범위 축소 및 재사용을 명시**했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-081 skip 처리, U-077 설명 보강, U-109 의존성 수정, 진행률 재계산(MVP 80.0%→80.7%), M2 카운트 조정(23→22)
- ✏️ `vibe/unit-plans/U-077[Mvp].md`: U-081 범위 흡수 - 완료 기준에 "사이드바 패널 영역 분배(min-height/max-height)" 추가, 영향받는 파일에 QuestPanel/RuleBoard/Sidebar 추가, 구현 흐름에 "패널 영역 분배" 단계 추가
- ✏️ `vibe/unit-plans/U-109[Mmp].md`: 의존성에 U-076 추가, "MVP 선행(U-076) 완료 반영" 배경 보강, 1단계를 "기존 서비스 확장(U-076 재사용)"으로 변경, U-090 정책 충돌 메모 추가
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- 없음

**수정**:

- U-077[Mvp]: 범위 확장 - U-081의 "사이드바 패널 영역 분배(Inventory min-height + Quest/Rule max-height + 내부 스크롤)" 흡수
- U-109[Mmp]: 의존성 추가 (이전: U-019,U-020,RU-005 → 이후: U-019,U-020,RU-005,**U-076**) + 범위 축소(기존 agentic_vision.py 재사용→자동 실행 확장에 집중)

**삭제/Skip**:

- U-081[Mvp]: Quest/Rule 확장 시 Inventory 영역 침범 수정 - **Skip** - 대체: U-077[Mvp]에 흡수. 사유: U-077이 "인벤토리 패널 내부 스크롤"을 구현하면서 사이드바 전체 패널 영역 분배(Inventory min-height 보장 + Quest/Rule max-height + 내부 스크롤)를 함께 처리하면 U-081의 범위가 완전히 충족됨. 두 유닛이 동일 파일(InventoryPanel.tsx, style.css, Sidebar.tsx)을 수정하고 "패널 콘텐츠 단위 스크롤" 원칙(PRD 9.3)을 공유하므로 분리 유지 불필요.

### 의존성 변경

- U-109[Mmp]: Depends 변경 (이전: U-019,U-020,RU-005 → 이후: U-019,U-020,RU-005,U-076)
- U-081[Mvp]: Skip 처리로 의존성 무효화 (이전에 U-081을 Depends로 가진 유닛 없음 - 영향 없음)

### 진행률 변화

- **MVP**: 96/120 (80.0%) → 96/119 (80.7%) (U-081 skip으로 분모 1 감소)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 96/138 (69.6%) → 96/137 (70.1%) (U-081 skip으로 분모 1 감소)

### 품질 검증 결과

- **품질 기준 문서**: U-076[Mvp]
- **신규 유닛 계획서**: 0개
- **수정된 유닛 계획서**: 2개(U-077, U-109) - 기존 섹션 유지, 범위 확장/의존성 보강으로 상세도 향상 ✅
- **Skip 유닛**: 1개(U-081) - 대체 경로(U-077) 명시 ✅

### 리스크 변경

**신규**:

- 없음

**해소(부분)**:

- U-077 범위 확장으로 "사이드바 패널 영역 분배" 문제가 단일 유닛에서 해결 가능해짐 (이전: 2유닛 순차 실행 필요)

### 정밀 판독 상세 분석

**분석 방법**: 96개 완료 유닛의 산출물/범위를 24개 대기 MVP 유닛 + 18개 MMP 유닛의 의존성/구현 범위와 교차 대조하여 중복/불필요/수정 필요성을 판별.

**Skip 판정 근거 (U-081)**:
1. U-077과 U-081이 동일 파일(InventoryPanel.tsx, style.css)을 수정
2. U-081이 U-077에 의존(Depends=U-049,**U-077**)하므로 U-077이 선행 필수
3. U-077의 "패널 내부 스크롤" 구현 시 사이드바 전체 패널 영역 분배가 자연스럽게 포함됨
4. U-081을 Depends로 가진 유닛이 없어 skip해도 의존성 체인에 영향 없음

**수정 판정 근거 (U-109)**:
1. U-076(정밀분석) 완료로 `agentic_vision.py` 서비스/프롬프트/핫스팟 로직이 이미 존재
2. U-109의 원래 범위(서비스 신규 생성)가 "기존 서비스 재사용+자동 실행 확장"으로 축소 가능
3. U-090(핫스팟 정밀분석 전용 제한)과의 정책 충돌을 MMP 구현 시점에서 해결해야 함

**추가 분석 결과 (Skip 미해당, 유지 확인)**:
- U-085/U-084(이미지 크기): 겹치는 파일이 있으나 API vs UI 범위가 다르므로 분리 유지 적절
- U-086/U-087(피드백/잠금): 밀접하게 연관되나 범위가 다르므로 분리 유지 적절
- U-088(인벤토리 Row): U-077에 의존하며 별도 범위(레이아웃 전환)이므로 유지
- Autopilot 체인(U-023→U-024→U-025→U-026→RU-007→CP-MVP-03): PRD에서 필수 요구. CP-MVP-03의 최장 미구현 체인이므로 진행 순서 주의 필요

### 주의사항

- **U-077 구현 시**: U-081의 CSS 예시(Inventory min-height: 120px, Quest/Rule max-height: 200px)를 참고하되, 실제 값은 뷰포트 및 콘텐츠에 맞게 튜닝
- **U-109 구현 시**: U-076에서 구현된 `agentic_vision.py`의 인터페이스를 그대로 재사용하고, "자동 실행" 트리거만 추가. U-090 정책("핫스팟은 정밀분석 전용")을 MMP 시점에서 완화 필요
- **즉시 착수 가능 유닛**: U-089, U-090, U-093, U-094, U-096, U-078, U-082, U-083, U-085, U-086, U-087, U-077, U-091, U-023, U-025 (의존성 모두 완료)

---

## 2026-02-07 - roadmap-update/post-u076-hotfixes-pipeline-stability

### 변경 요약

U-076(정밀분석) 구현 후 발견된 UX 이슈 핫픽스 2건(분석 중 로딩 구분, 핫스팟 생성 정책)과 MVP 파이프라인 안정성/게임플레이 개선 6건을 계획했습니다. 런타임 rembg 파이프라인 제거, 초기 아이템 프리셋 아이콘, ItemIconGenerator/ImageUnderstanding 안정성 강화, Scanner 아이템 랜덤 개수, 아이템 소비 메커니즘을 포함합니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-089~U-096 백로그 추가, 진행률 재계산(MVP 76.7%→75.0%), 핵심 기능 책임 Unit 확장, R-020/R-021 리스크 추가, 일일 스탠드업 갱신
- ✏️ `vibe/prd.md`: (1) 6.2에 "핫스팟은 정밀분석으로만 생성" 정책 추가(U-090) (2) 6.3에 "런타임 rembg 제거" 정책 추가(U-091) (3) 6.7 Scanner에 "1~3개 랜덤 생성" 정책 추가(U-095) (4) 6.7 Inventory에 "아이템 소비" 정책 추가(U-096)
- 🆕 `vibe/unit-plans/U-089[Mvp].md`: 정밀분석 로딩 UX 분리 - 기존 이미지 유지 + "분석 중..." 오버레이
- 🆕 `vibe/unit-plans/U-090[Mvp].md`: 핫스팟 생성 정책 - 정밀분석 전용으로 제한
- 🆕 `vibe/unit-plans/U-091[Mvp].md`: 런타임 rembg 파이프라인 일괄 제거
- 🆕 `vibe/unit-plans/U-092[Mvp].md`: 초기 아이템 프리셋 아이콘(nanobanana-mcp 활용)
- 🆕 `vibe/unit-plans/U-093[Mvp].md`: ItemIconGenerator 타임아웃/재시도 안정화
- 🆕 `vibe/unit-plans/U-094[Mvp].md`: ImageUnderstanding 파싱 예외 자동 재시도
- 🆕 `vibe/unit-plans/U-095[Mvp].md`: Scanner 아이템 생성 개수 랜덤화(1~3개, 가중치)
- 🆕 `vibe/unit-plans/U-096[Mvp].md`: 아이템 사용 시 소비(인벤토리 삭제) 메커니즘
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-089[Mvp]: 정밀분석 로딩 UX 분리 - 기존 Scene 이미지 유지 + "분석 중..." 반투명 오버레이(스캔라인 애니메이션)
- U-090[Mvp]: 핫스팟 생성 정책 강화 - 정밀분석 턴에서만 핫스팟 생성, 비분석 턴에서 GM 임의 핫스팟 필터링
- U-091[Mvp]: 런타임 rembg 파이프라인 일괄 제거 - 서버 시작 시간 단축, 의존성 단순화(Dev-only 유지)
- U-092[Mvp]: 초기 아이템 프리셋 아이콘 - nanobanana-mcp로 64x64 픽셀아트 투명 PNG 사전 생성, demoProfiles에 icon_url 추가
- U-093[Mvp]: ItemIconGenerator 타임아웃/재시도 안정화 - API 타임아웃 60초 + 최대 2회 지수 백오프 재시도
- U-094[Mvp]: ImageUnderstanding 파싱 예외 자동 재시도 - JSON/Pydantic 파싱 에러 시 최대 2회 재시도 + 안전 폴백(빈 아이템 + 에러 메시지)
- U-095[Mvp]: Scanner 아이템 생성 개수 랜덤화 - 1~3개(1=60%, 2=30%, 3=10%) 가중 랜덤 + 프롬프트 동적 주입
- U-096[Mvp]: 아이템 사용 시 소비 - GM이 world.delta.removed_items로 소비 판단, 인벤토리에서 삭제 + 페이드아웃 애니메이션

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-089[Mvp]: Depends=U-076,U-071
- U-090[Mvp]: Depends=U-076,U-017
- U-091[Mvp]: Depends=U-045,U-035
- U-092[Mvp]: Depends=U-075,U-030
- U-093[Mvp]: Depends=U-075
- U-094[Mvp]: Depends=U-022
- U-095[Mvp]: Depends=U-022,U-094
- U-096[Mvp]: Depends=U-011,U-012,U-017

### 진행률 변화

- **MVP**: 96/112 (85.7%) → 96/120 (80.0%) (신규 유닛 8개 추가로 분모 증가)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 96/130 (73.8%) → 96/138 (69.6%) (신규 유닛 8개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-076[Mvp]
- **신규 유닛 계획서**: 8개 생성(U-089~U-096) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵/PRD - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-020: rembg 제거 후 투명 배경 아이콘 품질 저하 가능 - 대응: 프롬프트에 "단색 배경" 지시 강화 + nanobanana-mcp 사전 생성(U-091, U-092)
- R-021: 아이템 소비 판단을 GM에 위임 시 오판(비소모품 삭제/소모품 미삭제) 가능 - 대응: 프롬프트 지침 강화 + 서버 검증 가드(U-096)

### 주의사항

- **U-089/U-090**은 U-076 구현 후 핫픽스로, 정밀분석 UX/정책의 완성도를 높입니다. U-076이 완료된 상태에서 바로 착수 가능합니다.
- **U-091**은 rembg를 런타임에서 제거하지만 Dev-only 도구로는 유지합니다. `pyproject.toml`에서 dev dependency로 이동 처리합니다.
- **U-092**는 nanobanana-mcp로 아이콘을 사전 생성하므로, 초기 아이템 목록이 확정되어야 합니다(페어링 질문).
- **U-095**의 가중 랜덤(1=60%, 2=30%, 3=10%)은 게임 밸런스에 따라 조정 가능합니다.
- **U-096**에서 GM의 아이템 소비 판단이 부정확할 수 있으므로, 서버 측 검증(존재하지 않는 아이템 삭제 시도 무시)을 필수로 포함합니다.

---

## 2026-02-05 17:30 - roadmap-update/inventory-row-layout

### 변경 요약

인벤토리 UX 개선을 위해 **인벤토리 UI Row 형태 전환(U-088)** 유닛을 추가했습니다. 그리드/타일 형태에서 Row(행) 형태로 변경하여 아이템별 정보(이름, 수량, 설명)를 더 명확하게 보여주고, 스크롤 방향을 세로로 통일하며, DnD 조작의 정확성을 높입니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-088 백로그 추가, 진행률 재계산(MVP 82.9%→82.1%), 핵심 기능 책임 Unit 확장
- 🆕 `vibe/unit-plans/U-088[Mvp].md`: 인벤토리 UI Row 형태 전환 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-088[Mvp]: 인벤토리 UI Row 형태 전환 - 그리드/타일에서 Row로 변경하여 아이템 정보 가독성 및 DnD 조작성 향상

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-088[Mvp]: Depends=U-011,U-077

### 진행률 변화

- **MVP**: 92/111 (82.9%) → 92/112 (82.1%) (신규 유닛 1개 추가로 분모 증가)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 92/129 (71.3%) → 92/130 (70.8%) (신규 유닛 1개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-077[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-088) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음 (기존 R-015 인터랙션 발견성 리스크로 커버됨)

### 주의사항

- **U-088**은 U-077(인벤토리 스크롤)과 함께 작동해야 합니다. Row 형태의 스크롤 컨테이너가 dnd-kit과 호환되는지 확인이 필요합니다.
- Row 높이(40~56px)와 아이콘 크기(32~40px)의 균형을 페어링 질문에서 결정해야 합니다.
- 기존 그리드 UI에서 Row로 전환 시 드래그 핸들 위치(Row 전체 vs 아이콘만)에 대한 결정이 필요합니다.

---

## 2026-02-05 16:20 - roadmap-update/image-layout-feedback-input-lock

### 변경 요약

핫픽스로 **이미지 크기/비율을 현재 UI(Scene Canvas) 레이아웃에 최대한 맞추는 작업(U-085)** 을 추가하고, MVP UX 보강으로 **턴 진행 피드백(타이핑↔이미지 pending 동기화, U-086)** 과 **처리 중 입력 잠금(U-087)** 을 계획했습니다. 또한 U-084(픽셀 스타일/Scene 높이 조정)가 U-085 전제를 갖도록 **Depends를 정합화**했고, PRD/로드맵/계획서 간 SSOT 정합을 반영했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: (1) 6.3 멀티모달에 “UI 레이아웃 기반 aspect_ratio/image_size” 및 “타이핑↔이미지 pending 동기화” 요구 추가 (2) 9.4에 “처리중 입력 잠금” 요구 추가 (3) 8.2 인증 섹션을 **Gemini API 키(서버 관리)** 기준으로 정합
- ✏️ `vibe/roadmap.md`: U-085~U-087 백로그 추가, U-084 Depends 정합, 진행률 재계산(분모 증가), 리스크 R-019 추가, 핵심 기능 책임 Unit 목록 보강
- 🆕 `vibe/unit-plans/U-085[Mvp].md`: ⚡핫픽스 - 이미지 크기/비율을 Scene Canvas 레이아웃에 최대한 맞춤(`image_config` 적용 포함)
- 🆕 `vibe/unit-plans/U-086[Mvp].md`: 턴 진행 피드백 보강 - 타이핑 효과와 이미지 생성 지연 동기화
- 🆕 `vibe/unit-plans/U-087[Mvp].md`: 대기열(턴 처리) 진행 중 모든 사용자 입력 잠금
- ✏️ `vibe/unit-plans/U-084[Mvp].md`: 512x512 등 비현실 프리셋 예시 제거 및 U-085 전제(Depends/참조/페어링 질문)로 정합
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-085[Mvp]: ⚡핫픽스 - 이미지 크기/비율을 Scene Canvas 레이아웃에 최대한 맞춤으로 생성 - 레터박스/여백 최소화 + 데모 체감 개선
- U-086[Mvp]: 턴 진행 피드백 보강 - 타이핑↔이미지 pending 동기화 - “텍스트는 끝났는데 이미지가 늦어 멈춘 느낌” 완화
- U-087[Mvp]: 처리 중 입력 잠금 - 허위 액션 로그/중복 입력/상태 혼선 방지

**수정**:

- U-084[Mvp]: Depends 정합 (이전: U-066,U-049 → 이후: U-066,U-049,**U-085**) + 이미지 사이즈 정책을 `SUPPORTED_IMAGE_SIZES`(SSOT) 기준으로 보강

### 의존성 변경

- U-084[Mvp]: Depends 변경 (이전: U-066,U-049 → 이후: U-066,U-049,U-085)

### 진행률 변화

- **MVP**: 91/108 (84.3%) → 91/111 (82.0%) (신규 유닛 3개 추가로 분모 증가)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 91/126 (72.2%) → 91/129 (70.5%) (신규 유닛 3개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-066[Mvp]
- **신규 유닛 계획서**: 3개 생성(U-085~U-087) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 1개(U-084) - 정보량 감소 없이 SSOT(지원 프리셋/Depends) 정합 ✅

### 리스크 변경

**신규**:

- R-019: 처리 중 입력 허용으로 허위 액션 로그/요청 경합/상태 혼선 발생 - 대응: U-087(입력 잠금) + U-086(진행 피드백)

### 주의사항

- U-085는 “UI 레이아웃에 맞춘 비율/크기”를 목표로 하며, SDK의 `image_config` 적용(특히 `image_size` 포맷 매핑)이 필요합니다. 구현 시 `vibe/ref/image-generate-guide.md`를 SSOT로 삼으세요.
- U-087은 “입력 무시(runTurn early return)”만으로는 UX가 흔들리는 문제(허위 액션 로그 누적)를 해결하기 위해, **오버레이 기반 입력 차단 + 핸들러 가드**를 포함해야 합니다.

---

## 2026-02-05 15:30 - roadmap-update/api-key-only-priority

### 변경 요약

**U-080을 최우선 핫픽스로 배치**하고, **Vertex AI를 완전히 제거하여 API 키 인증 전용**으로 단순화했습니다. U-068/U-069의 의존성을 U-067에서 U-080으로 변경했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-080 최우선 배치(Depends=None, 🚧 진행중), 제약조건 "API 키 인증 기본"으로 변경
- ✏️ `vibe/unit-plans/U-080[Mvp].md`: Vertex AI 완전 제거 → API 키 전용으로 계획서 전면 수정
- ✏️ `vibe/unit-plans/U-068[Mvp].md`: 의존성 U-067 → U-080으로 변경
- ✏️ `vibe/unit-plans/U-069[Mvp].md`: 의존성 U-067 → U-080으로 변경
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**수정**:

- U-080[Mvp]: "Vertex AI → API 키 전환" → "**Vertex AI 제거 → API 키 전용**" + Depends=None + 🚧 진행중
- U-068[Mvp]: Depends 변경 (U-067,U-066 → **U-080,U-066**)
- U-069[Mvp]: Depends 변경 (U-067 → **U-080**)

### 의존성 변경

- U-080[Mvp]: Depends=U-067 → **Depends=None** (최우선 독립 실행)
- U-068[Mvp]: Depends=U-067,U-066 → **Depends=U-080,U-066**
- U-069[Mvp]: Depends=U-067 → **Depends=U-080**

### 품질 검증 결과

- **수정된 유닛 계획서**: 3개(U-080, U-068, U-069) - 의존성/내용 정합 ✅

### 주의사항

- **Vertex AI 코드 완전 제거**: 서비스 계정 인증 분기 로직, `vertexai` import, `VERTEX_*` 환경변수 참조 모두 삭제
- API 키는 [Google AI Studio](https://aistudio.google.com/apikey)에서 발급
- MMP에서 엔터프라이즈 기능이 필요해지면 그때 Vertex AI 재도입 검토

---

## 2026-02-05 - roadmap-update/api-key-auth-ui-image-optimization

### 변경 요약

핫픽스로 **Vertex AI 서비스계정 → API 키 인증 방식 전환**(U-080)을 추가하고, MVP UI 품질 강화를 위해 **레이아웃 이슈 수정 3건**(U-081~U-083)과 **이미지 생성 최적화**(U-084)를 계획했습니다. API 키 인증으로 데모 환경 설정이 간편해지고, UI 레이아웃 안정성과 이미지 생성 속도가 개선됩니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-080~U-084 백로그 추가, 진행률 재계산(MVP 83.3%→79.4%), 핵심 기능 책임 Unit 확장
- 🆕 `vibe/unit-plans/U-080[Mvp].md`: 핫픽스 - Vertex AI → API 키 인증 방식 전환 계획서
- 🆕 `vibe/unit-plans/U-081[Mvp].md`: UI 레이아웃 - Quest/Rule 확장 시 Inventory 영역 침범 수정 계획서
- 🆕 `vibe/unit-plans/U-082[Mvp].md`: UI 레이아웃 - Agent Console 축소 및 재화 현황 영역 확대 계획서
- 🆕 `vibe/unit-plans/U-083[Mvp].md`: UI 레이아웃 - 액션 카드 대안 뱃지 레이아웃 깨짐 수정 계획서
- 🆕 `vibe/unit-plans/U-084[Mvp].md`: 이미지 생성 최적화 - 픽셀 스타일 + 사이즈 축소 + Scene 영역 높이 조정 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-080[Mvp]: 핫픽스 - Vertex AI → API 키 인증 방식 전환 - 데모 환경 설정 간소화
- U-081[Mvp]: UI 레이아웃 - Quest/Rule 확장 시 Inventory 영역 침범 수정 - 패널 영역 보호
- U-082[Mvp]: UI 레이아웃 - Agent Console 축소 및 재화 현황 영역 확대 - 재화 가시성 향상
- U-083[Mvp]: UI 레이아웃 - 액션 카드 대안 뱃지 레이아웃 깨짐 수정 - 카드 UI 안정화
- U-084[Mvp]: 이미지 생성 최적화 - 픽셀 스타일 + 사이즈 축소 + Scene 영역 높이 조정 - 이미지 생성 속도 향상 + 텍스트 가독성 개선

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-080[Mvp]: Depends=U-067
- U-081[Mvp]: Depends=U-049,U-077
- U-082[Mvp]: Depends=U-049
- U-083[Mvp]: Depends=U-009
- U-084[Mvp]: Depends=U-066,U-049

### 진행률 변화

- **MVP**: 85/102 (83.3%) → 85/107 (79.4%) (신규 유닛 5개 추가로 분모 증가)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 85/120 (70.8%) → 85/125 (68.0%) (신규 유닛 5개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-077[Mvp]
- **신규 유닛 계획서**: 5개 생성(U-080~U-084) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음 (기존 리스크로 커버됨)

### 주의사항

- **U-080**은 API 키 인증 방식으로 전환하는 핫픽스입니다. 기존 서비스계정 방식도 옵션으로 유지되어 필요 시 전환 가능합니다.
- **U-081~U-083**은 UI 레이아웃 안정성을 위한 CSS/컴포넌트 수정입니다. flex-shrink/min-height 설정에 주의하세요.
- **U-084**의 픽셀 아트 스타일은 CRT 테마와 조화를 이루며, `image-rendering: pixelated` CSS 속성으로 확대 시에도 선명하게 표시됩니다.
- 이미지 사이즈 축소(512x512)로 핫스팟 좌표(0~1000 정규화)에는 영향이 없습니다.

---

## 2026-02-03 - roadmap-update/gameplay-quality-enhancement

### 변경 요약

MVP 게임플레이 품질 강화를 위해 **인벤토리 스크롤(U-077)**, **명확한 목표 시스템(U-078)**, **재화 부족 시 이미지 생성 허용 + 재화 획득 경로 다양화(U-079)** 유닛 3개를 추가했습니다. 아이템이 많아질 때 패널이 깨지지 않고, 플레이어가 항상 목표를 알 수 있으며, 재화가 부족해도 게임이 막히지 않도록 합니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-077~U-079 백로그 추가, 진행률 재계산(MVP 82.8%→80.4%), 리스크 R-017/R-018 추가, 핵심 기능 책임 Unit 확장
- 🆕 `vibe/unit-plans/U-077[Mvp].md`: 인벤토리 패널 스크롤 및 아이템 관리 UX 개선 계획서
- 🆕 `vibe/unit-plans/U-078[Mvp].md`: 게임 목표 시스템 강화 - 명확한 목표 제시 및 진행 가이드 계획서
- 🆕 `vibe/unit-plans/U-079[Mvp].md`: 재화 부족 시 이미지 생성 허용 + 재화 획득 경로 다양화 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-077[Mvp]: 인벤토리 패널 스크롤 및 아이템 관리 UX 개선 - 아이템이 많아져도 레이아웃 유지
- U-078[Mvp]: 게임 목표 시스템 강화 - 명확한 주 목표/서브 목표 제시, 보상 지급 루프 완성
- U-079[Mvp]: 재화 부족 시 이미지 생성 허용 + 재화 획득 경로 다양화 - 경제 루프 완성, 게임 진행 차단 방지

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-077[Mvp]: Depends=U-011,U-049
- U-078[Mvp]: Depends=U-013,U-015
- U-079[Mvp]: Depends=U-014,U-019,U-078

### 진행률 변화

- **MVP**: 82/99 (82.8%) → 82/102 (80.4%) (신규 유닛 3개 추가로 분모 증가)
- **MMP**: 0/18 (0%) → 0/18 (0%) (변경 없음)
- **전체**: 82/117 (70.1%) → 82/120 (68.3%) (신규 유닛 3개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-078[Mvp]
- **신규 유닛 계획서**: 3개 생성(U-077, U-078, U-079) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-017: 재화 부족으로 게임 진행이 막히거나, 이미지 생성이 완전 차단되어 데모 체감 급락 - 대응: U-079
- R-018: 플레이어가 목표를 모르고 방황하여 "뭘 해야 하는지 모르겠다" 피드백 발생 - 대응: U-078

### 주의사항

- **U-079**는 RULE-005("잔액 음수 금지")를 **"잔액 부족 시 대안 제공"**으로 완화합니다. 단, ledger 기록은 정확히 유지해야 합니다.
- **U-078**에서 GM이 목표를 무시할 수 있으므로 프롬프트 지침을 강화하고, 목표 달성 검증 로직을 추가해야 합니다.
- **U-077**에서 dnd-kit과 스크롤 컨테이너의 호환성 테스트가 필요합니다.

---

## 2026-02-03 - roadmap-update/precise-analysis-and-session-persistence

### 변경 요약

MVP에서 **"정밀분석" 액션을 통한 Agentic Vision 분석**(U-076)과 MMP에서 **새로고침 시 세션 상태 복원**(U-113) 유닛을 추가했습니다. U-076은 기존 Scene 이미지에 대해 사용자가 명시적으로 "정밀분석"을 요청할 때만 Agentic Vision을 실행하여 정합성 있는 핫스팟을 추가합니다(MMP U-109의 선행 버전). U-113은 브라우저 새로고침 시에도 Scene 이미지, ActionDeck 등 UI 상태가 유지되도록 세션 영속성을 구현합니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-076(MVP), U-113(MMP) 백로그 추가, 진행률 재계산(MVP 83.7%→82.8%, MMP 0%→0%, 전체 71.3%→70.1%), 리스크 R-016 추가, 멀티모달 핵심 기능 책임 Unit 확장
- 🆕 `vibe/unit-plans/U-076[Mvp].md`: "정밀분석" 액션으로 기존 Scene 이미지 Agentic Vision 분석 및 핫스팟 추가 계획서
- 🆕 `vibe/unit-plans/U-113[Mmp].md`: 세션 상태 영속성 - 새로고침 시 Scene/ActionDeck/상태 복원 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-076[Mvp]: "정밀분석" 액션으로 기존 Scene 이미지 Agentic Vision 분석 및 핫스팟 추가 - 사용자 트리거 기반 이미지 분석으로 핫스팟 정합성 개선(MMP U-109 선행)
- U-113[Mmp]: 세션 상태 영속성 - 새로고침 시 Scene/ActionDeck/상태 복원 - 브라우저 새로고침 시 UI 상태 유실 방지

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-076[Mvp]: Depends=U-010,U-019,U-069
- U-113[Mmp]: Depends=U-015,U-041

### 진행률 변화

- **MVP**: 82/98 (83.7%) → 82/99 (82.8%) (신규 유닛 1개 추가로 분모 증가)
- **MMP**: 0/17 (0%) → 0/18 (0%) (신규 유닛 1개 추가로 분모 증가)
- **전체**: 82/115 (71.3%) → 82/117 (70.1%) (신규 유닛 2개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-069[Mvp]
- **신규 유닛 계획서**: 2개 생성(U-076, U-113) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-016: 새로고침/탭 종료 시 게임 진행 상태(Scene 이미지/ActionDeck)가 날아가 데모 중 치명적 손실 - 대응: U-113(MMP) + SaveGame 폴백

### 주의사항

- U-076은 MMP U-109(이미지 생성 시 자동 실행)의 **선행 버전**으로, 사용자가 명시적으로 "정밀분석" 카드를 선택할 때만 실행됩니다. 비용/지연을 사용자 선택에 맡겨 MVP 단순화를 달성합니다.
- U-076에서 이미지 생성은 하지 않고, 기존 이미지에 대한 분석 + 핫스팟 추가만 수행합니다.
- U-113은 SessionStorage/LocalStorage 선택, 복원 범위, 자동 vs 수동 복원 등 페어링 질문이 있으므로 구현 전 결정이 필요합니다.
- U-113 구현 전까지는 중요한 데모 전 수동 저장(SaveGame)을 권장합니다.

---

## 2026-02-03 - roadmap-update/mvp-quality-ux-enhancement

### 변경 요약

MVP 품질 및 UX 강화를 위해 **9개의 신규 유닛(U-067~U-075)**을 추가했습니다. Vertex AI Production 설정 핫픽스, 이미지 연결성 강화(참조 이미지), 텍스트 모델 티어링(FAST/Pro), 액션 로그 출력, Scene 로딩 UI, Scanner 유도 UX, 레이아웃 확장, 인터랙션 안내, 아이템 아이콘 동적 생성 등을 계획했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-067~U-075 백로그 추가, 진행률 재계산(MVP 92.1%→83.7%), 리스크(R-014, R-015) 추가, 핵심 기능 책임 Unit 확장
- 🆕 `vibe/unit-plans/U-067[Mvp].md`: 핫픽스 - Vertex AI Production 설정 수정 계획서
- 🆕 `vibe/unit-plans/U-068[Mvp].md`: 이전 턴 이미지 참조로 이미지 연결성 강화 계획서
- 🆕 `vibe/unit-plans/U-069[Mvp].md`: 텍스트 FAST 모델 + 정밀조사 트리거 Pro 전환 계획서
- 🆕 `vibe/unit-plans/U-070[Mvp].md`: 아이템-핫스팟 사용 시 액션 로그 출력 계획서
- 🆕 `vibe/unit-plans/U-071[Mvp].md`: Scene 처리중 UI 로딩 인디케이터 강화 계획서
- 🆕 `vibe/unit-plans/U-072[Mvp].md`: Scanner 의미론적 사용 유도 UX 계획서
- 🆕 `vibe/unit-plans/U-073[Mvp].md`: 레이아웃 확장 - 좌우 빈공간 활용 계획서
- 🆕 `vibe/unit-plans/U-074[Mvp].md`: 핫스팟/아이템 인터랙션 안내 UX 계획서
- 🆕 `vibe/unit-plans/U-075[Mvp].md`: 인벤토리 아이템 아이콘 동적 생성 및 이름 정합성 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-067[Mvp]: 핫픽스 - Vertex AI Production 설정 수정 - 데모/배포 환경 안정성 확보 (가장 선행)
- U-068[Mvp]: 이전 턴 이미지를 참조이미지로 사용하여 이미지 연결성 강화 - 시각적 일관성/몰입감 개선
- U-069[Mvp]: 텍스트 생성 FAST 모델 + "정밀조사" 트리거 Pro 모델 전환 - 비용 최적화 + 품질 선택권
- U-070[Mvp]: 아이템-핫스팟 사용 시 액션 로그 출력 - 인터랙션 피드백 강화
- U-071[Mvp]: Scene 처리중 UI 로딩 인디케이터 강화 - 처리 상태 가시성 개선
- U-072[Mvp]: Scanner 의미론적 사용 유도 UX - 멀티모달 기능 발견성 강화
- U-073[Mvp]: 레이아웃 확장 - 좌우 빈공간 활용으로 덜 답답한 UI
- U-074[Mvp]: 핫스팟/아이템 인터랙션 안내 UX - 핵심 인터랙션 발견성 강화
- U-075[Mvp]: 인벤토리 아이템 아이콘 동적 생성 및 이름 정합성 - 아이템 시각화/i18n 정합성

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-067[Mvp]: Depends=U-066 (가장 선행)
- U-068[Mvp]: Depends=U-067,U-066
- U-069[Mvp]: Depends=U-067
- U-070[Mvp]: Depends=U-012
- U-071[Mvp]: Depends=U-066
- U-072[Mvp]: Depends=U-022
- U-073[Mvp]: Depends=U-049
- U-074[Mvp]: Depends=U-012,U-010
- U-075[Mvp]: Depends=U-011,U-035

### 진행률 변화

- **MVP**: 82/89 (92.1%) → 82/98 (83.7%) (신규 유닛 9개 추가로 분모 증가)
- **MMP**: 0/17 (0%) → 0/17 (0%) (변경 없음)
- **전체**: 82/106 (77.4%) → 82/115 (71.3%) (신규 유닛 9개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-066[Mvp]
- **신규 유닛 계획서**: 9개 생성(U-067~U-075) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-014: 연속 장면 간 시각적 일관성 부족(동일 캐릭터/오브젝트가 다르게 그려짐)으로 몰입 저하 - 대응: U-068
- R-015: 핵심 인터랙션(핫스팟 클릭/아이템 DnD) 발견성 부족으로 플레이어가 텍스트 입력만 시도 - 대응: U-074, U-072

### 주의사항

- U-067(Vertex AI Production 설정)은 핫픽스로 **가장 선행**으로 진행해야 합니다.
- U-075(아이템 아이콘 동적 생성)는 이미지 생성 비용이 발생하므로 FAST 모델 사용 및 캐싱이 필수입니다.
- U-068(참조 이미지)에서 FAST 모델(`gemini-2.5-flash-image`)은 참조 이미지 수 제한이 있을 수 있습니다.
- 인터랙션 안내 UX(U-074)는 온보딩 가이드를 포함하며, 데모 프로필에서는 스킵 가능하도록 설계해야 합니다.

---

## 2026-02-02 - roadmap-update/image-delay-natural-flow

### 변경 요약

이미지 생성이 오래 걸려도 “멈춤/실패”로 느껴지지 않도록, **진행 연출 + late-binding(늦게 도착한 이미지의 안전한 결합) + 모델 티어링(FAST/QUALITY)** 을 MVP 범위에서 명시했습니다. 이를 위해 신규 MVP 유닛 **U-066**을 추가하고 PRD/Tech-stack/로드맵을 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 6.3(멀티모달) 및 8.5(이미지 모델)에 “지연 흡수 플로우 + `gemini-2.5-flash-image` 선택 가능” 요구 추가
- ✏️ `vibe/tech-stack.md`: 모델 라인업에 `gemini-2.5-flash-image`(저지연 프리뷰/초안, 선택) 추가
- ✏️ `vibe/roadmap.md`: U-066 백로그 추가, 멀티모달 완료 기준/책임 Unit 보강, 리스크 R-013 추가, 진행률 재계산
- 🆕 `vibe/unit-plans/U-066[Mvp].md`: 지연 흡수 플로우(연출/late binding) + 모델 티어링 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-066[Mvp]: 이미지 생성 지연 흡수 플로우(진행 연출/late binding) + 모델 티어링(FAST/QUALITY) - 지연이 길어도 폴백을 최소화하고 “장면이 늦게 도착해도 자연스럽게” 보이도록 UX/정합 가드 설계

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-066[Mvp]: Depends=U-065[Mvp],U-055[Mvp],U-020[Mvp]

### 진행률 변화

- **MVP**: 81/88 (92.0%) → 81/89 (91.0%) (신규 유닛 1개 추가로 분모 증가)
- **MMP**: 0/17 (0%) → 0/17 (0%) (변경 없음)
- **전체**: 81/105 (77.1%) → 81/106 (76.4%) (신규 유닛 1개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-064[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-066) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: PRD/Tech-stack/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-013: 이미지 생성 지연이 길 때 “장면 갱신” 타이밍이 어긋나 몰입이 깨질 수 있음(늦게 도착한 이미지가 새 장면을 덮는 문제 포함) - 대응: U-066

### 주의사항

- U-066은 “폴백 최소화”를 목표로 하지만, **RULE-004의 안전 폴백(텍스트-only)** 은 최후 수단으로 항상 유지해야 합니다.
- `gemini-2.5-flash-image`를 프리뷰/초안에 사용할 경우, 비용/품질/참조 이미지 제한을 고려해 **REF/편집/복잡 장면은 QUALITY 모델로 강제**하는 정책이 필요합니다.

---

## 2026-02-01 - roadmap-update/image-pipeline-integration

### 변경 요약

이미지 생성 서비스와 턴 파이프라인을 연결하여 **실플레이 기능을 완성**하기 위한 MVP 유닛 5개(U-051~U-055)를 추가하고, Panel Corner 이미지 방향 수정을 위한 MMP 유닛 1개(U-112)를 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-051~U-055(MVP), U-112(MMP) 백로그 추가, 멀티모달 핵심 기능 책임 Unit 확장, 진행률 재계산
- 🆕 `vibe/unit-plans/U-051[Mvp].md`: 렌더링 단계-이미지 생성 서비스 브릿지 구축 계획서
- 🆕 `vibe/unit-plans/U-052[Mvp].md`: 조건부 이미지 생성 제어 로직(should_generate 판정) 계획서
- 🆕 `vibe/unit-plans/U-053[Mvp].md`: 비동기 이미지 생성 및 결과 데이터 동기화 계획서
- 🆕 `vibe/unit-plans/U-054[Mvp].md`: 이미지 생성 폴백 및 실패 복구 체계 강화 계획서
- 🆕 `vibe/unit-plans/U-055[Mvp].md`: 이미지 파이프라인 Mock/Real 모드 통합 검증 계획서
- 🆕 `vibe/unit-plans/U-112[Mmp].md`: Panel Corner 이미지 방향 수정 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-051[Mvp]: 렌더링 단계-이미지 생성 서비스 브릿지 구축 - 현재 비어있는 render_stage에서 이미지 생성 서비스를 호출할 수 있도록 의존성 주입
- U-052[Mvp]: 조건부 이미지 생성 제어 로직 - TurnOutput 내 image_job 분석하여 생성 여부/프롬프트/해상도 추출
- U-053[Mvp]: 비동기 이미지 생성 및 결과 데이터 동기화 - 생성된 이미지 URL을 TurnOutput에 반영
- U-054[Mvp]: 이미지 생성 폴백 및 실패 복구 체계 강화 - RULE-004에 따른 안전한 텍스트 전용 모드 전환
- U-055[Mvp]: 이미지 파이프라인 Mock/Real 모드 통합 검증 - 전체 루프 검증 및 런북 작성
- U-112[Mmp]: Panel Corner 이미지 방향 수정 - panel-corner-br.png 식별성 개선

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-051[Mvp]: Depends=U-019[Mvp],RU-005[Mvp]
- U-052[Mvp]: Depends=U-051[Mvp],U-017[Mvp]
- U-053[Mvp]: Depends=U-052[Mvp]
- U-054[Mvp]: Depends=U-053[Mvp],U-018[Mvp]
- U-055[Mvp]: Depends=U-054[Mvp],CP-MVP-05
- U-112[Mmp]: Depends=U-032[Mvp]

### 진행률 변화

- **MVP**: 67/66 (101.5%) → 67/71 (94.4%) (신규 유닛 5개 추가로 분모 증가)
- **MMP**: 0/16 (0%) → 0/17 (0%) (신규 유닛 1개 추가로 분모 증가)
- **전체**: 67/82 (81.7%) → 67/88 (76.1%) (신규 유닛 6개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-019[Mvp]
- **신규 유닛 계획서**: 6개 생성(U-051~U-055, U-112) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음 (기존 R-002 비용/지연 리스크로 커버됨)

### 주의사항

- U-051~U-055는 순차적 의존성이 있으므로 순서대로 진행해야 합니다.
- U-055 Real 모드 검증은 Vertex AI 인증 환경이 필요합니다(.env 설정 확인).
- U-112는 MMP 유닛으로, MVP 완료 후 진행합니다.

---

## 2026-01-31 - roadmap-update/scanner-cost-debug-ttl

### 변경 요약

Scanner 분석 **비용 정책(MVP: Signal 무료)**을 PRD에 명시하고, Real mode 비전 모델 프롬프트 최적화 계획을 기존 유닛(U-021/U-022)에 보강했습니다. 또한 MMP에 **프론트엔드 디버깅 모드 토글 UI(U-110)** 와 **스토리지 TTL/정리 정책 정의(U-111)** 유닛을 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: (1) Scanner 비용 정책(MVP: 무료) 및 프롬프트 최적화 계획 명시(6.7) (2) 디버깅 모드 토글 UI 요구 추가(10.2) (3) 스토리지 TTL/정리 정책 요구 추가(6.6)
- ✏️ `vibe/roadmap.md`: U-110/U-111 백로그 추가, MMP 진행률 재계산(0/14→0/16), CP-MMP-02 의존성 확장
- ✏️ `vibe/unit-plans/U-021[Mvp].md`: MMP 프롬프트 최적화 예정 및 비용 정책 메모 추가
- ✏️ `vibe/unit-plans/U-022[Mvp].md`: 비용 정책(MVP: 무료) 및 MMP 프롬프트 최적화 예정 메모 추가
- 🆕 `vibe/unit-plans/U-110[Mmp].md`: 프론트엔드 디버깅 모드 토글 UI 계획서
- 🆕 `vibe/unit-plans/U-111[Mmp].md`: 스토리지 TTL/정리 정책 정의 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-110[Mmp]: 프론트엔드 디버깅 모드 토글 UI(스트림 로그/상태 diff/스토리지 사용량) - 심사자/개발자용 상세 관측 도구
- U-111[Mmp]: 스토리지 TTL/정리 정책 정의(로컬/GCS Lifecycle) - 디스크 용량 관리 및 민감 데이터 잔류 방지

**수정**:

- U-021[Mvp]: MMP 프롬프트 최적화 예정 메모 추가
- U-022[Mvp]: 비용 정책(MVP: 무료) 및 MMP 프롬프트 최적화 예정 메모 추가
- CP-MMP-02: Depends 확장 (이전: RU-011,U-107 → 이후: RU-011,U-107,U-110,U-111)

**삭제/Skip**:

- 없음

### 의존성 변경

- U-110[Mmp]: Depends=U-106
- U-111[Mmp]: Depends=U-102
- CP-MMP-02: Depends 변경 (이전: RU-011,U-107 → 이후: RU-011,U-107,U-110,U-111)

### 진행률 변화

- **MVP**: 64/66 (96.9%) → 64/66 (96.9%) (변경 없음)
- **MMP**: 0/14 (0%) → 0/16 (0%) (신규 유닛 2개 추가로 분모 증가)
- **전체**: 64/80 (80.0%) → 64/82 (78.0%) (신규 유닛 2개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-106[Mmp]
- **신규 유닛 계획서**: 2개 생성(U-110, U-111) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 2개(U-021, U-022) - 비용 정책/프롬프트 최적화 메모 추가, 상세도 유지/향상 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음(기존 리스크로 커버됨: R-002 비용/지연, R-005 스토리지 관리)

### 주의사항

- Scanner 비용 정책은 MVP에서 무료로 유지하고, MMP에서 비용 부과 여부를 재검토합니다.
- 스토리지 TTL/정리 정책 적용 시 진행 중 세션 이미지가 삭제되지 않도록 보호 로직을 필수로 포함합니다.
- 디버깅 모드에서 프롬프트 원문/CoT/비밀정보는 절대 노출하지 않습니다(RULE-007/008).

---

## 2026-01-28 23:45 - roadmap-update/mvp-env-ui-action-polish

### 변경 요약

MVP 데모 체감을 개선하기 위해 **백엔드 `.env` 자동 로딩(U-047)** 과 **real 모드 스모크 체크포인트(CP-MVP-07)** 를 추가하고, 프론트의 **UI/UX 스크롤/오버레이 폴리시(U-049/U-050)** 및 **mock 내러티브 템플릿 개선(U-048)** 계획을 로드맵/PRD에 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: (1) 로컬 `.env` 자동 로딩 요구 추가(8.2) (2) 레이아웃/스크롤 원칙(9.3) 및 오버레이 덮임 방지(9.5) 요구 보강 (3) Action 입력 에코를 “행동 로그”로 분리(9.0)
- ✏️ `vibe/roadmap.md`: U-047/U-048/U-049/U-050/CP-MVP-07 백로그 추가, 리스크(R-010~012) 추가, MVP/전체 진행률 및 예상 완료일 재계산
- 🆕 `vibe/unit-plans/U-047[Mvp].md`: Backend `.env` 자동 로딩(로컬) + 모드/ENV 가드 계획서
- 🆕 `vibe/unit-plans/CP-MVP-07.md`: 체크포인트 - real 모드 로컬 실행 게이트(.env/Vertex/스트리밍) 계획서
- 🆕 `vibe/unit-plans/U-048[Mvp].md`: MockOrchestrator 액션 echo/내러티브 템플릿 개선 계획서
- 🆕 `vibe/unit-plans/U-049[Mvp].md`: UI/UX 레이아웃/스크롤 설계 개선 계획서
- 🆕 `vibe/unit-plans/U-050[Mvp].md`: UI/UX 오버레이 팔레트/강도 튜닝 + 반응형 폴리시 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-047[Mvp]: Backend `.env` 자동 로딩(로컬) + 모드/ENV 가드(프롬프트/Vertex) - real 모드 실행 재현성/데모 체감 개선
- CP-MVP-07: 체크포인트 - real 모드 로컬 실행 게이트(.env/Vertex/스트리밍) - 인증/환경변수 드리프트로 인한 데모 실패 방지
- U-048[Mvp]: Mock Orchestrator 템플릿 개선(“...라고 말했습니다” 제거, 반복 완화) - mock 모드에서도 자연스러운 게임 로그 유지
- U-049[Mvp]: UI/UX 레이아웃/스크롤 설계 개선(카드 내부 스크롤) - 우측 컬럼 전체 스크롤 UX 개선
- U-050[Mvp]: UI/UX 오버레이 팔레트/강도 튜닝(덮임/쨍함 완화) + 반응형 폴리시 - 오버레이로 인한 콘텐츠 가림/피로도 완화

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-047[Mvp]: Depends=U-003[Mvp],U-016[Mvp]
- CP-MVP-07: Depends=U-047[Mvp],CP-MVP-04
- U-048[Mvp]: Depends=U-007[Mvp]
- U-049[Mvp]: Depends=U-004[Mvp],U-013[Mvp],U-014[Mvp]
- U-050[Mvp]: Depends=U-010[Mvp],U-037[Mvp]

### 진행률 변화

- **MVP**: 54/61 (88%) → 54/66 (81%) (신규 유닛 5개 추가로 분모 증가)
- **MMP**: 0/14 (0%) → 0/14 (0%) (변경 없음)
- **전체**: 54/75 (72%) → 54/80 (67%) (신규 유닛 5개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-046[Mvp]
- **신규 유닛 계획서**: 5개 생성(U-047, CP-MVP-07, U-048, U-049, U-050) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-010: 로컬/데모에서 실모델(real) 모드 환경변수 로딩 누락으로 mock 출력 또는 인증 실패 - 대응: U-047 + CP-MVP-07
- R-011: 오버레이/스크롤 전략으로 “게임 UI” 체감 저하 - 대응: U-049/U-050 + 가이드 기반 점검
- R-012: Action 실행 시 템플릿 문장 반복으로 몰입 저하(mock 모드) - 대응: U-048(+ real 모드 기본 동선)

### 주의사항

- `.env` 및 서비스 계정 키 파일은 레포에 커밋/로그 노출하지 않습니다(`.env.example`만 SSOT).
- UI/UX 폴리시는 “채팅 UI”로 회귀시키지 않고, 고정 HUD/패널 구조는 유지한 채로 스크롤/오버레이만 개선합니다(RULE-002).

---

## 2026-01-28 23:59 - roadmap-update/agentic-vision-grounding

### 변경 요약

Gemini 3 Flash의 **Agentic Vision(Code Execution)** 을 활용해 “생성된 장면 이미지 기반으로 행동/핫스팟을 더 구체적·사실적으로 제시”하는 기능을 MMP 신규 유닛(U-109)으로 계획했고, PRD/로드맵에 해당 요구사항 및 리스크/진행률을 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: Action Deck(6.7) 및 이미지 이해(8.6)에 “Agentic Vision 기반 행동 근거화(생성 이미지)” 요구사항 추가
- ✏️ `vibe/roadmap.md`: U-109[Mmp] 백로그 추가, R-009 리스크 추가, MMP/전체 진행률 및 예상 완료일 재계산(MMP D-7→D-8)
- 🆕 `vibe/unit-plans/U-109[Mmp].md`: Agentic Vision(Flash+Code Execution) 기반 affordances 추출 + Action Deck/Hotspots 정합화 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-109[Mmp]: Agentic Vision - 생성된 장면 이미지 기반 행동/핫스팟 근거화 - 장면과 행동 카드/핫스팟의 정합성 강화(환각 감소)

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-109[Mmp]: Depends=U-019,U-020,RU-005

### 진행률 변화

- **MVP**: 52/61 (85%) → 52/61 (85%) (변경 없음)
- **MMP**: 0/13 (0%) → 0/14 (0%) (신규 유닛 1개 추가로 분모 증가)
- **전체**: 52/74 (70%) → 52/75 (69%) (신규 유닛 1개 추가로 분모 증가)

### 품질 검증 결과

- **품질 기준 문서**: U-046[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-109) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-009: Agentic Vision(코드 실행) 추가 호출로 비용/지연이 커져 UX가 악화되거나, 생성 이미지-행동/핫스팟 정합이 깨질 수 있음 - 대응: Key scene/명시적 트리거 + Economy 게이트/예상비용 + 실패 시 텍스트 폴백

### 주의사항

- Agentic Vision은 추가 호출이므로 “기본 자동 실행”은 비용/지연 리스크가 큽니다. 우선은 **명시적 트리거(예: 정밀 조사 카드)** 또는 Key scene 제한으로 도입하는 것이 안전합니다.
- 입력 이미지 참조(`scene_image_url` 등)를 TurnInput으로 전달할 경우, 서버는 **허용 경로 검증/경로 탈출 방지**를 필수로 포함해야 합니다.

---

## 2026-01-26 23:55 - roadmap-update/prompt-xml-tags

### 변경 요약

분리 프롬프트 포맷을 **md→json으로 전환**하는 계획을 제거하고, 대신 **분리된 프롬프트 `.md` 내부에서 XML 태그 규격(메타/섹션)을 통일**하는 방향으로 로드맵/PRD/가이드 문서를 정합화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 프롬프트 관리 원칙에 “.md 유지 + XML 태그 표준 + 메타 추출” 정책 문구 추가(3.2/10.4)
- ✏️ `vibe/roadmap.md`: U-046 신규 추가, R-008(프롬프트 포맷 드리프트) 리스크 추가, 진행률 재계산
- 🆕 `vibe/unit-plans/U-046[Mvp].md`: 분리 프롬프트 XML 태그 규격 통일 + 로더 파싱 단일화 계획서
- ✏️ `.cursor/rules/30-prompts-i18n.mdc`: 프롬프트 상단 메타/계약 표기를 XML 태그 표준 + 레거시 병행으로 정리
- ✏️ `vibe/unit-runbooks/U-036-prompt-loader-hotreload-runbook.md`: “JSON 형태 프롬프트 반환” 시나리오 제거(계획 변경 반영)
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-046[Mvp]: 분리 프롬프트(.md) XML 태그 규격 통일(메타/섹션) + 로더 파싱 단일화 계획 - 포맷 드리프트 방지 및 메타 추적/튜닝 안정화

**수정**:

- 없음

**삭제/Skip**:

- 없음

### 의존성 변경

- U-046[Mvp]: Depends=U-036[Mvp]

### 진행률 변화

- **MVP**: 49/60 (81%) → 49/61 (80%)
- **MMP**: 0/13 (0%) → 0/13 (0%)
- **전체**: 49/73 (67%) → 49/74 (66%)

> 사유: 신규 유닛 1개(U-046) 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-036[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-046) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵/프롬프트 규칙/런북 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-008: 프롬프트 포맷 드리프트(프론트매터/태그 혼재) - 대응: XML 태그 규격 통일 + 로더 파싱/검증 단일화(U-046)

### 주의사항

- U-046 수행 전까지는 기존 프롬프트 로더/테스트와의 호환을 위해 레거시(`- key: value`) 메타 포맷을 유지하고, XML 태그 표준은 “점진 마이그레이션”으로 적용하세요.
- 분리 프롬프트는 `.md`를 유지하며, JSON 파일로의 포맷 전환은 계획에서 제외합니다.

---

## 2026-01-26 10:30 - roadmap-update/language-mix-rembg-preflight

### 변경 요약

한 화면에 ko/en이 섞여 노출되는 문제(`vibe/ref/en-ko-issue.png`)를 **서버 Hard Gate(언어 콘텐츠 검증+Repair)** 와 **프론트 세션 언어 SSOT(언어 전환=리셋)** 로 분해해 유닛(U-043~U-045) 계획으로 추가하고, rembg 모델의 “첫 실행 다운로드 지연”을 서버 부팅 preflight로 흡수하는 계획을 로드맵/PRD/부채 로그에 반영했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 언어 전환 정책(MVP: 토글=세션 리셋) 명시, rembg 모델 preflight 정책 문구 추가
- ✏️ `vibe/roadmap.md`: U-043~U-045 신규 추가, R-007(언어 혼합) 리스크 추가, CP-MVP-05 의존성 확장, 진행률/예상 완료 재계산
- ✏️ `vibe/debt-log.md`: ko/en 혼합 출력 이슈 등록 및 해결 유닛(U-043/U-044) 연결
- 🆕 `vibe/unit-plans/U-043[Mvp].md`: ko/en 혼합 출력 게이트(언어 검증+Repair) 계획서
- 🆕 `vibe/unit-plans/U-044[Mvp].md`: 세션 언어 SSOT(토글=리셋) + 혼합 출력(상태/시스템) 제거 계획서
- 🆕 `vibe/unit-plans/U-045[Mvp].md`: Backend 시작 시 rembg/모델 사전 점검 + 다운로드(preflight) 계획서
- ✏️ `vibe/unit-plans/CP-MVP-05.md`: 언어/리셋 정책 및 rembg preflight를 완료 기준/의존성에 반영
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-043[Mvp]: ko/en 혼합 출력 게이트(언어 검증+Repair) - “언어 필드 정합”뿐 아니라 “콘텐츠 언어 혼합”까지 Hard Gate로 차단
- U-044[Mvp]: 세션 언어 SSOT(토글=리셋) + 혼합 출력(상태/시스템) 제거 - 언어 전환 시 과거 텍스트 잔재로 인한 혼합을 세션 경계로 제거
- U-045[Mvp]: Backend 시작 시 rembg/모델 사전 점검 + 다운로드(preflight) - 첫 rembg 실행 다운로드/지연을 턴 경로에서 제거

**수정**:

- CP-MVP-05: Depends 확장 (이전: U-035,U-036 → 이후: U-035,U-036,U-043,U-044,U-045)

**삭제/Skip**:

- 없음

### 의존성 변경

- CP-MVP-05: Depends 변경 (이전: U-035,U-036 → 이후: U-035,U-036,U-043,U-044,U-045)

### 진행률 변화

- **MVP**: 48/57 (84%) → 48/60 (80%)
- **MMP**: 0/13 (0%) → 0/13 (0%)
- **전체**: 48/70 (68%) → 48/73 (66%)

> 사유: 신규 유닛 3개(U-043~U-045) 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-039[Mvp]
- **신규 유닛 계획서**: 3개 생성(U-043, U-044, U-045) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 1개(CP-MVP-05) - 섹션 누락 없음, 상세도 유지/향상 ✅
- **수정된 문서**: PRD/로드맵/부채 로그 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-007: ko/en 혼합 출력(내러티브/룰/퀘스트/UI)이 한 화면에 노출 - 대응: 세션 언어 SSOT(토글=리셋) + 언어 게이트/Repair + 폴백/하드코딩 정리

### 주의사항

- MVP에서 언어 전환은 “기존 상태 번역”이 아니라 세션 리셋으로 처리합니다(혼합 출력 방지 우선).
- rembg preflight는 네트워크/권한/경로 이슈로 실패할 수 있으므로, 실패 시 degraded 모드(원본 유지)로 수렴하도록 설계해야 합니다.

---

## 2026-01-24 18:10 - roadmap-update/terminology-savegame-migrations-asset-schema-fix-plan

### 변경 요약

용어(원장/Ledger)와 SaveGame 마이그레이션, 그리고 debt-log의 에셋 스키마 이슈를 “즉시 수정”이 아닌 **실행 가능한 유닛(U-040~U-042) 계획**으로 분해하여 로드맵/PRD/부채 로그에 반영했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: “재화 거래 장부(Resource Log)” 용어 반영, SaveGame 버전 불일치 시 마이그레이션/폴백 정책 문구 추가
- ✏️ `vibe/roadmap.md`: U-040~U-042 신규 추가, 진행률/예상 완료 재계산, 핵심 기능 책임 Unit 연결
- ✏️ `vibe/debt-log.md`: `rembg_model` 스키마 불일치 이슈에 해결 유닛(U-040) 연결
- 🆕 `vibe/unit-plans/U-040[Mvp].md`: 에셋 요청 스키마 정합(rembg_model 이슈) + 테스트/런북 복구 계획서
- 🆕 `vibe/unit-plans/U-041[Mvp].md`: SaveGame 마이그레이션(버전별 변환 로직) 계획서
- 🆕 `vibe/unit-plans/U-042[Mvp].md`: 용어/카피 정리(거래 장부/Resource Log) 계획서
- ✏️ `vibe/changelog.md`: 본 변경 이력 추가

### 백로그 변경

**추가**:

- U-040[Mvp]: 에셋 요청 스키마 정합(rembg_model 이슈) + 테스트/런북 복구 - debt-log에 기록된 검증 실패를 SSOT(스키마) 기준으로 해소
- U-041[Mvp]: SaveGame 마이그레이션: migrateSaveGame에 버전별 변환 로직 구현 - WorldState/SaveGame 스키마 변경 시에도 데모 루프를 끊지 않기 위한 기반
- U-042[Mvp]: 용어/카피 정리: 원장→거래 장부, Ledger→Resource Log 등 게임 친화 용어 통일 - 사용자 이해도/몰입을 해치는 용어 혼선 감소

**수정**:

- 없음(기존 유닛 ID/Phase 유지)

**삭제/Skip**:

- 없음

### 의존성 변경

- U-040[Mvp]: Depends=U-034
- U-041[Mvp]: Depends=RU-004
- U-042[Mvp]: Depends=U-014,U-039

### 진행률 변화

- **MVP**: 35/52 (67%) → 35/55 (64%)
- **MMP**: 0/13 (0%) → 0/13 (0%)
- **전체**: 35/65 (54%) → 35/68 (51%)

> 사유: 신규 유닛 3개(U-040~U-042) 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-015[Mvp]
- **신규 유닛 계획서**: 3개 생성(U-040, U-041, U-042) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: PRD/로드맵/부채 로그 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음(단, SaveGame 스키마 드리프트로 데모 루프가 끊기는 리스크를 U-041에서 완화 예정)

### 주의사항

- U-040은 “스키마/테스트/런북” 간 필드명 정합을 목표로 하며, 실제 테스트 실패 해소는 해당 유닛 수행 시점에 완료됩니다.
- U-041은 `loadSaveGame()`의 “검증→마이그레이션” 순서를 “버전 판별→마이그레이션→검증”으로 재구성해야 하므로, 변경 범위를 과소평가하지 않도록 주의하세요(테스트 필수).

---

## 2026-01-19 - roadmap-update/checkpoint-expansion-tech-debt

### 변경 요약

M3 통합 구간에서 기술 부채/회귀가 누적되는 것을 방지하기 위해 **중간 체크포인트 3개(CP-MVP-04~06)** 를 신규 추가하고, 진행률/예상 완료를 `unit-results/progress` 기준(완료 증거 기반)으로 재계산하여 로드맵 요약을 정합화했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: CP 확장(CP-MVP-04~06) 반영, 리스크(R-006) 추가, 진행률/예상 완료/현재 작업 표기 정합화
- 🆕 `vibe/unit-plans/CP-MVP-04.md`: 실모델 Hard Gate(스키마/경제/복구) 체크포인트 계획서 생성
- 🆕 `vibe/unit-plans/CP-MVP-05.md`: 멀티모달 이미지 게이트(텍스트 우선/폴백/비용) 체크포인트 계획서 생성
- 🆕 `vibe/unit-plans/CP-MVP-06.md`: Scanner 업로드 게이트(안전/좌표/비용) 체크포인트 계획서 생성

### 백로그 변경

**추가**:

- CP-MVP-04: 체크포인트 - 실모델 Hard Gate(스키마/경제/복구) - M3 통합 전 “Hard Gate” 기준선 확보
- CP-MVP-05: 체크포인트 - 멀티모달 이미지 게이트(텍스트 우선/폴백/비용) - 멀티모달 실패/지연/비용 리스크를 조기 차단
- CP-MVP-06: 체크포인트 - Scanner 업로드 게이트(안전/좌표/비용) - 업로드 입력의 보안/좌표/폴백 안정성 확보

**수정**:

- 없음(기존 유닛 ID/내용 축약 없이, 체크포인트만 추가)

### 의존성 변경

- 없음(신규 CP는 기존 유닛에 의존만 추가, 기존 유닛 Depends는 유지)

### 진행률 변화

- **MVP**: 41/49 (84%) → 31/52 (60%)
- **MMP**: 0/13 (0%) → 0/13 (0%)
- **전체**: 41/62 (66%) → 31/65 (48%)

> 사유: (1) 진행률을 `vibe/unit-results/` 및 `vibe/progress.md`의 “완료 증거가 있는 U/RU/CP” 기준으로 정합화했고, (2) 신규 체크포인트 3개 추가로 분모가 증가했습니다.

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **신규 유닛 계획서**: 3개 생성(CP-MVP-04, CP-MVP-05, CP-MVP-06) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 0개
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-006: 통합 구간(M3)에서 체크포인트 부족으로 기술 부채/회귀 누적 - 대응: 중간 CP 추가 + debt-log 기록 + 리플레이 기반 회귀 확인

### 주의사항

- CP-MVP-03(10분 데모 루프)은 기존 ID를 유지합니다. 신규 CP-MVP-04~06은 **목표일/Depends 기준으로 실행 순서를 정렬**하여 운영하세요(번호가 실행 순서를 의미하지 않을 수 있음).
- `vibe/debt-log.md`에 “미해결”로 남아있는 항목(미추정)이 있으므로, CP 수행 시 반드시 부채 로그를 갱신하세요.

---

## 2026-01-18 - roadmap-update/cancel-ux-skeleton-note

### 변경 요약

취소 UX(Cancel 버튼)가 `frontend/src/turn/turnRunner.ts`의 `cancel()` 수준 **기본 골격만 존재**하고, Abort 정책(Abort 시 `onComplete` 미호출)으로 인해 취소 시 UI 복구가 미정인 점을 문서에 명시하여, 체크포인트(CP-MVP-02) 검증 범위와 RU-003-S1 정책 SSOT를 정합화했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: 진행 현황에 취소 UX 스텁 현황/SSOT(RU-003-S1) 메모 추가
- ✏️ `vibe/unit-plans/CP-MVP-02.md`: 취소 UX(스텁) out-of-scope 메모 및 참조(RU-003-S1) 추가
- ✏️ `vibe/refactors/RU-003-S1.md`: `turnRunner.cancel()` 골격 반영 및 Abort 정책 설명 보강

### 백로그 변경

**수정**:

- 없음(유닛 추가/삭제 없이 현황 메모 동기화)

### 의존성 변경

- 없음

### 진행률 변화

- **MVP**: 변경 없음
- **MMP**: 변경 없음
- **전체**: 변경 없음

### 품질 검증 결과

- **품질 기준 문서**: U-028[Mvp]
- **신규 유닛 계획서**: 0개
- **수정된 유닛 계획서**: 1개(CP-MVP-02) - 섹션 누락 없음, 상세도 유지/향상 ✅
- **수정된 리팩토링 노트**: 1개(RU-003-S1) - 현 구현 상태 보강 ✅
- **수정된 문서**: 로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음

### 주의사항

- Cancel UX는 “Abort 호출”만으로 끝나면 UI가 ‘멈춘 것처럼’ 보일 수 있습니다. (Abort 시 `onComplete` 미호출) 실제 UX 완성 전까지는 “기본 골격”으로만 취급하고, 정책(Option A/B)은 `RU-003-S1`을 SSOT로 삼아 확정하세요.

---

## 2026-01-14 - roadmap-update/i18n-json-locales

### 변경 요약

한/영 및 추후 언어 확장을 위해, 프론트 i18n 리소스를 **JSON 언어 파일 구조(ko-KR/en-US)** 로 운영하는 계획(U-039)을 로드맵에 추가하고, PRD/관련 유닛(U-015/RU-003)의 언어 정합을 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 3.3 “UI/System i18n 리소스 파일 구조(JSON)” 정책 추가
- ✏️ `vibe/roadmap.md`: U-039 추가, MVP/전체 진행률 및 M2 카운트 재계산
- 🆕 `vibe/unit-plans/U-039[Mvp].md`: i18n JSON 언어 파일 구조 도입 계획서 생성
- ✏️ `vibe/unit-plans/U-015[Mvp].md`: SaveGame `language` 복원 시 UI i18n 적용/의존성(U-039) 정합화
- ✏️ `vibe/unit-plans/RU-003[Mvp].md`: i18n 키/리소스 구조 참조를 U-039로 연결

### 백로그 변경

**추가**:

- U-039[Mvp]: i18n 언어 리소스 JSON 구조 도입(ko-KR/en-US, 확장 가능) - UI/시스템 문구의 키 기반 SSOT 확립 및 언어 확장 기반

**수정**:

- U-015[Mvp]: SaveGame(local) + Reset + Demo Profiles(3종) - `language` 복원 시 UI i18n까지 적용하도록 계획 보강
- RU-003[Mvp]: 리팩토링 - UI 상태 슬라이스/경계 정리 - i18n 구조 참조(U-039) 명시

### 의존성 변경

- U-015[Mvp]: Depends 변경 (이전: U-014,U-013 → 이후: U-014,U-013,U-039)
- U-039[Mvp]: Depends=U-004 (고정 HUD/헤더 구조 기반)

### 진행률 변화

- **MVP**: 41% (20/48) → 40% (20/49)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 32% (20/61) → 32% (20/62)

> 사유: 신규 유닛 1개(U-039) 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-030[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-039) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 2개(U-015, RU-003) - 섹션 누락 없음, 상세도 유지/향상 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- 없음

### 주의사항

- U-039는 “UI i18n 리소스(JSON) 구조 + 키 기반 정리” 유닛이며, 사용자 노출 “언어 토글”은 **백엔드 언어 파이프라인(U-036)** 과 함께 enable 하여 UI/내러티브 혼합을 방지하세요.

---

## 2026-01-12 - roadmap-update/u037-remove-readable

### 변경 요약

Readable 모드가 “분위기/식별성” 균형에 도움이 되지 않는다는 피드백을 반영하여, Readable 토글을 제거하고 **중요도(critical/ambient) 기반 가독성 레이어링**으로 방향을 전환했습니다. 이에 맞춰 PRD/로드맵/U-037 계획서를 동기화하고, 진행 중인 U-038 계획서의 검증 문구도 최신 정책으로 정리했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: Readable 모드 제거, 중요도(critical/ambient) 기반 가독성/CRT 효과 정책으로 전환, 에셋 QA 문구 정합화
- ✏️ `vibe/roadmap.md`: R-004 대응 및 U-037 설명 업데이트
- ✏️ `vibe/unit-plans/U-037[Mvp].md`: Readable 완화 프로파일 → “Readable 제거 + 중요 영역 보호” 계획으로 재정의
- ✏️ `vibe/unit-plans/U-038[Mvp].md`: “Readable 모드에서 검증” 문구를 “기본 CRT 톤(효과 포함)” 기준으로 정합화
- ✏️ `vibe/architecture.md`: UI 설정/가독성 정책 설명을 PRD/로드맵과 정합화

### 백로그 변경

**수정**:

- U-037[Mvp]: CRT 지글거림 보강(Readable 완화 프로파일) → CRT/가독성 레이어링(Readable 모드 제거, 중요 영역 보호) - 모드 토글 대신 정보 계층 기반으로 분위기/식별성 동시 개선

### 의존성 변경

- 없음

### 진행률 변화

- **MVP**: 39% (19/48) → 39% (19/48)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 31% (19/61) → 31% (19/61)

### 품질 검증 결과

- **품질 기준 문서**: U-030[Mvp]
- **신규 유닛 계획서**: 0개
- **수정된 유닛 계획서**: 2개(U-037, U-038) - 필수 섹션/완료 기준/의존성/주의사항/페어링 질문 유지 및 상세도 향상 ✅
- **수정된 문서**: PRD/로드맵/아키텍처 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**수정**:

- R-004: “Readable 모드 기반 완화” → “중요도(critical/ambient) 기반 가독성 레이어링”으로 대응 전환

### 주의사항

- 기존 `vibe/unit-results/` 및 일부 `vibe/unit-runbooks/`에는 역사적 이유로 Readable 토글(READ 버튼) 시나리오/문구가 남아 있을 수 있습니다. U-037 구현 완료 시점에 런북/문구를 최신 정책으로 정리하세요.

---

## 2026-01-11 - roadmap-update/crt-flicker-icon-v2

### 변경 요약

가독성(Readable) 튜닝으로 CRT 지글거림이 “완전 OFF”처럼 느껴지는 문제를 방지하기 위해, CRT 효과를 **완화 프로파일로 재정의**하는 유닛(U-037)과, Signal/Shard/Risk 등 **핵심 UI 아이콘 12종을 v2로 재생성**하는 유닛(U-038)을 로드맵에 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: Readable 모드/CRT 효과 보강 원칙 추가, 핵심 아이콘 12종(SSOT) 목록 명시
- ✏️ `vibe/roadmap.md`: U-037/U-038 추가, M2 카운트 조정(19→21) 및 상태/진행률 보정, 진행률/예상 완료 재계산, 에셋 유닛 Depends 누락(U-034) 정합화, "현재 작업" 표기 보정
- 🆕 `vibe/unit-plans/U-037[Mvp].md`: CRT 지글거림 보강(Readable 완화 프로파일) 계획서
- 🆕 `vibe/unit-plans/U-038[Mvp].md`: 핵심 UI 아이콘 12종 재생성(v2) 계획서
- ✏️ `vibe/unit-plans/U-033[Mvp].md`: 아이콘 v2(U-038) 산출물도 manifest/QA로 추적하도록 연동 힌트 추가

### 백로그 변경

**추가**:

- U-037[Mvp]: CRT 지글거림 보강(Readable 완화 프로파일) - 가독성 개선과 CRT 정체성 손실의 균형 보정
- U-038[Mvp]: 핵심 UI 아이콘 12종 재생성(v2) - 퀄리티/용량/사이즈(배율)/식별성 기준 고정

**수정**:

- U-029[Mvp]: Depends 누락 정합화 (이전: U-030,U-028,U-008 → 이후: U-030,U-028,U-008,U-034)
- U-031[Mvp]: Depends 누락 정합화 (이전: U-030,U-004 → 이후: U-030,U-004,U-034)
- U-032[Mvp]: Depends 누락 정합화 (이전: U-030,U-004 → 이후: U-030,U-004,U-034)

### 의존성 변경

- U-037[Mvp]: Depends=U-004,U-028
- U-038[Mvp]: Depends=U-033,U-034,U-030,U-028

### 진행률 변화

- **MVP**: 35% (16/46) → 33% (16/48)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 27% (16/59) → 26% (16/61)

> 사유: 신규 유닛 2개 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-029[Mvp]
- **신규 유닛 계획서**: 2개 생성(U-037, U-038) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 1개(U-033) - 섹션 누락 없음, 연동 힌트 추가 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**수정**:

- R-004: “가독성 vs CRT 정체성” 균형 붕괴 리스크를 명시하고, CRT 강도 프로파일 대응을 추가

### 주의사항

- Readable 모드의 의미는 “효과 완전 제거”가 아니라 “강도 완화”가 기본입니다(접근성/OS reduced motion에서는 완전 비활성화 가능).

---

## 2026-01-11 - roadmap-update/rembg-runtime-prompt-files

### 변경 요약

실시간 게임 진행 중 오브젝트 이미지 생성 시 **rembg 배경 제거 통합**(U-035)과, 스토리/이미지 프롬프트를 **ko/en 별도 md 파일로 분리 + 핫리로드**(U-036) 계획을 로드맵에 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/tech-stack.md`: rembg를 Dev/런타임 도구로 추가, 기술 선택 매트릭스에 "오브젝트 이미지 배경 제거" 항목 추가
- ✏️ `vibe/prd.md`: 6.3에 "오브젝트 이미지 배경 제거(rembg)" 추가, 3.2에 프롬프트 관리 원칙/핫리로드 명시
- ✏️ `vibe/roadmap.md`: U-035/U-036 추가, M2 카운트 조정(17→19), 멀티모달 책임 Unit 확장, 진행률 재계산
- 🆕 `vibe/unit-plans/U-035[Mvp].md`: 실시간 이미지 생성 시 rembg 배경 제거 통합 계획서
- 🆕 `vibe/unit-plans/U-036[Mvp].md`: 스토리/이미지 프롬프트 파일 분리(ko/en) + 핫리로드 계획서
- ✏️ `vibe/unit-plans/U-017[Mvp].md`: "다음 작업에 전달할 것"에 U-036 연동 힌트 추가
- ✏️ `vibe/unit-plans/U-019[Mvp].md`: "다음 작업에 전달할 것"에 U-035/U-036 연동 힌트 추가

### 백로그 변경

**추가**:

- U-035[Mvp]: 실시간 이미지 생성 시 rembg 배경 제거 통합 - 투명 합성이 필요한 오브젝트/아이템 이미지 지원
- U-036[Mvp]: 스토리/이미지 프롬프트 파일 분리(ko/en) + 핫리로드 - 프롬프트 편집/튜닝/버전 관리 용이성 확보

**수정**:

- U-017[Mvp]: U-036 연동 힌트 추가 (프롬프트 로딩 기반)
- U-019[Mvp]: U-035/U-036 연동 힌트 추가 (이미지 파이프라인 확장 기반)

### 의존성 변경

- U-035[Mvp]: Depends=U-019,U-020 (이미지 생성/렌더 이후 배경 제거)
- U-036[Mvp]: Depends=U-017,U-019 (텍스트/이미지 프롬프트 사용처 이후 통합 로더)

### 진행률 변화

- **MVP**: 32% (14/44) → 30% (14/46)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 25% (14/57) → 24% (14/59)

> 사유: 신규 유닛 2개 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: U-030[Mvp]
- **신규 유닛 계획서**: 2개 생성(U-035, U-036) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 유닛 계획서**: 2개(U-017, U-019) - 섹션 누락 없음, "다음 작업에 전달할 것" 연동 힌트 추가 ✅
- **수정된 문서**: PRD/tech-stack/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**해소(부분)**:

- rembg 사용이 개발용 에셋에만 제한되던 것을 런타임으로 확장하여, 오브젝트 투명 합성 요구를 충족

### 주의사항

- rembg는 첫 실행 시 모델 다운로드(100~200MB)가 발생합니다. 배포 환경에서는 사전 다운로드(`rembg d <model>`)를 권장합니다.
- 프롬프트 핫리로드는 개발 모드에서만 활성화하고, 운영에서는 시작 시 로드/캐싱을 기본으로 합니다.

---

## 2026-01-10 - roadmap-update/nanobanana-rembg-white-background

### 변경 요약

`rembg` 배경 제거를 더 **편리하고 안정적으로** 수행할 수 있도록, 배경 제거가 필요한 에셋은 **생성 단계에서 배경을 순백(#FFFFFF) 단색**으로 만들도록(그라데이션/텍스처/그림자 금지) 유닛 계획서와 SSOT 문서에 강하게 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 9.7에 “배경 단순화(순백 단색) 규칙” 추가
- ✏️ `frontend/public/ui/README.md`: 워크플로우/프롬프트 예시/체크리스트에 “순백 단색 배경” 규칙 추가
- ✏️ `vibe/unit-plans/U-029[Mvp].md`: 완료 기준/아트 디렉션/구현 흐름/주의사항에 “순백 단색 배경” 강제 추가
- ✏️ `vibe/unit-plans/U-030[Mvp].md`: 최소 런북 절차에 “순백 단색 배경 생성” 추가
- ✏️ `vibe/unit-plans/U-031[Mvp].md`: (조건부) 오버레이/스티커 변형 시 “순백 단색 배경” 강제 추가
- ✏️ `vibe/unit-plans/U-032[Mvp].md`: 크롬 에셋 생성/배경 제거 전제에 “순백 단색 배경” 강제 추가
- ✏️ `vibe/unit-plans/U-033[Mvp].md`: QA 체크리스트에 “순백 단색 배경(조건부)” 항목 추가
- ✏️ `vibe/unit-plans/U-034[Mvp].md`: 템플릿 헤더/완료 기준에 “순백 단색 배경(조건부)” 규칙 추가

### 백로그 변경

**수정**:

- U-029/U-031/U-032/U-033/U-034: 배경 제거(rembg) 전제 시 “순백 단색 배경 생성” 규칙 추가

### 의존성 변경

- 없음

### 진행률 변화

- **MVP**: 32% (14/44) → 32% (14/44)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 25% (14/57) → 25% (14/57)

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **수정된 유닛 계획서**: 6개(U-029, U-030, U-031, U-032, U-033, U-034) - 섹션 누락 없음, 상세도 유지/향상 ✅

### 주의사항

- “순백 단색 배경”은 **최종 결과 배경색**이 아니라, 배경 제거(rembg)를 위한 **원본 생성 단계 규칙**입니다(최종은 투명 PNG).
- 순백 배경에는 **그라데이션/텍스처/그림자**를 넣지 마세요(경계가 섞이면 제거 품질이 급락합니다).

---

## 2026-01-10 - roadmap-update/nanobanana-rembg-background-removal

### 변경 요약

`nanobanana mcp`로 생성한 UI 에셋 중 **투명 배경이 필요한 경우**, 결과에 배경이 남아 있으면 `rembg`로 배경 제거하도록 유닛 계획서/SSOT 문서를 동기화했습니다.  
(참조: `vibe/ref/rembg-guide.md`)

### 영향받은 문서

- ✏️ `vibe/prd.md`: 9.7 “UI 이미지 에셋 파이프라인(nanobanana mcp, Dev-only)”에 rembg 배경 제거(조건부) 규칙 추가
- ✏️ `vibe/roadmap.md`: 리스크 R-005 대응에 (필요 시) rembg 배경 제거 추가
- ✏️ `frontend/public/ui/README.md`: 에셋 워크플로우/체크리스트에 rembg 단계 추가(SSOT)
- ✏️ `vibe/unit-plans/U-029[Mvp].md`: 완료 기준/구현 흐름/주의사항에 rembg 배경 제거 절차 강제
- ✏️ `vibe/unit-plans/U-031[Mvp].md`: (조건부) 투명 오버레이/스티커형 산출물 필요 시 rembg 절차 추가
- ✏️ `vibe/unit-plans/U-032[Mvp].md`: (조건부) chrome 투명 PNG 필요 시 rembg 절차 추가
- ✏️ `vibe/unit-plans/U-033[Mvp].md`: QA 체크리스트에 투명도/배경 제거(rembg) 항목 추가
- ✏️ `vibe/unit-plans/U-034[Mvp].md`: 템플릿 사용 절차에 (필요 시) rembg 후처리 단계 추가
- ✏️ `vibe/unit-plans/U-030[Mvp].md`: 에셋 런북 절차에 (필요 시) rembg 단계 추가(최소 변경)

### 백로그 변경

**수정**:

- U-029[Mvp]: nanobanana mcp 에셋 패스(UI 아이콘/프레임/placeholder) - 투명 배경 필요 시 rembg 배경 제거 절차 강제
- U-031[Mvp]: nanobanana mcp 상태 Placeholder Pack - (조건부) rembg 절차 추가
- U-032[Mvp]: nanobanana mcp UI Chrome Pack - (조건부) rembg 절차 추가
- U-033[Mvp]: nanobanana mcp 에셋 매니페스트 + QA - QA에 rembg(투명도) 항목 추가
- U-034[Mvp]: nanobanana mcp 에셋 요청 스키마 + 템플릿 - 요청→생성→(필요 시 rembg)→저장→manifest→QA 절차 명시

### 의존성 변경

- 없음

### 진행률 변화

- **MVP**: 32% (14/44) → 32% (14/44)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 25% (14/57) → 25% (14/57)

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **수정된 유닛 계획서**: 6개(U-029, U-030, U-031, U-032, U-033, U-034) - 섹션 누락 없음, 상세도 유지/향상 ✅

### 리스크 변경

**수정**:

- R-005: 에셋 품질/난립 리스크 대응에 (필요 시) rembg 배경 제거를 추가

### 주의사항

- `rembg` 모델 선택/옵션은 `vibe/ref/rembg-guide.md`를 준수합니다(특히 애니/일러스트 계열은 `isnet-anime` 권장).
- Windows 환경에서는 한글 경로를 피하고(영문 경로), 첫 실행 시 모델 다운로드가 발생할 수 있습니다.

---

## 2026-01-10 - roadmap-update/nanobanana-mcp-expansion

### 변경 요약

`nanobanana mcp`를 개발용 이미지 에셋 제작 도구의 **공식 용어(SSOT)** 로 고정하고,
에셋 제작/관리 계획을 “단일 유닛”에서 **SSOT/placeholder/chrome/매니페스트/템플릿**까지 전방위로 확장했습니다.  
또한 `.gemini/rules/red-line.md`를 추가해 **보안/용어/dev-only** 레드라인을 명문화했습니다.

### 영향받은 문서

- 🆕 `.gemini/rules/red-line.md`: `nanobanana mcp` 용어 SSOT, dev-only 사용, 비밀정보/프롬프트 노출 금지 규칙 추가
- ✏️ `vibe/prd.md`: 9.7 “UI 이미지 에셋 파이프라인(nanobanana mcp, Dev-only)” 섹션 추가 및 요구사항 명문화
- ✏️ `vibe/roadmap.md`: U-030~U-034 추가, U-029 Depends 갱신, 진행률/마일스톤/리스크(R-005) 동기화
- ✏️ `vibe/commands.md`: 업데이트 항목의 표기를 `nanobanana mcp`로 통일
- ✏️ `vibe/ref/standard-guide.md`: Creative Autopilot 문맥에서 `nanobanana mcp` 용어 사용으로 정합화
- ✏️ `vibe/unit-plans/U-029[Mvp].md`: Depends=U-030,U-028,U-008로 갱신 및 템플릿/매니페스트 연동 힌트 추가
- 🆕 `vibe/unit-plans/U-030[Mvp].md`: 에셋 SSOT(폴더/네이밍/예산/폴백/라이선스)
- 🆕 `vibe/unit-plans/U-031[Mvp].md`: 상태 placeholder pack(Scene/오프라인/에러/차단)
- 🆕 `vibe/unit-plans/U-032[Mvp].md`: UI chrome pack(패널/카드 프레임/코너)
- 🆕 `vibe/unit-plans/U-033[Mvp].md`: 에셋 매니페스트 + QA 체크리스트
- 🆕 `vibe/unit-plans/U-034[Mvp].md`: 에셋 요청 스키마 + 프롬프트 템플릿(재현성)

### 백로그 변경

**추가**:

- U-030[Mvp]: nanobanana mcp 에셋 SSOT(폴더/네이밍/사이즈/폴백/라이선스) - 에셋 규칙 단일화/난립 방지
- U-031[Mvp]: nanobanana mcp 상태 Placeholder Pack - 실패/지연을 UX로 흡수
- U-032[Mvp]: nanobanana mcp UI Chrome Pack - “게임 HUD” 인상 강화(과잉 적용 금지)
- U-033[Mvp]: nanobanana mcp 에셋 매니페스트 + QA - 사용처/예산/가독성 관리
- U-034[Mvp]: nanobanana mcp 에셋 요청 스키마 + 템플릿 - 일관성/재현성 확보

**수정**:

- U-029[Mvp]: Depends 변경 (이전: U-028,U-008 → 이후: U-030,U-028,U-008) - SSOT 선행 강제

### 진행률 변화

- **MVP**: 31% (12/39) → 27% (12/44)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 23% (12/52) → 21% (12/57)

> 사유: 신규 유닛 5개 추가로 분모가 증가했습니다(완료 유닛 수는 동일).

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **신규 유닛 계획서**: 5개 생성(U-030~U-034) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵/기존 유닛(U-029) - 섹션 누락 없음, 용어 SSOT 정합화 ✅

### 리스크 변경

**신규**:

- R-005: 에셋 난립/용량 비대화/스타일 불일치 - 영향: Medium - 대응: SSOT + 매니페스트/QA + 예산 상한

### 주의사항

- `nanobanana mcp`는 개발용 에셋 제작 도구로만 사용하며, 런타임 의존/비밀정보 커밋은 레드라인 위반입니다.

---

## 2026-01-10 - roadmap-update/ui-readability-nanobanana-assets

### 변경 요약

데모 UI의 “작은 글씨” 가독성 이슈를 해결하기 위한 MVP 유닛(U-028)과, nanobanana mcp를 활용해 필요한 UI 이미지 에셋을 제작/반영하는 MVP 유닛(U-029)을 백로그에 추가했습니다.  
또한 진행률 산정을 `vibe/unit-results/` 기반으로 고정하여 로드맵 대시보드/마일스톤/현재 작업 표시를 현실 값으로 동기화했습니다.

### 영향받은 문서

- ✏️ `vibe/roadmap.md`: U-028/U-029 추가, M2 카운트 조정, 가독성 리스크(R-004) 추가, 진행률/현재 작업 갱신
- ✏️ `vibe/prd.md`: 9.4 접근성/입력에 UI 스케일/Readable 모드 요구 추가, 9.6에 nanobanana mcp UI 에셋 활용 계획 명시
- 🆕 `vibe/unit-plans/U-028[Mvp].md`: UI 가독성 패스 계획서 생성
- 🆕 `vibe/unit-plans/U-029[Mvp].md`: nanobanana mcp UI 에셋 패스 계획서 생성

### 백로그 변경

**추가**:

- U-028[Mvp]: UI 가독성 패스(폰트 스케일/효과 토글/대비) - 작은 글씨로 인한 데모 체감 저하 방지
- U-029[Mvp]: nanobanana mcp 에셋 패스(UI 아이콘/프레임/placeholder) - 게임 UI 인상 강화(폴백 포함)

### 의존성 변경

- U-029[Mvp]: Depends=U-028,U-008 (Readable/스케일 및 Agent Console 연동 기반 위에서 에셋 반영)

### 진행률 변화

- **MVP**: 57% (21/37) → 31% (12/39)
- **MMP**: 0% (0/13) → 0% (0/13)
- **전체**: 42% (21/50) → 23% (12/52)

> 사유: 로드맵의 진행률 표기가 `unit-results`(완료 증거)와 불일치하여, 완료 유닛을 `vibe/unit-results/`에 존재하는 U/RU/CP로 고정해 재계산했습니다. 또한 신규 유닛 2개 추가로 분모가 증가했습니다.

### 품질 검증 결과

- **품질 기준 문서**: CP-MVP-01
- **신규 유닛 계획서**: 2개 생성(U-028, U-029) - 필수 섹션/완료 기준/의존성/리스크/페어링 질문 포함 ✅
- **수정된 문서**: PRD/로드맵 - 기존 섹션 유지, 정보량 감소 없음 ✅

### 리스크 변경

**신규**:

- R-004: 작은 글씨/과한 CRT 효과로 가독성 저하 - 영향: Medium - 대응: UI 스케일/Readable 모드 + 최소 글자 크기 가이드

### 주의사항

- U-029는 “에셋 제작/반영” 유닛이므로, 실제 이미지 파일 생성/커밋은 해당 유닛 수행 시점에 진행합니다(현재는 계획/규칙만 반영).

---

## 2026-01-04 - roadmap-update/http-streaming

### 변경 요약

기존 “SSE(EventSource) 기반 스트리밍” 전제를 제거하고, **HTTP Streaming (Fetch + POST) + NDJSON 이벤트 스트림**을 기본 스택으로 문서/유닛 계획서를 일괄 동기화했습니다.  
또한 `pnpm kill`이 `node.exe` 전체를 종료하는 문제를 해결하기 위한 MVP 유닛(U-027)을 백로그에 추가했습니다.

### 영향받은 문서

- ✏️ `vibe/prd.md`: 8.1/8.3/8.4의 스트리밍 스택을 HTTP Streaming으로 전환하고, NDJSON 이벤트 프로토콜(초안) 추가
- ✏️ `vibe/tech-stack.md`: Streaming/Reatime 항목을 HTTP Streaming으로 전환, 기술 선택 매트릭스/비교 섹션 동기화
- ✏️ `vibe/roadmap.md`: 진행률 재계산, U-027 추가, U-007/U-008 표기 변경, SSE 용어 정리
- ✏️ `vibe/architecture.md`: 백엔드 스트리밍 책임 표기 동기화
- ✏️ `.cursor/rules/20-backend-orchestrator.mdc`: 오케스트레이터 스트리밍 기본을 HTTP Streaming(Fetch+POST)로 전환
- ✏️ `vibe/unit-plans/*.md`: SSE 전제 제거 및 HTTP Streaming/NDJSON 기준으로 계획 동기화 (아래 목록 참조)

### 백로그 변경

**추가**:

- U-027[Mvp]: 개발 스크립트 - pnpm kill 포트 제한(8001~8020) - 다른 프로젝트 Node 프로세스 종료 방지

**수정**:

- U-007[Mvp]: `모의 Orchestrator + /api/turn SSE` → `모의 Orchestrator + /api/turn HTTP Streaming(POST)` - POST 입력(큰 TurnInput) 전제와 정합화
- U-008[Mvp]: `프론트 SSE 클라이언트` → `프론트 HTTP Streaming 클라이언트` - fetch+ReadableStream 기반 소비로 명확화
- RU-002[Mvp]: 이벤트/타입 통일 범위를 “SSE”에서 “NDJSON 스트림 이벤트”로 재정의
- U-024[Mvp]: `Action Queue SSE` → `Action Queue Streaming` - Autopilot 스트리밍도 동일 전제 유지
- CP-MVP-01 / CP-MMP-01: “SSE 스트리밍” 문구를 HTTP Streaming으로 교체(검증 기준 동일)

### 의존성 변경

- U-027[Mvp]: Depends=RU-001[Mvp] (포트 정책/kill:port SSOT 정리 이후 진행)

### 진행률 변화

- **MVP**: 33% → 19%
- **MMP**: 0% → 0%
- **전체**: 24% → 14%

> 사유: 완료 목록(unit-results 기준)과 진행률 표기가 불일치하여 **완료 유닛 7개 기준으로 재계산**했으며, 신규 유닛(U-027) 추가로 분모가 증가했습니다.

### 품질 검증 결과

- **품질 기준 문서**: U-006[Mvp]
- **신규 유닛 계획서**: 1개 생성(U-027) - 필수 섹션/완료 기준/의존성/리스크 포함 ✅
- **수정된 유닛 계획서**: 다수 - 섹션 누락 없이 “SSE → HTTP Streaming” 전제만 치환(상세도 유지/향상) ✅

### 리스크 변경

**신규**:

- R-004: 스트림 프로토콜(NDJSON) 파서/호환성 불안정 - 영향: Medium - 대응: RU-002에서 이벤트 타입/에러 처리/폴백 계약을 단일화

**해소(부분)**:

- R-???(암묵): EventSource(GET) 제약으로 TurnInput(큰 JSON) 전송이 어려운 설계 리스크 → HTTP Streaming(POST)로 구조적 해소

### 주의사항

- 과거 작성된 `unit-results/`, `unit-runbooks/` 일부에는 “SSE” 용어가 남아 있을 수 있습니다(역사적 기록). 이후 구현/런북 갱신 시점에 최신 스택 기준으로 정리하는 것을 권장합니다.

---

