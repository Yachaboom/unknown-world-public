# [ID: RU-003-S3] RU-003 수동 검증 시나리오: 카드/클릭/드롭/스트리밍 상태 경계 회귀 방지

## 📌 기본 정보

| 항목               | 내용                         |
| ------------------ | ---------------------------- |
| **ID**             | RU-003-S3                    |
| **심각도**         | Medium                       |
| **카테고리**       | 수동 검증 시나리오 (Manual Verification) |
| **영향 범위**      | `frontend/src/App.tsx`, `frontend/src/components/ActionDeck.tsx`, `frontend/src/components/SceneCanvas.tsx`, `frontend/src/components/InventoryPanel.tsx`, `frontend/src/stores/*` |
| **예상 작업 시간** | 15~30분                      |

---

## 🔍 목적

RU-003(상태 슬라이스/경계 정리)은 “동작 변화 없이 구조만 정리”가 목표입니다.  
따라서 아래 시나리오는 **동작 회귀(특히 무반응/비활성화 누락/i18n 혼합/재화 표시 오류)**를 빠르게 잡기 위한 최소 수동 체크리스트입니다.

---

## 🧪 검증 방법 (수동 검증 중심)

### 공통 준비

- 프론트 개발 서버를 실행해 브라우저에서 플레이 화면을 띄웁니다.
- 백엔드가 켜져 있어야 “턴 스트리밍”이 정상 동작합니다.
- 검증 중 핵심 관찰 포인트:
  - **UI 형태**: 채팅 버블 UI로 보이지 않는가? (RULE-002)
  - **인터랙션 게이트**: 스트리밍 중 클릭/드래그/카드가 확실히 막히는가?
  - **상태 반영**: final 수신 후 카드/재화/오브젝트/인벤토리가 갱신되는가?
  - **피드백**: 실패(드롭 불가/오프라인 등)에서 무반응이 없는가?

---

### 시나리오 1: 기본 레이아웃/고정 패널 확인 (RULE-002)

- **실행 방법**
  - 페이지 로드 직후 화면을 확인
- **기대 결과**
  - Header(재화/연결), 좌측 Inventory, 중앙 Scene Canvas+Narrative, 우측 Agent Console, Footer Action Deck+입력이 동시에 보임
- **확인 사항**
  - [ ] 좌/우 채팅 버블 형태가 아닌가?
  - [ ] Action Deck이 “카드”로 보이는가?

---

### 시나리오 2: 텍스트 입력으로 턴 실행 (스트리밍)

- **실행 방법**
  1. 하단 입력창에 텍스트 입력
  2. Enter 또는 Execute 버튼
- **기대 결과**
  - Agent Console에서 단계/배지/내러티브 델타가 진행되고, 최종적으로 스트리밍이 종료됨
- **확인 사항**
  - [ ] 스트리밍 중 입력창/카드/드래그가 비활성화 되는가?
  - [ ] 스트리밍 종료 후 다시 활성화 되는가?

---

### 시나리오 3: Action Deck 카드 클릭 → 턴 실행

- **실행 방법**
  1. Action Deck 카드 1장을 클릭
- **기대 결과**
  - `action_id` 포함한 턴 실행이 트리거되고 스트리밍 진행
- **확인 사항**
  - [ ] 카드 클릭이 즉시 반응하는가(무반응 없음)?
  - [ ] 스트리밍 중 카드가 비활성화 되는가?

---

### 시나리오 4: 핫스팟 호버/클릭 → TurnInput(click) 전송

- **실행 방법**
  1. Scene Canvas 위 핫스팟 영역에 마우스를 올려 툴팁 확인
  2. 핫스팟 클릭
- **기대 결과**
  - 툴팁이 뜨고, 클릭 시 턴 실행이 트리거됨
- **확인 사항**
  - [ ] 툴팁/하이라이트가 표시되는가?
  - [ ] 클릭 후 스트리밍이 시작되는가?

---

### 시나리오 5: Inventory 아이템 드래그(Overlay) 확인

- **실행 방법**
  1. 인벤토리 아이템을 클릭/드래그
- **기대 결과**
  - 드래그 중 오버레이가 커서를 따라다님
- **확인 사항**
  - [ ] 드래그 중 시각적 피드백이 있는가?
  - [ ] 스트리밍 중에는 드래그가 시작되지 않는가?

---

### 시나리오 6: 아이템 → 핫스팟 드롭 성공 (TurnInput(drop))

- **실행 방법**
  1. 인벤토리 아이템을 핫스팟 위로 드래그
  2. 핫스팟이 하이라이트(드롭 타겟) 되는지 확인
  3. 드롭
- **기대 결과**
  - 드롭 텍스트가 생성되고 턴 실행이 트리거됨
- **확인 사항**
  - [ ] 드롭 타겟 하이라이트가 표시되는가?
  - [ ] 드롭 후 즉시 스트리밍이 시작되는가?

---

### 시나리오 7: 드롭 실패(유효하지 않은 영역) 즉시 피드백 (무반응 금지)

- **실행 방법**
  1. 인벤토리 아이템을 Scene Canvas의 “핫스팟이 아닌 영역”에 드롭
- **기대 결과**
  - 턴 실행은 되지 않지만, Narrative Feed에 실패 피드백이 즉시 추가됨
- **확인 사항**
  - [ ] 무반응이 아닌가?
  - [ ] 반복 드롭 실패 시에도 UI가 멈추지 않는가?

---

### 시나리오 8: 에러/오프라인 상태 전이(연결 상태/Scene placeholder)

- **실행 방법**
  1. 백엔드를 중지(또는 네트워크 차단)한 뒤 턴 실행
  2. 다시 백엔드를 켜고 턴 재시도
- **기대 결과**
  - 오프라인 상태가 사용자에게 명확히 표시되고, 복구 후 다시 온라인으로 전환됨
- **확인 사항**
  - [ ] 연결 상태 표시가 실제 상태와 일치하는가?
  - [ ] Scene Canvas가 오프라인/에러 placeholder를 유지/표시하는가?

---

### 시나리오 9: i18n 혼합 출력 점검 (RULE-006)

- **실행 방법**
  1. 언어를 `en-US`로 고정한 상태에서(프로젝트 정책에 따른 토글/설정) 화면을 관찰
  2. 드롭/클릭/카드로 내러티브 생성
- **기대 결과**
  - UI 라벨/내러티브가 한 언어로 일관됨
- **확인 사항**
  - [ ] 영어 템플릿 + 한국어 라벨 같은 “혼합 출력”이 없는가?

---

## ✅ 회귀 확인 체크리스트(요약)

- [ ] Action Deck/Hotspot/Inventory가 “게임 UI”로 상시 노출(RULE-002)
- [ ] 스트리밍 중 상호작용 차단이 일관됨(카드/클릭/드래그 모두)
- [ ] 드롭 실패 시 즉시 피드백(무반응 금지)
- [ ] 연결/오프라인 상태 표시가 올바름
- [ ] ko/en 혼합 출력 없음

---

## 🔧 실행 가이드(운영 팁)

- RU-003을 적용할 때는, 작은 커밋 단위로(예: worldStore 도입 → App 전환 → Turn Runner 분리) 진행하고, 각 단계마다 위 시나리오를 최소 1회 수행합니다.

---

## 🏷️ 태그

`#refactoring` `#manual-verification` `#streaming` `#dnd` `#i18n` `#ui-boundary`

