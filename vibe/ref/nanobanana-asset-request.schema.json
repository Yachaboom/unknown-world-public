{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://unknown-world.dev/schemas/nanobanana-asset-request.json",
  "title": "nanobanana mcp Asset Request Schema",
  "description": "nanobanana mcpë¡œ ì—ì…‹ì„ ìš”ì²­í•  ë•Œ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ ìŠ¤í‚¤ë§ˆ (ê°œë°œìš©, RULE-007 ì¤€ìˆ˜). ì°¸ì¡°: nanobanana-mcp.md, rembg-guide.md, imagemagick-guide.md",
  "type": "object",
  "required": ["id", "category", "purpose", "size_px"],
  "additionalProperties": false,
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
      "description": "ì—ì…‹ ê³ ìœ  ID (kebab-case, ë„¤ì´ë° ê·œì¹™ ì¤€ìˆ˜)",
      "examples": ["signal-24", "badge-ok-16", "scene-loading", "panel-corner-tl", "scanner-frame"]
    },
    "category": {
      "type": "string",
      "enum": ["icon", "placeholder", "chrome"],
      "description": "ì—ì…‹ ì¹´í…Œê³ ë¦¬ (ì•„ì´ì½˜/placeholder/chrome). ì¹´í…Œê³ ë¦¬ë³„ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ì€ nanobanana-mcp.md ì„¹ì…˜ 2 ì°¸ì¡°"
    },
    "purpose": {
      "type": "string",
      "maxLength": 100,
      "description": "ì—ì…‹ ìš©ë„ (ë¬´ì—‡ì„ í‘œí˜„í•˜ëŠ”ê°€, ì–´ë””ì— ì“°ì´ëŠ”ê°€)",
      "examples": [
        "Economy HUDì˜ Signal ì¬í™” ì•„ì´ì½˜",
        "ìŠ¤íŠ¸ë¦¬ë° ë¡œë”© ì¤‘ Scene Canvas placeholder",
        "Action Deck ì¹´ë“œ í”„ë ˆì„ ì½”ë„ˆ",
        "Scanner íŒ¨ë„ ì´ë¯¸ì§€ ì—…ë¡œë“œ ìŠ¬ë¡¯ í”„ë ˆì„"
      ]
    },
    "size_px": {
      "oneOf": [
        {
          "type": "integer",
          "enum": [16, 24, 32, 64, 128, 256, 512, 800, 1024, 2048],
          "description": "ì •ì‚¬ê°í˜• ì•„ì´ì½˜ ì‚¬ì´ì¦ˆ (px) - imagemagick-guide.md í¬ê¸° í”„ë¦¬ì…‹ ì°¸ì¡°"
        },
        {
          "type": "object",
          "required": ["width", "height"],
          "properties": {
            "width": { "type": "integer", "minimum": 1, "maximum": 4096 },
            "height": { "type": "integer", "minimum": 1, "maximum": 4096 }
          },
          "additionalProperties": false,
          "description": "ë¹„ì •ì‚¬ê°í˜• placeholder/chrome ì‚¬ì´ì¦ˆ"
        }
      ],
      "description": "ì—ì…‹ í¬ê¸° (px). í›„ì²˜ë¦¬(ImageMagick)ë¡œ ìµœì¢… í¬ê¸° ì¡°ì •"
    },
    "size_preset": {
      "type": "string",
      "enum": [
        "icon-small",
        "icon-medium",
        "icon-large",
        "thumbnail",
        "avatar",
        "web-standard",
        "high-res",
        "custom"
      ],
      "description": "í¬ê¸° í”„ë¦¬ì…‹ (imagemagick-guide.md ì°¸ì¡°). icon-small: 32x32/64x64, icon-medium: 128x128, icon-large: 256x256, thumbnail: 256x256, avatar: 512x512, web-standard: 800x800/1024x1024, high-res: 2048x2048"
    },
    "palette": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^#[0-9a-fA-F]{6}$"
      },
      "default": ["#33ff00", "#ff00ff", "#ffaa00", "#ff3333"],
      "description": "ì‚¬ìš©í•  ìƒ‰ìƒ íŒ”ë ˆíŠ¸ (CRT í…Œë§ˆ ê¸°ë³¸ê°’ ì ìš©). nanobanana-mcp.md ì„¹ì…˜ 1 ì•„íŠ¸ ë””ë ‰ì…˜ ì°¸ì¡°",
      "examples": [
        ["#33ff00"],
        ["#33ff00", "#ff00ff"],
        ["#33ff00", "#0d0d0d"]
      ]
    },
    "mood": {
      "type": "string",
      "enum": [
        "retro",
        "glitch",
        "minimal",
        "danger",
        "warning",
        "success",
        "neutral",
        "cinematic",
        "technical"
      ],
      "default": "retro",
      "description": "ì—ì…‹ ë¶„ìœ„ê¸°/í†¤ (CRT ë ˆíŠ¸ë¡œ ê¸°ë³¸)"
    },
    "background": {
      "type": "string",
      "enum": ["transparent", "solid_white", "solid_black"],
      "default": "transparent",
      "description": "ë°°ê²½ ìœ í˜•. íˆ¬ëª… í•„ìš” ì‹œ solid_whiteë¡œ ìƒì„± í›„ rembg ì œê±° (rembg-guide.md ì°¸ì¡°)"
    },
    "must_have": {
      "type": "array",
      "items": { "type": "string", "maxLength": 50 },
      "maxItems": 5,
      "description": "ë°˜ë“œì‹œ í¬í•¨í•  ì‹œê° ìš”ì†Œ",
      "examples": [
        ["ì¸ê´‘ ë…¹ìƒ‰ ê¸€ë¡œìš°", "ë‹¨ìˆœí•œ ì‹¤ë£¨ì—£"],
        ["ìŠ¤ìº”ë¼ì¸ ëŠë‚Œ", "CRT ì”ìƒ"],
        ["thin glowing lines", "technical schematic style"]
      ]
    },
    "must_not_have": {
      "type": "array",
      "items": { "type": "string", "maxLength": 50 },
      "maxItems": 5,
      "default": ["í…ìŠ¤íŠ¸ ë Œë”ë§", "ë³µì¡í•œ ê·¸ë¼ë°ì´ì…˜", "ì‚¬ì§„ ìŠ¤íƒ€ì¼"],
      "description": "ë°˜ë“œì‹œ ì œì™¸í•  ì‹œê° ìš”ì†Œ (nanobanana-mcp.md ê¸ˆì§€ ì‚¬í•­ ì°¸ì¡°)"
    },
    "fallback_text": {
      "type": "string",
      "maxLength": 10,
      "description": "ì—ì…‹ ë¡œë”© ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ ì´ëª¨ì§€/í…ìŠ¤íŠ¸",
      "examples": ["ğŸ“¡", "âš¡", "ğŸ’", "âš ï¸", "OK", "FAIL", "ğŸ“·"]
    },
    "output_path": {
      "type": "string",
      "pattern": "^(icons|placeholders|chrome)/[a-z0-9-]+\\.(png|webp|jpg)$",
      "description": "frontend/public/ui/ ê¸°ì¤€ ì €ì¥ ê²½ë¡œ",
      "examples": [
        "icons/signal-24.png",
        "placeholders/scene-loading.webp",
        "chrome/panel-corner-tl.png",
        "chrome/scanner-frame.png"
      ]
    },
    "output_format": {
      "type": "string",
      "enum": ["png", "webp", "jpeg"],
      "default": "png",
      "description": "ì¶œë ¥ í˜•ì‹. PNG/WebP: íˆ¬ëª… ë°°ê²½ ìœ ì§€, JPEG: íˆ¬ëª… ë°°ê²½ ë¯¸ì§€ì› (imagemagick-guide.md ì£¼ì˜ì‚¬í•­ ì°¸ì¡°)"
    },

    "requires_rembg": {
      "type": "boolean",
      "default": false,
      "description": "rembg ë°°ê²½ ì œê±° í•„ìš” ì—¬ë¶€ (trueë©´ solid_white ë°°ê²½ìœ¼ë¡œ ìƒì„± ê¶Œì¥)"
    },
    "rembg_options": {
      "type": "object",
      "description": "rembg ë°°ê²½ ì œê±° ì˜µì…˜ (rembg-guide.md ìƒì„¸ ì°¸ì¡°)",
      "properties": {
        "model": {
          "type": "string",
          "enum": [
            "birefnet-general",
            "birefnet-portrait",
            "birefnet-dis",
            "birefnet-massive",
            "isnet-anime",
            "isnet-general-use",
            "u2net",
            "u2netp",
            "u2net_human_seg",
            "u2net_cloth_seg",
            "silueta"
          ],
          "default": "birefnet-general",
          "description": "rembg ëª¨ë¸ ì„ íƒ. UI ì•„ì´ì½˜/í”½ì…€ ì•„íŠ¸/ì—ì…‹: birefnet-general(ê¸°ë³¸), ì¼ë³¸ ì• ë‹ˆ ìºë¦­í„°: isnet-anime, ì¸ë¬¼ ì´ˆìƒí™”: birefnet-portrait, ë³µì¡í•œ ë°°ê²½: birefnet-dis, ìµœê³  í’ˆì§ˆ: birefnet-massive, ì†ë„ ìš°ì„ : u2netp"
        },
        "alpha_matting": {
          "type": "boolean",
          "default": false,
          "description": "Alpha Matting (-a ì˜µì…˜). ì¸ë¬¼/ë™ë¬¼ í„¸/ë¨¸ë¦¬ì¹´ë½ ê²½ê³„ì— ì‚¬ìš©. í”½ì…€ ì•„íŠ¸/UI ì•„ì´ì½˜ì—ëŠ” ë¯¸ì‚¬ìš© ê¶Œì¥"
        },
        "image_type_hint": {
          "type": "string",
          "enum": [
            "ui-icon",
            "pixel-art",
            "logo",
            "product",
            "object",
            "anime-character",
            "illustration",
            "portrait",
            "human-full-body",
            "clothing",
            "complex-background",
            "general"
          ],
          "default": "ui-icon",
          "description": "ì´ë¯¸ì§€ ìœ í˜• íŒíŠ¸ (ëª¨ë¸ ìë™ ì„ íƒ ì°¸ì¡°ìš©)"
        }
      },
      "additionalProperties": false
    },

    "requires_imagemagick": {
      "type": "boolean",
      "default": false,
      "description": "ImageMagick í›„ì²˜ë¦¬ í•„ìš” ì—¬ë¶€ (trim/resize/extent)"
    },
    "imagemagick_options": {
      "type": "object",
      "description": "ImageMagick í›„ì²˜ë¦¬ ì˜µì…˜ (imagemagick-guide.md ìƒì„¸ ì°¸ì¡°)",
      "properties": {
        "trim": {
          "type": "boolean",
          "default": true,
          "description": "íˆ¬ëª… ì˜ì—­/ì—¬ë°± ìë™ ì œê±° (-trim +repage)"
        },
        "resize": {
          "oneOf": [
            {
              "type": "string",
              "pattern": "^\\d+x\\d+[!>]?$",
              "description": "ë¦¬ì‚¬ì´ì¦ˆ í¬ê¸°. WxH: ë¹„ìœ¨ ìœ ì§€, WxH!: ê°•ì œ(ì™œê³¡ í—ˆìš©), WxH>: ì¶•ì†Œë§Œ"
            },
            { "type": "null" }
          ],
          "description": "ë¦¬ì‚¬ì´ì¦ˆ ì˜µì…˜ (-resize). nullì´ë©´ ë¦¬ì‚¬ì´ì¦ˆ ì•ˆí•¨",
          "examples": ["48x48", "160x80", "256x256!", "1024x1024>"]
        },
        "gravity": {
          "type": "string",
          "enum": ["center", "north", "south", "east", "west", "northwest", "northeast", "southwest", "southeast"],
          "default": "center",
          "description": "ì •ë ¬ ê¸°ì¤€ì  (-gravity)"
        },
        "extent": {
          "type": "string",
          "pattern": "^\\d+x\\d+$",
          "description": "ìº”ë²„ìŠ¤ í¬ê¸° í™•ì¥ (-extent WxH). ì£¼ë¡œ ì •ì‚¬ê°í˜• ì¸ë„¤ì¼ ìƒì„±ì— ì‚¬ìš©",
          "examples": ["48x48", "256x256", "512x512"]
        },
        "background": {
          "type": "string",
          "enum": ["transparent", "white", "black"],
          "default": "transparent",
          "description": "extent ì‹œ ë°°ê²½ìƒ‰ (-background)"
        },
        "border": {
          "type": "integer",
          "minimum": 0,
          "description": "í…Œë‘ë¦¬/íŒ¨ë”© ì¶”ê°€ (-border N)"
        },
        "quality": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 90,
          "description": "JPEG/WebP í’ˆì§ˆ (-quality). PNGì—ëŠ” ì ìš© ì•ˆë¨"
        },
        "flatten": {
          "type": "boolean",
          "default": false,
          "description": "íˆ¬ëª… ë°°ê²½ ì œê±° í›„ ë‹¨ìƒ‰ ë°°ê²½ìœ¼ë¡œ ë³‘í•© (-flatten). JPEG ì¶œë ¥ ì‹œ í•„ìˆ˜"
        }
      },
      "additionalProperties": false
    },

    "workflow": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["generate", "rembg", "imagemagick", "manifest", "qa"]
      },
      "default": ["generate", "manifest", "qa"],
      "description": "í›„ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš° ìˆœì„œ (nanobanana-mcp.md ì„¹ì…˜ 4 ì°¸ì¡°). generate: nanobanana mcp ìƒì„±, rembg: ë°°ê²½ ì œê±°, imagemagick: í¬ê¸° ì¡°ì •/crop, manifest: manifest.json ë“±ë¡, qa: í’ˆì§ˆ í™•ì¸",
      "examples": [
        ["generate", "rembg", "imagemagick", "manifest", "qa"],
        ["generate", "manifest", "qa"],
        ["generate", "imagemagick", "manifest", "qa"]
      ]
    },

    "prompt_template": {
      "type": "object",
      "description": "í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì •ë³´ (nanobanana-mcp.md ì„¹ì…˜ 2 ì°¸ì¡°)",
      "properties": {
        "base_template": {
          "type": "string",
          "enum": ["icon", "placeholder", "chrome", "custom"],
          "description": "ê¸°ë³¸ í…œí”Œë¦¿ íƒ€ì…. icon: '2.1 UI ì•„ì´ì½˜', placeholder: '2.2 ìƒíƒœ Placeholder', chrome: '2.3 UI í¬ë¡¬/í”„ë ˆì„'"
        },
        "subject": {
          "type": "string",
          "maxLength": 100,
          "description": "í…œí”Œë¦¿ì˜ [SUBJECT] ë˜ëŠ” [SCENE_DESCRIPTION] ëŒ€ì²´ í…ìŠ¤íŠ¸",
          "examples": ["scanner slot with corner brackets", "loading terminal with data streams", "signal wave icon"]
        },
        "color_override": {
          "type": "string",
          "pattern": "^#[0-9a-fA-F]{6}$",
          "description": "í…œí”Œë¦¿ì˜ [COLOR] ëŒ€ì²´ê°’ (ê¸°ë³¸: #33ff00)"
        },
        "custom_prompt": {
          "type": "string",
          "maxLength": 500,
          "description": "ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì „ë¬¸ (base_templateì´ 'custom'ì¼ ë•Œ ì‚¬ìš©)"
        }
      },
      "additionalProperties": false
    },

    "notes": {
      "type": "string",
      "maxLength": 300,
      "description": "ì¶”ê°€ ì°¸ê³ ì‚¬í•­ (ìŠ¤íƒ€ì¼ ë ˆí¼ëŸ°ìŠ¤, ìˆ˜ì • ìš”ì²­, ë³€í˜• ìš”ì²­ ë“±)"
    },
    "prompt_version": {
      "type": "string",
      "pattern": "^v\\d+(\\.\\d+)?$",
      "default": "v1",
      "description": "í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ë²„ì „ (ì¬í˜„ì„± ì¶”ì ìš©)",
      "examples": ["v1", "v1.1", "v2"]
    },
    "created_at": {
      "type": "string",
      "format": "date",
      "description": "ì—ì…‹ ìš”ì²­ ìƒì„±ì¼ (YYYY-MM-DD)"
    },
    "unit_id": {
      "type": "string",
      "pattern": "^U-\\d{3}(\\[\\w+\\])?$",
      "description": "ê´€ë ¨ ìœ ë‹› ID (ì¶”ì ìš©)",
      "examples": ["U-030", "U-031[Mvp]", "U-032[Mvp]"]
    }
  },

  "if": {
    "properties": { "requires_rembg": { "const": true } }
  },
  "then": {
    "properties": {
      "background": { "const": "solid_white" }
    }
  },

  "examples": [
    {
      "id": "signal-24",
      "category": "icon",
      "purpose": "Economy HUDì˜ Signal ì¬í™” ì•„ì´ì½˜",
      "size_px": 24,
      "size_preset": "icon-small",
      "palette": ["#33ff00"],
      "mood": "retro",
      "background": "solid_white",
      "must_have": ["wave pattern", "simple silhouette"],
      "must_not_have": ["text", "complex gradients"],
      "fallback_text": "ğŸ“¡",
      "output_path": "icons/signal-24.png",
      "output_format": "png",
      "requires_rembg": true,
      "rembg_options": {
        "model": "birefnet-general",
        "alpha_matting": false,
        "image_type_hint": "ui-icon"
      },
      "requires_imagemagick": true,
      "imagemagick_options": {
        "trim": true,
        "resize": "24x24",
        "gravity": "center",
        "extent": "24x24",
        "background": "transparent"
      },
      "workflow": ["generate", "rembg", "imagemagick", "manifest", "qa"],
      "prompt_template": {
        "base_template": "icon",
        "subject": "signal wave antenna"
      },
      "prompt_version": "v1",
      "unit_id": "U-030[Mvp]"
    },
    {
      "id": "scene-loading",
      "category": "placeholder",
      "purpose": "ìŠ¤íŠ¸ë¦¬ë° ë¡œë”© ì¤‘ Scene Canvas placeholder",
      "size_px": { "width": 512, "height": 384 },
      "size_preset": "custom",
      "palette": ["#33ff00", "#0d0d0d"],
      "mood": "cinematic",
      "background": "solid_black",
      "must_have": ["scanlines", "CRT glow", "data streams"],
      "must_not_have": ["text", "complex UI"],
      "fallback_text": "â³",
      "output_path": "placeholders/scene-loading.webp",
      "output_format": "webp",
      "requires_rembg": false,
      "requires_imagemagick": true,
      "imagemagick_options": {
        "trim": false,
        "resize": "512x384",
        "quality": 85
      },
      "workflow": ["generate", "imagemagick", "manifest", "qa"],
      "prompt_template": {
        "base_template": "placeholder",
        "subject": "loading terminal with streaming data visualization"
      },
      "prompt_version": "v1",
      "unit_id": "U-031[Mvp]"
    },
    {
      "id": "scanner-frame",
      "category": "chrome",
      "purpose": "Scanner íŒ¨ë„ ì´ë¯¸ì§€ ì—…ë¡œë“œ ìŠ¬ë¡¯ í”„ë ˆì„",
      "size_px": { "width": 200, "height": 200 },
      "size_preset": "custom",
      "palette": ["#33ff00"],
      "mood": "technical",
      "background": "solid_white",
      "must_have": ["thin glowing lines", "corner brackets", "scanner slot aesthetic"],
      "must_not_have": ["text", "shadows", "gradients"],
      "fallback_text": "ğŸ“·",
      "output_path": "chrome/scanner-frame.png",
      "output_format": "png",
      "requires_rembg": true,
      "rembg_options": {
        "model": "birefnet-general",
        "alpha_matting": false,
        "image_type_hint": "ui-icon"
      },
      "requires_imagemagick": true,
      "imagemagick_options": {
        "trim": true,
        "resize": "200x200",
        "gravity": "center",
        "extent": "200x200",
        "background": "transparent"
      },
      "workflow": ["generate", "rembg", "imagemagick", "manifest", "qa"],
      "prompt_template": {
        "base_template": "chrome",
        "subject": "scanner upload slot with corner brackets"
      },
      "prompt_version": "v1",
      "unit_id": "U-032[Mvp]"
    }
  ]
}
