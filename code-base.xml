This file is a merged representation of a subset of the codebase, containing specifically included files and files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: **/*.{ts,py,js,json,md}
- Files matching these patterns are excluded: .claude/**, .cursor/**, .gemini/**, .vscode/**, vibe/**
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
backend/pyrightconfig.json
backend/src/unknown_world/__init__.py
backend/src/unknown_world/main.py
backend/tests/integration/test_api.py
CLAUDE.md
frontend/package.json
frontend/src/vite-env.d.ts
frontend/tsconfig.json
frontend/tsconfig.node.json
frontend/vite.config.ts
package.json
shared/README.md
shared/schemas/_ignore-check.schema.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="frontend/tsconfig.node.json">
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2022"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "Bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",

    /* Composite for project references */
    "composite": true,
    "emitDeclarationOnly": true,
    "declaration": true,
    "declarationMap": true,

    /* Linting (ì—„ê²© ëª¨ë“œ) */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="shared/README.md">
# shared/

ì´ ë””ë ‰í† ë¦¬ëŠ” **í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°„ ê³µìœ ë˜ëŠ” ìŠ¤í‚¤ë§ˆ/íƒ€ì… ì •ì˜**ë¥¼ ìœ„í•œ SSOT(Single Source of Truth) ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤.

## ğŸ“ êµ¬ì¡°

```
shared/
â”œâ”€â”€ schemas/          # JSON Schema íŒŒì¼ (Pydantic/Zod ê²€ì¦ìš©)
â”‚   â”œâ”€â”€ turn_input.schema.json
â”‚   â”œâ”€â”€ turn_output.schema.json
â”‚   â””â”€â”€ ...
â””â”€â”€ README.md
```

## âš ï¸ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­ (RULE-007)

- **ì ˆëŒ€ë¡œ ì„œë¹„ìŠ¤ ê³„ì • í‚¤, í¬ë¦¬ë´ì…œ, ë¹„ë°€ì •ë³´ë¥¼ ì´ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜í•˜ì§€ ë§ˆì„¸ìš”.**
- í‚¤ íŒŒì¼ì€ ë°˜ë“œì‹œ `secrets/` ë””ë ‰í† ë¦¬ì—ë§Œ ë°°ì¹˜í•©ë‹ˆë‹¤ (`.gitignore`ë¡œ ì°¨ë‹¨ë¨).

## ğŸ“‹ ê´€ë ¨ ë¬¸ì„œ

- `vibe/refactors/RU-001-S1.md` - JSON ì •ì±… ë³€ê²½ ê·¼ê±°
- `vibe/ref/structured-outputs-guide.md` - ìŠ¤í‚¤ë§ˆ ì‘ì„± ê°€ì´ë“œ
- `.cursor/rules/00-core-critical.mdc` - RULE-007 (ë³´ì•ˆ ê·œì¹™)
</file>

<file path="shared/schemas/_ignore-check.schema.json">
{
  "type": "object",
  "description": "RU-001-S1 ê²€ì¦ìš© í…ŒìŠ¤íŠ¸ ìŠ¤í‚¤ë§ˆ (ì»¤ë°‹ í›„ ì‚­ì œ ê°€ëŠ¥)"
}
</file>

<file path="backend/pyrightconfig.json">
{
  "include": ["."],
  "exclude": ["**/__pycache__", ".ruff_cache", ".venv", "venv", "dist", "build", "vibe"]
}
</file>

<file path="backend/src/unknown_world/main.py">
"""Unknown World - FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸

ì´ ëª¨ë“ˆì€ Unknown World ë°±ì—”ë“œì˜ FastAPI ì•±ì„ ì •ì˜í•©ë‹ˆë‹¤.
MVP ë‹¨ê³„ì—ì„œëŠ” ê¸°ë³¸ í—¬ìŠ¤ì²´í¬ì™€ ê°œë°œìš© CORS ì„¤ì •ë§Œ í¬í•¨í•©ë‹ˆë‹¤.

ì‹¤í–‰ ë°©ë²•:
    cd backend
    uvicorn unknown_world.main:app --reload

ì°¸ì¡°:
    - vibe/tech-stack.md (ë²„ì „ SSOT)
    - vibe/prd.md (ì—ì´ì „íŠ¸í˜• ê²Œì„ ì—”ì§„ ìš”êµ¬ì‚¬í•­)
    - .cursor/rules/20-backend-orchestrator.mdc (SSE/ê²€ì¦/ë³µêµ¬ ê·œì¹™)
"""

from typing import Literal

from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from pydantic import BaseModel

from unknown_world import __version__

# =============================================================================
# FastAPI ì•± ì¸ìŠ¤í„´ìŠ¤
# =============================================================================

app = FastAPI(
    title="Unknown World API",
    description="Gemini ê¸°ë°˜ ì—ì´ì „íŠ¸í˜• ê²Œì„ ì—”ì§„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°",
    version=__version__,
    docs_url="/docs",
    redoc_url="/redoc",
)

# =============================================================================
# CORS ì„¤ì • (ê°œë°œ í™˜ê²½ìš©)
# =============================================================================
# PRD ìš”êµ¬: ë¡œì»¬ ê°œë°œì—ì„œ í”„ë¡ íŠ¸ì™€ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ CORS ê¸°ë³¸ ì •ì±… ì¤€ë¹„
# RULE-011: í”„ë¡ íŠ¸ì—”ë“œëŠ” 8001~8010 í¬íŠ¸ ì‚¬ìš©
# ì£¼ì˜: í”„ë¡œë•ì…˜ì—ì„œëŠ” MMP ë‹¨ê³„ì—ì„œ ì—„ê²©í•œ ì •ì±…ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•¨

ALLOWED_ORIGINS = [
    # í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì„œë²„ í¬íŠ¸ ë²”ìœ„ (RULE-011: 8001~8010)
    *[f"http://localhost:{port}" for port in range(8001, 8011)],
    *[f"http://127.0.0.1:{port}" for port in range(8001, 8011)],
]

app.add_middleware(
    CORSMiddleware,
    allow_origins=ALLOWED_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)


# =============================================================================
# ì‘ë‹µ ìŠ¤í‚¤ë§ˆ (Pydantic)
# =============================================================================


class HealthResponse(BaseModel):
    """í—¬ìŠ¤ì²´í¬ ì‘ë‹µ ìŠ¤í‚¤ë§ˆ.

    Attributes:
        status: ì„œë²„ ìƒíƒœ ("ok" ë˜ëŠ” "degraded")
        version: ë°±ì—”ë“œ ë²„ì „
        service: ì„œë¹„ìŠ¤ ì´ë¦„
    """

    status: Literal["ok", "degraded"]
    version: str
    service: str


# =============================================================================
# ë¼ìš°íŠ¸ ì •ì˜
# =============================================================================


@app.get("/health", response_model=HealthResponse, tags=["System"])
async def health_check() -> HealthResponse:
    """ì„œë²„ í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸.

    ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™ ì¤‘ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.
    ì´ ì—”ë“œí¬ì¸íŠ¸ëŠ” ë¡œë“œë°¸ëŸ°ì„œ, ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ, í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í™•ì¸ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

    Returns:
        HealthResponse: ì„œë²„ ìƒíƒœ ì •ë³´
    """
    return HealthResponse(
        status="ok",
        version=__version__,
        service="unknown-world-backend",
    )


@app.get("/", tags=["System"])
async def root() -> dict[str, str]:
    """ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸.

    API ì •ë³´ë¥¼ ê°„ëµíˆ ì•ˆë‚´í•©ë‹ˆë‹¤.

    Returns:
        dict: ê¸°ë³¸ ì•ˆë‚´ ë©”ì‹œì§€
    """
    return {
        "message": "Unknown World API",
        "docs": "/docs",
        "health": "/health",
    }
</file>

<file path="backend/tests/integration/test_api.py">
from fastapi.testclient import TestClient

from unknown_world.main import app

client = TestClient(app)


def test_health_check():
    """/health ì—”ë“œí¬ì¸íŠ¸ê°€ ì˜¬ë°”ë¥¸ ìŠ¤í‚¤ë§ˆì™€ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤."""
    response = client.get("/health")
    assert response.status_code == 200
    data = response.json()
    assert data["status"] == "ok"
    assert "version" in data
    assert data["service"] == "unknown-world-backend"


def test_root_endpoint():
    """ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸ê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤."""
    response = client.get("/")
    assert response.status_code == 200
    assert "message" in response.json()


def test_cors_policy():
    """RULE-011ì— ë”°ë¥¸ CORS ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤."""
    # í—ˆìš©ëœ ì˜¤ë¦¬ì§„ í…ŒìŠ¤íŠ¸ (í¬íŠ¸ 8001)
    headers = {
        "Origin": "http://localhost:8001",
        "Access-Control-Request-Method": "GET",
    }
    response = client.options("/health", headers=headers)
    assert response.status_code == 200
    assert response.headers.get("access-control-allow-origin") == "http://localhost:8001"

    # í—ˆìš©ë˜ì§€ ì•Šì€ ì˜¤ë¦¬ì§„ í…ŒìŠ¤íŠ¸ (í¬íŠ¸ 9000)
    headers = {
        "Origin": "http://localhost:9000",
        "Access-Control-Request-Method": "GET",
    }
    response = client.options("/health", headers=headers)
    # FastAPI/Starlette CORS ë¯¸ë“¤ì›¨ì–´ëŠ” í—ˆìš©ë˜ì§€ ì•Šì€ ê²½ìš° origin í—¤ë”ë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠìŒ
    assert "access-control-allow-origin" not in response.headers
</file>

<file path="frontend/src/vite-env.d.ts">
/// <reference types="vite/client" />
</file>

<file path="package.json">
{
  "name": "unknown-world",
  "version": "0.1.0",
  "private": true,
  "description": "Unknown World - Gemini ê¸°ë°˜ ì—ì´ì „íŠ¸í˜• ê²Œì„ ì—”ì§„",
  "scripts": {
    "kill": "taskkill /F /IM uvicorn.exe /T 2>nul & taskkill /F /IM node.exe /T 2>nul & echo Killed dev servers",
    "kill:port": "npx kill-port 8001 8002 8003 8004 8005 8006 8007 8008 8009 8010 8011 8012 8013 8014 8015",
    "kill:front": "npx kill-port 8001 8002 8003 8004 8005 8006 8007 8008 8009 8010",
    "kill:back": "npx kill-port 8011 8012 8013 8014 8015 8016 8017 8018 8019 8020",
    "dev:back": "cd backend && uv run uvicorn unknown_world.main:app --reload --port 8011",
    "dev:front": "cd frontend && pnpm dev"
  }
}
</file>

<file path="CLAUDE.md">
# AI ì—ì´ì „íŠ¸ ì „ì—­ ì§€ì¹¨ (Unknown World)

ì´ ë¬¸ì„œëŠ” Unknown World ë ˆí¬ì—ì„œ ì‘ì—…í•˜ëŠ” ëª¨ë“  AI ì—ì´ì „íŠ¸(Claude/Cursor í¬í•¨)ê°€ **ì¼ê´€ë˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ** ì¼í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì „ì—­ ê·œì¹™ì…ë‹ˆë‹¤.

---

## í”„ë¡œì íŠ¸ ê°œìš”

**Unknown World**ëŠ” Gemini ê¸°ë°˜ì˜ **ì—ì´ì „íŠ¸í˜•(Game Master) ì„¸ê³„ ì—”ì§„**ê³¼ ë©€í‹°ëª¨ë‹¬(í…ìŠ¤íŠ¸/ì´ë¯¸ì§€/ë¹„ì „) íŒŒì´í”„ë¼ì¸ì„ ê²°í•©í•œ **ë¬´í•œ ìƒì„± ë¡œê·¸ë¼ì´í¬ ë‚´ëŸ¬í‹°ë¸Œ ì›¹ê²Œì„**ì…ë‹ˆë‹¤.

- â€œëŒ€í™” ì•±â€ì´ ì•„ë‹ˆë¼ **ìƒíƒœë¥¼ ê°€ì§„ ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤.
- ì¶œë ¥ì€ ë‚´ëŸ¬í‹°ë¸Œ í…ìŠ¤íŠ¸ë¿ ì•„ë‹ˆë¼ **UI/ìƒíƒœ ë³€í™”/ë¹„ìš©/ì´ë¯¸ì§€ ì‘ì—…**ê¹Œì§€ í¬í•¨í•œ **êµ¬ì¡°í™” ê²°ê³¼(JSON Schema)** ì—¬ì•¼ í•©ë‹ˆë‹¤.
- ì‹¤íŒ¨/ë¶ˆì™„ì „ ì¶œë ¥ì— ëŒ€ë¹„í•´ **ê²€ì¦ + ìë™ ë³µêµ¬(Repair loop) + ì•ˆì „í•œ í´ë°±**ì„ ë‚´ì¥í•©ë‹ˆë‹¤.

---

## SSOT(ë‹¨ì¼ ì¶œì²˜) ë° ì¶©ëŒ í•´ê²° ìš°ì„ ìˆœìœ„

ë¬¸ì„œ/ê·œì¹™ì´ ì¶©ëŒí•  ë•ŒëŠ” ì•„ë˜ ìˆœì„œë¡œ ê²°ì •í•©ë‹ˆë‹¤.

1. `vibe/prd.md` (ì œí’ˆ/UX/ì„±ê³µ ì§€í‘œ/ê¸ˆì§€ì‚¬í•­)
2. `vibe/tech-stack.md` (ê¸°ìˆ  ìŠ¤íƒ/ë²„ì „/ì•„í‚¤í…ì²˜ ì„ íƒ)
3. `vibe/ref/*` (í‘œì¤€/ìŠ¤íƒ€ì¼/êµ¬ì¡°í™” ì¶œë ¥ ê°€ì´ë“œ)
4. `.cursor/rules/*.mdc` (êµ¬ì²´ì  ì‹¤í–‰ ê·œì¹™)
5. `.gemini/rules/*` (ì¡´ì¬í•˜ëŠ” ê²½ìš°ì— í•œí•´ ì°¸ê³ ; í”„ë¡œì íŠ¸ì™€ ë¶ˆì¼ì¹˜ ì‹œ ì ìš© ê¸ˆì§€)

ë¶ˆí™•ì‹¤í•˜ë©´ **ì¶”ì¸¡í•˜ì§€ ë§ê³  ì§ˆë¬¸**í•©ë‹ˆë‹¤.

---

## í•µì‹¬ ì›ì¹™ (Nonâ€‘Negotiable)

### 1) Prompt-only wrapper / Generic chatbot íšŒí”¼

- â€œí”„ë¡¬í”„íŠ¸ 1ì¥ + ì±„íŒ… UIâ€ í˜•íƒœë¥¼ ê¸ˆì§€í•©ë‹ˆë‹¤.
- ë°˜ë“œì‹œ ë‹¤ìŒì´ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤:
  - **ìƒíƒœ(State)**: WorldState / Inventory / Rules / Economy / History
  - **ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°(Orchestrator)**: ë‹¨ê³„ ì‹¤í–‰, ê²€ì¦, ì¬ì‹œë„, ë¹„ìš© ì œì–´
  - **ì•„í‹°íŒ©íŠ¸(Artifacts)**: SaveGame, ì—”ë”© ë¦¬í¬íŠ¸, ë¡œê·¸/ì´ë¯¸ì§€

### 2) ì±„íŒ… ë²„ë¸” UI ê¸ˆì§€, ê²Œì„ UI ê³ ì •

- ë©”ì‹ ì €í˜• **ì±„íŒ… ë²„ë¸” UI ê¸ˆì§€**(ì‹¬ì‚¬ì ì˜¤í•´ ë°©ì§€).
- ë°ëª¨ì—ì„œ ìµœì†Œ ë‹¤ìŒ UIëŠ” í•­ìƒ â€œê²Œì„ìŠ¤ëŸ½ê²Œâ€ ë³´ì´ë„ë¡ ê³ ì •í•©ë‹ˆë‹¤:
  - Action Deck(ë¹„ìš©/ìœ„í—˜/ë³´ìƒ í¬í•¨), Inventory(DnD), Quest/Objective, Rule Board/Mutation Timeline,
    Economy HUD(ì˜ˆìƒ/í™•ì • ë¹„ìš©), Memory Pin, Scene Canvas(í•«ìŠ¤íŒŸ), Agent Console(Plan/Queue/Badges)

### 3) êµ¬ì¡°í™” ì¶œë ¥(JSON Schema) ìš°ì„  + ì´ì¤‘ ê²€ì¦

- ëª¨ë¸ ì¶œë ¥ì€ ê¸°ë³¸ì ìœ¼ë¡œ `application/json` + JSON Schemaë¥¼ ê°•ì œí•©ë‹ˆë‹¤.
- **ì„œë²„(Pydantic) + í´ë¼ì´ì–¸íŠ¸(Zod)** ì´ì¤‘ ê²€ì¦ì„ ì „ì œë¡œ ì„¤ê³„í•©ë‹ˆë‹¤.

### 4) ê²€ì¦/ë³µêµ¬(Repair loop)ì™€ í´ë°±ì€ â€œí•„ìˆ˜ ê¸°ëŠ¥â€

- ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜/ë¹„ì¦ˆë‹ˆìŠ¤ ë£° ìœ„ë°˜/ë¹„ìš© ì´ˆê³¼/ì•ˆì „ ì°¨ë‹¨ ë“±ì€ **ìë™ ë³µêµ¬ ë£¨í”„**ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ë³µêµ¬ ì‹¤íŒ¨ ì‹œì—ë„ **í…ìŠ¤íŠ¸-only ë“± ì•ˆì „í•œ ëŒ€ì²´ ê²°ê³¼**ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### 5) ë¹„ìš©/ì§€ì—°ì€ UX/ê²Œì„ ë©”ì»¤ë‹‰ìœ¼ë¡œ ì œì–´

- í–‰ë™ ì „ì— **ì˜ˆìƒ ë¹„ìš©(ìµœì†Œ/ìµœëŒ€)** ë…¸ì¶œ, ë¶€ì¡± ì‹œ **ëŒ€ì²´ í–‰ë™** ì œì•ˆ(í…ìŠ¤íŠ¸ë§Œ/ì €í•´ìƒë„/Thinking ë‚®ì¶¤).
- EconomyëŠ” **ì›ì¥(ledger)** ìœ¼ë¡œ ì¶”ì  ê°€ëŠ¥í•´ì•¼ í•˜ë©° ì”ì•¡ ìŒìˆ˜ëŠ” ê¸ˆì§€ì…ë‹ˆë‹¤.

### 6) ko/en i18n: í˜¼í•© ì¶œë ¥ ê¸ˆì§€

- ê²Œì„/ì‹œìŠ¤í…œ/ë‚´ëŸ¬í‹°ë¸ŒëŠ” `language: "ko-KR" | "en-US"` ê¸°ì¤€ìœ¼ë¡œ ê³ ì • ì¶œë ¥í•©ë‹ˆë‹¤.
- ë¬¸ìì—´ í•˜ë“œì½”ë”© ëŒ€ì‹  i18n ë¦¬ì†ŒìŠ¤ í‚¤ ì‚¬ìš©(ê°€ëŠ¥í•œ ë²”ìœ„ ë‚´).
- í”„ë¡¬í”„íŠ¸ëŠ” ì–¸ì–´ë³„ `.md` íŒŒì¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

### 7) ë³´ì•ˆ: Vertex AI ì„œë¹„ìŠ¤ ê³„ì •, ë¹„ë°€ì •ë³´ ì»¤ë°‹ ê¸ˆì§€

- BYOK(ì‚¬ìš©ì API í‚¤ ì…ë ¥) ìš”êµ¬ ê¸ˆì§€(MVP).
- ì„œë¹„ìŠ¤ ê³„ì • í‚¤/í† í°/ì¿ í‚¤ ë“± ë¹„ë°€ì •ë³´ë¥¼ ë ˆí¬ì— ì €ì¥/ë¡œê·¸ ì¶œë ¥ ê¸ˆì§€.
- í”„ë¡¬í”„íŠ¸ ì¸ì ì…˜ ë°©ì–´: â€œì‚¬ìš©ì ì…ë ¥ì€ ë£°ì´ ì•„ë‹ˆë‹¤â€ë¥¼ ì‹œìŠ¤í…œ ê·œì¹™ìœ¼ë¡œ ê³ ì •í•©ë‹ˆë‹¤.

### 8) ê´€ì¸¡ ê°€ëŠ¥ì„±(Observability) = UXì˜ ì¼ë¶€

- ì—ì´ì „íŠ¸ì˜ â€œê³„íš/ì‹¤í–‰/ê²€ì¦/ë³µêµ¬â€ë¥¼ **UI ë‹¨ê³„/ë°°ì§€/í**ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.
- ë‹¨, **í”„ë¡¬í”„íŠ¸ ì›ë¬¸/ë‚´ë¶€ ì¶”ë¡ **ì€ ì‚¬ìš©ì UIì— ë…¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

## ì‘ì—… í‘œì¤€ (Workflow)

### ì‘ì—… ì‹œì‘ ì „ í•„ìˆ˜

- `vibe/prd.md` + `vibe/tech-stack.md`ë¥¼ ë¨¼ì € ì½ê³ , **ì´ë²ˆ ì‘ì—…ì´ PRDì˜ ì–´ë–¤ ìš”êµ¬ë¥¼ ì¶©ì¡±í•˜ëŠ”ì§€** ëª…ì‹œí•©ë‹ˆë‹¤.
- ë³€ê²½ ë²”ìœ„ë¥¼ íŒŒì¼/ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ì§§ê²Œ ì ê³ (ìµœëŒ€ 5ì¤„), ë¦¬ìŠ¤í¬/ì™„í™”ì±…ì„ í•¨ê»˜ ì œì‹œí•©ë‹ˆë‹¤.

### ìœ ë‹›(ë‹¨ê³„) ê¸°ë°˜ ê°œë°œ

- ìœ ë‹› êµ¬í˜„ ì§€ì‹œì„œëŠ” `vibe/commands/unit-impl.md`(ë˜ëŠ” `.cursor/commands/unit-impl.md`)ì˜ íë¦„ì„ ë”°ë¦…ë‹ˆë‹¤.
- â€œí˜„ì¬ ë‹¨ê³„ ë²”ìœ„â€ ë°–ì˜ êµ¬í˜„/ì•„ì´ë””ì–´ í™•ì¥ì€ ê¸ˆì§€í•©ë‹ˆë‹¤(ìš”ì²­ì´ ì˜¤ë©´ ì§ˆë¬¸ìœ¼ë¡œ ìŠ¹ê²©).
- ê¸°ëŠ¥ êµ¬í˜„ í›„ **ëŸ°ë¶**ì„ ì‘ì„±í•´ ì¬í˜„ ê°€ëŠ¥í•œ ìˆ˜ë™ ê²€ì¦ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë‚¨ê¹ë‹ˆë‹¤.

### ë¬¸ì„œ ë™ê¸°í™”

- êµ¬í˜„ ì™„ë£Œ í›„ ë¬¸ì„œ ë™ê¸°í™”ëŠ” `vibe/commands/doc-update.md` ê¸°ì¤€ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.
- Progress/Roadmap/Architecture/PRD/Tech-stack ë¬¸ì„œì˜ ë™ê¸°í™” ê·œì¹™(ìµœì‹  í•­ëª© ìµœìƒë‹¨ ë“±)ì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤.

### ë¦¬íŒ©í† ë§

- ë¦¬íŒ©í† ë§ì€ `vibe/commands/refactor-impl.md` ê¸°ì¤€ìœ¼ë¡œ **Behavior Preservation**ì„ ìµœìš°ì„ í•©ë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸

- í…ŒìŠ¤íŠ¸ ì‘ì—…ì„ ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­ë°›ì•˜ê±°ë‚˜, `test-exec` íë¦„ì„ ìˆ˜í–‰í•  ë•ŒëŠ” `vibe/commands/test-exec.md`ì˜ ì ˆì°¨(TDD, ì›ì¸ íŒë³„ í”„ë¡œí† ì½œ ë“±)ë¥¼ ë”°ë¦…ë‹ˆë‹¤.
- ê·¸ ì™¸ì˜ ì¼ë°˜ ê¸°ëŠ¥ êµ¬í˜„ì—ì„œëŠ” â€œìë™ í…ŒìŠ¤íŠ¸ ë„ì… ì—¬ë¶€â€ë¥¼ ì¶”ì¸¡í•´ ì¶”ê°€í•˜ì§€ ë§ê³ , ëŸ°ë¶/ë¦¬í”Œë ˆì´ ê¸°ë°˜ ê²€ì¦ì„ ìš°ì„ í•©ë‹ˆë‹¤.

### ì»¤ë°‹ ë©”ì‹œì§€

- ì»¤ë°‹ ë©”ì‹œì§€ëŠ” `.gemini/rules/commit-rules.md` í¬ë§·ì„ ìš°ì„  ì¤€ìˆ˜í•©ë‹ˆë‹¤(í•œê¸€, Progress ë¸”ë¡ í¬í•¨).
- ë‹¨, `vibe/roadmap.md`ê°€ ë¹„ì–´ìˆëŠ” ê²½ìš° Progress ìˆ˜ì¹˜ëŠ” ì„ì˜ë¡œ ë§Œë“¤ì§€ ë§ê³  ë³´ë¥˜/ì§ˆë¬¸í•©ë‹ˆë‹¤.

---

## í’ˆì§ˆ ê¸°ì¤€ (ì¶œì‹œ/ë°ëª¨ ê´€ì )

### Hard Gate (í•„ìˆ˜ í†µê³¼)

- **Schema OK**: TurnOutput JSONì´ ìŠ¤í‚¤ë§ˆë¥¼ í†µê³¼
- **Economy OK**: ë¹„ìš©/ì”ì•¡ ë¶ˆì¼ì¹˜ ì—†ìŒ, ì”ì•¡ ìŒìˆ˜ ê¸ˆì§€
- **Safety OK**: ì°¨ë‹¨ ì‹œ ëª…ì‹œ + ì•ˆì „í•œ ëŒ€ì²´ ê²°ê³¼ ì œê³µ
- **Consistency OK**: WorldState/Rule Board/Memory Pin ì¼ê´€ì„± ìœ ì§€

### Soft Gate (ê´€ì¸¡/íŠœë‹)

- **Streaming TTFB**: 2ì´ˆ ì´ë‚´ ëª©í‘œ(ë°ëª¨ ì²´ê° ìš°ì„ )
- ì´ë¯¸ì§€ ìƒì„±: ì„ íƒì /ì§€ì—° í—ˆìš©(Lazy loading), ì‹¤íŒ¨ ì‹œ í…ìŠ¤íŠ¸ ëŒ€ì²´

---

## ê¸ˆì§€ì‚¬í•­ (ì ˆëŒ€ ê¸ˆì§€)

- âŒ ì±„íŒ… ë²„ë¸”/ë©”ì‹ ì € UXë¡œ íšŒê·€ì‹œí‚¤ëŠ” ë³€ê²½
- âŒ êµ¬ì¡°í™” ì¶œë ¥ ì—†ì´ â€œí…ìŠ¤íŠ¸ë§Œâ€ ë°˜í™˜í•˜ëŠ” API/ë¡œì§(íŠ¹ìˆ˜í•œ ì˜ˆì™¸ë¥¼ ì œì™¸)
- âŒ í”„ë¡¬í”„íŠ¸ ì›ë¬¸/ë‚´ë¶€ ì¶”ë¡ /ë¹„ë°€ì •ë³´ë¥¼ UI ë˜ëŠ” ë¡œê·¸ë¡œ ë…¸ì¶œ
- âŒ ì„œë¹„ìŠ¤ ê³„ì • í‚¤/í† í° ë“± ë¹„ë°€ì •ë³´ë¥¼ ë ˆí¬ì— ì»¤ë°‹
- âŒ `language` ì •ì±…ì„ ë¬´ì‹œí•˜ê³  ko/en í˜¼í•© ì¶œë ¥
- âŒ ì¢Œí‘œ ê·œì•½(0~1000, bbox [ymin,xmin,ymax,xmax])ì„ ê¹¨ëŠ” ë³€ê²½
- âŒ ì¬í™” ì”ì•¡ ìŒìˆ˜/ë¹„ìš© ëˆ„ë½/ì˜ˆìƒë¹„ìš© ë¯¸í‘œê¸°

---

## ì§€ì¹¨ ìš´ì˜/ì‚¬ìš© ê°€ì´ë“œ

### Cursor ê·œì¹™ ì ìš© ë°©ì‹

- `.cursor/rules/*.mdc`ëŠ” **íŒŒì¼ íŒ¨í„´(`applyTo`)**ì— ë”°ë¼ ìë™ ì ìš©ë©ë‹ˆë‹¤.
- ê·œì¹™ì´ ë¶€ì¡±/ì¶©ëŒí•˜ë©´:
  - PRD/Tech-stack ê·¼ê±°ë¥¼ ì²¨ë¶€í•´ ê·œì¹™ì„ ì—…ë°ì´íŠ¸í•˜ê³ ,
  - íŒŒì¼ í•˜ë‚˜ê°€ 500ì¤„ì„ ë„˜ì§€ ì•Šê²Œ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.

### ì˜¨ë³´ë”©(ì‹ ê·œ í•©ë¥˜ì/ì—ì´ì „íŠ¸) 10ë¶„ ë£¨í”„

- `vibe/prd.md` 6~9ì¥(ê²Œì„ UI/ê²½ì œ/Autopilot) â†’ â€œì±„íŒ… UI ê¸ˆì§€â€ í•©ì˜
- `vibe/tech-stack.md`(ë²„ì „/ëª¨ë¸ ID ê³ ì •) í™•ì¸
- `vibe/ref/frontend-style-guide.md`ë¡œ CRT í…Œë§ˆ ê·œì¹™ ìˆ™ì§€
- `vibe/ref/structured-outputs-guide.md`ë¡œ JSON Schema ì œì•½ ì´í•´

### ì§€ì¹¨ ì—…ë°ì´íŠ¸ í”„ë¡œì„¸ìŠ¤(ê¶Œì¥)

- ë³€ê²½ í•„ìš” ì‹ í˜¸: ê·œì¹™ ì˜¤í•´/ì¤‘ë³µ/ì¶©ëŒ/500ì¤„ ì´ˆê³¼/6ê°œì›” ë¯¸ì‚¬ìš©
- ì ˆì°¨: ë¬¸ì œ ì¬í˜„ â†’ ì›ì¸(ê·œì¹™ ë¶€ì¬/ëª¨í˜¸í•¨) â†’ ê·œì¹™ ìˆ˜ì •/ë¶„ë¦¬ â†’ PRD/Tech-stackì™€ ì •í•©ì„± í™•ì¸ â†’ ì ìš© ë²”ìœ„(applyTo) ì¢íˆê¸°

---

## ì°¸ì¡° ë¬¸ì„œ

- `vibe/prd.md`
- `vibe/tech-stack.md`
- `vibe/ref/frontend-style-guide.md`
- `vibe/ref/structured-outputs-guide.md`
- `vibe/commands/*.md` / `.cursor/commands/*.md`
- `.gemini/rules/commit-rules.md`
</file>

<file path="frontend/package.json">
{
  "name": "unknown-world-frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "packageManager": "pnpm@10.27.0",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "preview": "vite preview",
    "format": "prettier . --write",
    "format:check": "prettier . --check",
    "lint": "eslint .",
    "lint:fix": "eslint . --fix",
    "typecheck": "tsc --noEmit"
  },
  "dependencies": {
    "react": "19.2.3",
    "react-dom": "19.2.3"
  },
  "devDependencies": {
    "@eslint/js": "9.39.2",
    "@types/node": "25.0.3",
    "@types/react": "19.2.7",
    "@types/react-dom": "19.2.3",
    "@vitejs/plugin-react": "5.1.2",
    "eslint": "9.39.2",
    "eslint-config-prettier": "10.1.8",
    "eslint-plugin-react": "7.37.5",
    "eslint-plugin-react-hooks": "7.0.1",
    "eslint-plugin-unused-imports": "4.3.0",
    "globals": "16.5.0",
    "prettier": "3.7.4",
    "typescript": "5.9.3",
    "typescript-eslint": "8.51.0",
    "vite": "7.3.0"
  }
}
</file>

<file path="frontend/tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "Bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting (ì—„ê²© ëª¨ë“œ) */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
</file>

<file path="frontend/vite.config.ts">
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    port: 8001, // RULE-011: í”„ë¡ íŠ¸ì—”ë“œëŠ” 8001~8010 ì‚¬ìš©
    strictPort: false, // ì¶©ëŒ ì‹œ 8002~8010 ìë™ í• ë‹¹ í—ˆìš©
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
});
</file>

<file path="backend/src/unknown_world/__init__.py">
"""Unknown World - Backend Package

This is the main package for the Unknown World backend.
Architecture: FastAPI + Pydantic + SSE streaming

Reference:
- vibe/tech-stack.md (Python 3.14, FastAPI 0.128.0, Pydantic 2.12.5)
- vibe/prd.md (Agent-based Game Master Engine)
"""

__version__ = "0.1.0"
</file>

</files>
