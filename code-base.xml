This file is a merged representation of a subset of the codebase, containing specifically included files and files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: **/*.{ts,tsx,js,jsx,json,py,toml,yaml}
- Files matching these patterns are excluded: .claude/**, .cursor/**, .clude/**, .gemini/**, .vscode/**, vibe/**, frontend/node_modules/**, backend/.venv/**, **/dist/**, **/.pytest_cache/**, **/.ruff_cache/**
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
backend/pyproject.toml
backend/src/unknown_world/__init__.py
backend/src/unknown_world/main.py
backend/tests/integration/test_api.py
frontend/package.json
frontend/src/App.tsx
frontend/src/main.tsx
frontend/src/vite-env.d.ts
frontend/tsconfig.json
frontend/tsconfig.node.json
frontend/vite.config.ts
package.json
shared/schemas/turn/turn_input.schema.json
shared/schemas/turn/turn_output.schema.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="backend/tests/integration/test_api.py">
from fastapi.testclient import TestClient

from unknown_world.main import app

client = TestClient(app)


def test_health_check():
    """/health 엔드포인트가 올바른 스키마와 상태를 반환하는지 테스트합니다."""
    response = client.get("/health")
    assert response.status_code == 200
    data = response.json()
    assert data["status"] == "ok"
    assert "version" in data
    assert data["service"] == "unknown-world-backend"


def test_root_endpoint():
    """루트 엔드포인트가 정상 작동하는지 테스트합니다."""
    response = client.get("/")
    assert response.status_code == 200
    assert "message" in response.json()


def test_cors_policy():
    """RULE-011에 따른 CORS 정책이 올바르게 설정되었는지 테스트합니다."""
    # 허용된 오리진 테스트 (포트 8001)
    headers = {
        "Origin": "http://localhost:8001",
        "Access-Control-Request-Method": "GET",
    }
    response = client.options("/health", headers=headers)
    assert response.status_code == 200
    assert response.headers.get("access-control-allow-origin") == "http://localhost:8001"

    # 허용되지 않은 오리진 테스트 (포트 9000)
    headers = {
        "Origin": "http://localhost:9000",
        "Access-Control-Request-Method": "GET",
    }
    response = client.options("/health", headers=headers)
    # FastAPI/Starlette CORS 미들웨어는 허용되지 않은 경우 origin 헤더를 반환하지 않음
    assert "access-control-allow-origin" not in response.headers
</file>

<file path="frontend/src/main.tsx">
import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import './style.css';
import App from './App.tsx';

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
);
</file>

<file path="frontend/src/vite-env.d.ts">
/// <reference types="vite/client" />
</file>

<file path="frontend/tsconfig.node.json">
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2022"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "Bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",

    /* Composite for project references */
    "composite": true,
    "emitDeclarationOnly": true,
    "declaration": true,
    "declarationMap": true,

    /* Linting (엄격 모드) */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="shared/schemas/turn/turn_input.schema.json">
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://unknown-world.dev/schemas/turn/turn_input.schema.json",
  "title": "TurnInput",
  "description": "Client → Server 턴 요청 스키마 (MVP). PRD 8.7절 기반.",
  "type": "object",
  "properties": {
    "language": {
      "type": "string",
      "enum": ["ko-KR", "en-US"],
      "description": "게임 언어 설정 (ko-KR 또는 en-US)"
    },
    "text": {
      "type": "string",
      "description": "사용자 입력 (자연어)"
    },
    "click": {
      "type": ["object", "null"],
      "description": "클릭된 오브젝트 정보 (선택)",
      "properties": {
        "object_id": {
          "type": "string",
          "description": "클릭된 오브젝트 ID"
        },
        "box_2d": {
          "type": ["array", "null"],
          "description": "bbox [ymin, xmin, ymax, xmax] (0~1000 정규화)",
          "items": {
            "type": "integer",
            "minimum": 0,
            "maximum": 1000
          },
          "minItems": 4,
          "maxItems": 4
        }
      },
      "required": ["object_id"]
    },
    "client": {
      "type": "object",
      "description": "클라이언트 환경 정보",
      "properties": {
        "viewport_w": {
          "type": "integer",
          "description": "뷰포트 너비 (px)"
        },
        "viewport_h": {
          "type": "integer",
          "description": "뷰포트 높이 (px)"
        },
        "theme": {
          "type": "string",
          "enum": ["dark", "light"],
          "description": "테마 설정"
        }
      },
      "required": ["viewport_w", "viewport_h", "theme"]
    },
    "economy_snapshot": {
      "type": "object",
      "description": "현재 재화 상태 스냅샷",
      "properties": {
        "signal": {
          "type": "integer",
          "minimum": 0,
          "description": "Signal 재화 잔액"
        },
        "memory_shard": {
          "type": "integer",
          "minimum": 0,
          "description": "Memory Shard 재화 잔액"
        }
      },
      "required": ["signal", "memory_shard"]
    }
  },
  "required": ["language", "text", "client", "economy_snapshot"],
  "additionalProperties": false
}
</file>

<file path="shared/schemas/turn/turn_output.schema.json">
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://unknown-world.dev/schemas/turn/turn_output.schema.json",
  "title": "TurnOutput",
  "description": "Server → Client 턴 응답 스키마 (MVP). PRD 8.7절 기반. Gemini Structured Output 호환.",
  "type": "object",
  "properties": {
    "language": {
      "type": "string",
      "enum": ["ko-KR", "en-US"],
      "description": "응답 언어 (TurnInput.language와 동일해야 함)"
    },
    "narrative": {
      "type": "string",
      "description": "내러티브 텍스트 (표시용)"
    },
    "ui": {
      "type": "object",
      "description": "UI 요소 (선택지, 오브젝트)",
      "properties": {
        "choices": {
          "type": "array",
          "description": "버튼형 선택지 목록",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "선택지 고유 ID"
              },
              "label": {
                "type": "string",
                "description": "선택지 라벨"
              },
              "cost": {
                "type": "object",
                "description": "예상 비용",
                "properties": {
                  "signal": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "memory_shard": {
                    "type": "integer",
                    "minimum": 0
                  }
                },
                "required": ["signal", "memory_shard"]
              },
              "hint": {
                "type": ["string", "null"],
                "description": "예상 결과 힌트"
              }
            },
            "required": ["id", "label", "cost"]
          }
        },
        "objects": {
          "type": "array",
          "description": "클릭 가능한 오브젝트 목록",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "오브젝트 고유 ID"
              },
              "label": {
                "type": "string",
                "description": "오브젝트 라벨"
              },
              "box_2d": {
                "type": "array",
                "description": "bbox [ymin, xmin, ymax, xmax] (0~1000 정규화, RULE-009)",
                "items": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 1000
                },
                "minItems": 4,
                "maxItems": 4
              },
              "interaction_hint": {
                "type": ["string", "null"],
                "description": "상호작용 힌트"
              }
            },
            "required": ["id", "label", "box_2d"]
          }
        }
      },
      "required": ["choices", "objects"]
    },
    "world": {
      "type": "object",
      "description": "월드 상태 변경 사항",
      "properties": {
        "delta": {
          "type": "object",
          "description": "이번 턴 변경 사항",
          "properties": {
            "rules": {
              "type": ["array", "null"],
              "description": "룰 변경 목록",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "action": {
                    "type": "string",
                    "enum": ["added", "modified", "removed"]
                  }
                },
                "required": ["id", "name", "action"]
              }
            },
            "inventory": {
              "type": ["array", "null"],
              "description": "인벤토리 변경 목록",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "action": {
                    "type": "string",
                    "enum": ["added", "removed", "used"]
                  },
                  "quantity": {
                    "type": "integer"
                  }
                },
                "required": ["id", "name", "action"]
              }
            }
          }
        },
        "memory_pins": {
          "type": "array",
          "description": "중요 설정 고정 후보 목록",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              },
              "content": {
                "type": "string"
              },
              "pinned": {
                "type": "boolean"
              }
            },
            "required": ["id", "content", "pinned"]
          }
        }
      },
      "required": ["delta", "memory_pins"]
    },
    "render": {
      "type": ["object", "null"],
      "description": "렌더링 작업 (선택적)",
      "properties": {
        "image_job": {
          "type": ["object", "null"],
          "description": "이미지 생성 작업",
          "properties": {
            "should_generate": {
              "type": "boolean",
              "description": "이미지 생성 여부"
            },
            "model": {
              "type": "string",
              "enum": ["gemini-3-pro-image-preview"],
              "description": "이미지 모델 ID (RULE-010: 고정)"
            },
            "aspect_ratio": {
              "type": "string",
              "enum": ["1:1", "16:9", "9:16", "4:3", "3:4"],
              "description": "이미지 비율"
            },
            "image_size": {
              "type": "string",
              "enum": ["1K", "2K", "4K"],
              "description": "이미지 해상도"
            },
            "prompt": {
              "type": "string",
              "description": "이미지 생성 프롬프트"
            },
            "reference_images": {
              "type": ["array", "null"],
              "description": "참조 이미지 URI 목록",
              "items": {
                "type": "string"
              }
            }
          },
          "required": ["should_generate"]
        }
      }
    },
    "economy": {
      "type": "object",
      "description": "재화 정보 (RULE-005: 예상 비용/잔액 필수)",
      "properties": {
        "cost": {
          "type": "object",
          "description": "이번 턴 소모 비용",
          "properties": {
            "signal": {
              "type": "integer",
              "minimum": 0
            },
            "memory_shard": {
              "type": "integer",
              "minimum": 0
            }
          },
          "required": ["signal", "memory_shard"]
        },
        "balance_after": {
          "type": "object",
          "description": "턴 후 잔액 (음수 금지, RULE-005)",
          "properties": {
            "signal": {
              "type": "integer",
              "minimum": 0
            },
            "memory_shard": {
              "type": "integer",
              "minimum": 0
            }
          },
          "required": ["signal", "memory_shard"]
        }
      },
      "required": ["cost", "balance_after"]
    },
    "safety": {
      "type": "object",
      "description": "안전 정책 상태",
      "properties": {
        "blocked": {
          "type": "boolean",
          "description": "차단 여부"
        },
        "message": {
          "type": ["string", "null"],
          "description": "차단 시 메시지"
        }
      },
      "required": ["blocked"]
    }
  },
  "required": ["language", "narrative", "ui", "world", "economy", "safety"],
  "additionalProperties": false
}
</file>

<file path="backend/src/unknown_world/main.py">
"""Unknown World - FastAPI 애플리케이션 엔트리포인트

이 모듈은 Unknown World 백엔드의 FastAPI 앱을 정의합니다.
MVP 단계에서는 기본 헬스체크와 개발용 CORS 설정만 포함합니다.

실행 방법:
    cd backend
    uv sync
    uv run uvicorn unknown_world.main:app --reload --port 8011

참조:
    - vibe/tech-stack.md (버전 SSOT)
    - vibe/prd.md (에이전트형 게임 엔진 요구사항)
    - .cursor/rules/20-backend-orchestrator.mdc (SSE/검증/복구 규칙)
"""

from typing import Literal

from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from pydantic import BaseModel

from unknown_world import __version__

# =============================================================================
# FastAPI 앱 인스턴스
# =============================================================================

app = FastAPI(
    title="Unknown World API",
    description="Gemini 기반 에이전트형 게임 엔진 오케스트레이터",
    version=__version__,
    docs_url="/docs",
    redoc_url="/redoc",
)

# =============================================================================
# CORS 설정 (개발 환경용)
# =============================================================================
# PRD 요구: 로컬 개발에서 프론트와 통신할 수 있도록 CORS 기본 정책 준비
# RULE-011: 프론트엔드는 8001~8010 포트 사용
# 주의: 프로덕션에서는 MMP 단계에서 엄격한 정책으로 변경해야 함

ALLOWED_ORIGINS = [
    # 프론트엔드 개발 서버 포트 범위 (RULE-011: 8001~8010)
    *[f"http://localhost:{port}" for port in range(8001, 8011)],
    *[f"http://127.0.0.1:{port}" for port in range(8001, 8011)],
]

app.add_middleware(
    CORSMiddleware,
    allow_origins=ALLOWED_ORIGINS,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)


# =============================================================================
# 응답 스키마 (Pydantic)
# =============================================================================


class HealthResponse(BaseModel):
    """헬스체크 응답 스키마.

    Attributes:
        status: 서버 상태 ("ok" 또는 "degraded")
        version: 백엔드 버전
        service: 서비스 이름
    """

    status: Literal["ok", "degraded"]
    version: str
    service: str


# =============================================================================
# 라우트 정의
# =============================================================================


@app.get("/health", response_model=HealthResponse, tags=["System"])
async def health_check() -> HealthResponse:
    """서버 헬스체크 엔드포인트.

    서버가 정상적으로 작동 중인지 확인합니다.
    이 엔드포인트는 로드밸런서, 모니터링 시스템, 클라이언트 연결 확인에 사용됩니다.

    Returns:
        HealthResponse: 서버 상태 정보
    """
    return HealthResponse(
        status="ok",
        version=__version__,
        service="unknown-world-backend",
    )


@app.get("/", tags=["System"])
async def root() -> dict[str, str]:
    """루트 엔드포인트.

    API 정보를 간략히 안내합니다.

    Returns:
        dict: 기본 안내 메시지
    """
    return {
        "message": "Unknown World API",
        "docs": "/docs",
        "health": "/health",
    }
</file>

<file path="frontend/src/App.tsx">
/**
 * Unknown World - 메인 게임 UI 레이아웃
 *
 * RULE-002 준수: 채팅 버블 UI 금지
 * - 내러티브는 "채팅"이 아니라 "게임 로그/내러티브 피드" 형태
 * - 고정 패널: Scene Canvas, Action Deck, Inventory, Quest,
 *   Rule Board, Economy HUD, Agent Console, Scanner Slot
 *
 * @see vibe/ref/frontend-style-guide.md
 * @see vibe/prd.md 6.7/6.8/9장
 */

/**
 * 패널 컴포넌트 - 공통 패널 레이아웃
 */
interface PanelProps {
  title: string;
  children?: React.ReactNode;
  className?: string;
}

function Panel({ title, children, className = '' }: PanelProps) {
  return (
    <div className={`panel ${className}`}>
      <div className="panel-header">
        <span className="panel-title">{title}</span>
      </div>
      <div className="panel-content">
        {children || <p className="panel-placeholder">[ 준비 중 ]</p>}
      </div>
    </div>
  );
}

/**
 * 내러티브 피드 - 게임 로그 형태 (채팅 버블 아님)
 * RULE-002: 좌/우 버블 대신 턴 타임라인으로 배치
 */
function NarrativeFeed() {
  const sampleEntries = [
    { turn: 1, text: '미지의 세계에 오신 것을 환영합니다...' },
    { turn: 2, text: '당신은 어둠 속에서 깨어났습니다.' },
    { turn: 3, text: '희미한 녹색 빛이 주변을 비추고 있습니다.' },
  ];

  return (
    <div className="narrative-feed">
      {sampleEntries.map((entry) => (
        <div key={entry.turn} className="narrative-entry">
          <span className="narrative-timestamp">[TURN {entry.turn}]</span>
          <span className="narrative-text">{entry.text}</span>
        </div>
      ))}
    </div>
  );
}

/**
 * 액션 덱 - 선택 가능한 행동 카드들
 * PRD: 비용/위험/보상 표시
 */
function ActionDeck() {
  const sampleActions = [
    { id: 1, title: '탐색하기', cost: 1, risk: '낮음' },
    { id: 2, title: '조사하기', cost: 2, risk: '중간' },
    { id: 3, title: '대화하기', cost: 1, risk: '없음' },
    { id: 4, title: '이동하기', cost: 1, risk: '낮음' },
  ];

  return (
    <div className="action-deck">
      {sampleActions.map((action) => (
        <div key={action.id} className="action-card">
          <div className="action-card-title">{action.title}</div>
          <div className="action-card-cost">
            ⚡ {action.cost} Signal | ⚠ {action.risk}
          </div>
        </div>
      ))}
    </div>
  );
}

/**
 * 헤더 - 타이틀, 상태, 재화 HUD
 */
function GameHeader() {
  return (
    <header className="game-header">
      <h1 className="game-title glitch" data-text="UNKNOWN WORLD">
        UNKNOWN WORLD
      </h1>
      <div className="header-controls">
        <div className="economy-hud">
          <span className="signal-icon">⚡</span>
          <span>Signal: 100</span>
        </div>
        <div className="connection-status">
          <span className="status-indicator" />
          <span>ONLINE</span>
        </div>
      </div>
    </header>
  );
}

/**
 * 메인 App 컴포넌트
 * CSS Grid 기반 고정 레이아웃
 */
function App() {
  return (
    <>
      {/* CRT 스캔라인 오버레이 */}
      <div className="crt-overlay" aria-hidden="true" />

      {/* 게임 레이아웃 */}
      <div className="game-container">
        {/* Header: 타이틀/상태/재화 */}
        <GameHeader />

        {/* Sidebar Left: Inventory / Quest / Rule Board */}
        <aside className="sidebar-left">
          <Panel title="Inventory" className="flex-1">
            <p className="panel-placeholder">[ 드래그 앤 드롭 영역 ]</p>
          </Panel>
          <Panel title="Quest">
            <p className="panel-placeholder">[ 목표/퀘스트 목록 ]</p>
          </Panel>
          <Panel title="Rule Board">
            <p className="panel-placeholder">[ 월드 규칙/변형 타임라인 ]</p>
          </Panel>
        </aside>

        {/* Center: Scene Canvas + Narrative Feed */}
        <main className="game-center">
          <div className="scene-canvas">
            <div className="scene-placeholder">
              <p>[ Scene Canvas ]</p>
              <p className="text-dim">이미지 + 핫스팟 오버레이 영역</p>
            </div>
          </div>
          <NarrativeFeed />
        </main>

        {/* Sidebar Right: Agent Console / Memory Pin / Scanner */}
        <aside className="sidebar-right">
          <Panel title="Agent Console" className="flex-1">
            <p className="panel-placeholder">
              [ Plan / Queue / Badges ]
              <br />
              Parse → Validate → Plan → Resolve
            </p>
          </Panel>
          <Panel title="Memory Pin">
            <p className="panel-placeholder">[ 고정된 기억/단서 ]</p>
          </Panel>
          <Panel title="Scanner">
            <p className="panel-placeholder">[ 이미지 업로드 슬롯 ]</p>
          </Panel>
        </aside>

        {/* Footer: Action Deck + Command Input */}
        <footer className="game-footer">
          <ActionDeck />
          <div className="command-input-area">
            <span className="command-prompt">&gt;</span>
            <input
              type="text"
              className="command-input"
              placeholder="명령을 입력하세요..."
              aria-label="게임 명령 입력"
            />
            <button type="button">EXECUTE</button>
          </div>
        </footer>
      </div>
    </>
  );
}

export default App;
</file>

<file path="frontend/tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "Bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting (엄격 모드) */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
</file>

<file path="backend/src/unknown_world/__init__.py">
"""Unknown World - Backend Package

This is the main package for the Unknown World backend.
Architecture: FastAPI + Pydantic + SSE streaming

Reference:
- vibe/tech-stack.md (Python 3.14, FastAPI 0.128.0, Pydantic 2.12.5)
- vibe/prd.md (Agent-based Game Master Engine)
"""

__version__ = "0.1.0"
</file>

<file path="frontend/package.json">
{
  "name": "unknown-world-frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "packageManager": "pnpm@10.27.0",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "preview": "vite preview",
    "format": "prettier . --write",
    "format:check": "prettier . --check",
    "lint": "eslint .",
    "lint:fix": "eslint . --fix",
    "typecheck": "tsc --noEmit"
  },
  "dependencies": {
    "react": "19.2.3",
    "react-dom": "19.2.3",
    "zustand": "5.0.9",
    "zod": "4.3.4",
    "@dnd-kit/core": "6.3.1",
    "@dnd-kit/sortable": "10.0.0",
    "i18next": "25.7.3",
    "react-i18next": "16.5.1"
  },
  "devDependencies": {
    "@eslint/js": "9.39.2",
    "@types/node": "25.0.3",
    "@types/react": "19.2.7",
    "@types/react-dom": "19.2.3",
    "@vitejs/plugin-react": "5.1.2",
    "eslint": "9.39.2",
    "eslint-config-prettier": "10.1.8",
    "eslint-plugin-react": "7.37.5",
    "eslint-plugin-react-hooks": "7.0.1",
    "eslint-plugin-unused-imports": "4.3.0",
    "globals": "16.5.0",
    "prettier": "3.7.4",
    "typescript": "5.9.3",
    "typescript-eslint": "8.51.0",
    "vite": "7.3.0"
  }
}
</file>

<file path="frontend/vite.config.ts">
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    port: 8001, // RULE-011: 프론트엔드는 8001~8010 사용
    strictPort: true, // 포트 충돌 시 fail-fast (대역 밖 이동 방지)
    // 충돌 시: pnpm -C frontend dev --port 8002 (8002~8010 중 선택)
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
});
</file>

<file path="backend/pyproject.toml">
# backend/pyproject.toml
# SSOT: vibe/tech-stack.md (버전 기준일: 2026-01-01)

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "unknown-world-backend"
version = "0.1.0"
description = "Unknown World Backend - Gemini 기반 에이전트형 게임 엔진"
requires-python = ">=3.14"
dependencies = [
    "fastapi==0.128.0",
    "uvicorn[standard]==0.40.0",
    "pydantic==2.12.5",
    "google-genai==1.56.0",
    "google-cloud-aiplatform==1.132.0",
    "google-cloud-storage==3.7.0",
]

[tool.hatch.build.targets.wheel]
packages = ["src/unknown_world"]

[dependency-groups]
dev = [
    "ruff==0.14.10",
    "pyright==1.1.407",
    "pytest==9.0.2",
    "httpx==0.28.1",
]

[tool.ruff]
line-length = 100
target-version = "py314"
extend-exclude = [
    "__pycache__",
    ".ruff_cache",
    ".venv",
    "venv",
    "dist",
    "build",
]

[tool.ruff.lint]
select = [
    "E",      # pycodestyle errors
    "W",      # pycodestyle warnings
    "F",      # pyflakes
    "I",      # isort
    "UP",     # pyupgrade
    "B",      # flake8-bugbear
    "C4",     # flake8-comprehensions
    "SIM",    # flake8-simplify
]
ignore = [
    "E501",   # line too long (handled by formatter)
]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"

[tool.pyright]
pythonVersion = "3.14"
typeCheckingMode = "strict"
include = ["src"]
</file>

<file path="package.json">
{
  "name": "unknown-world",
  "version": "0.1.0",
  "private": true,
  "description": "Unknown World - Gemini 기반 에이전트형 게임 엔진",
  "packageManager": "pnpm@10.27.0",
  "engines": {
    "node": "24.12.0"
  },
  "scripts": {
    "kill": "taskkill /F /IM uvicorn.exe /T 2>nul & taskkill /F /IM node.exe /T 2>nul & echo Killed dev servers",
    "kill:port": "npx kill-port 8001 8002 8003 8004 8005 8006 8007 8008 8009 8010 8011 8012 8013 8014 8015 8016 8017 8018 8019 8020",
    "kill:front": "npx kill-port 8001 8002 8003 8004 8005 8006 8007 8008 8009 8010",
    "kill:back": "npx kill-port 8011 8012 8013 8014 8015 8016 8017 8018 8019 8020",
    "dev:back": "cd backend && uv run uvicorn unknown_world.main:app --reload --port 8011",
    "dev:front": "pnpm -C frontend dev"
  }
}
</file>

</files>
