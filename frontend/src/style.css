/**
 * Unknown World - CRT 테마 스타일시트 (단일 CSS SSOT)
 *
 * RULE-002 준수: 채팅 버블 UI 금지 - 게임 로그/HUD 형태만 허용
 * Frontend Style Guide 준수: CRT 터미널 레트로 미학
 *
 * @see vibe/ref/frontend-style-guide.md
 */

/* ============================================
   1. CRT 테마 토큰 (CSS Variables)
   ============================================ */
:root {
  /* 기본 색상 - CRT 인광 녹색 테마 */
  --bg-color: #0d0d0d; /* 배경: 거의 순수한 검정 */
  --text-color: #33ff00; /* 주 텍스트: 인광 녹색 (CRT 그린) */
  --text-dim: #1a8000; /* 보조 텍스트: 어두운 녹색 */
  --accent-color: #ff00ff; /* 강조색: 마젠타 */
  --border-color: #33ff00; /* 테두리: 인광 녹색 */
  --panel-bg: rgba(0, 20, 0, 0.3); /* 패널 배경: 투명 녹색 */
  --warning-color: #ffaa00; /* 경고: 주황색 */
  --error-color: #ff3333; /* 에러: 붉은색 */

  /* CRT 효과 */
  --crt-scanline: rgba(18, 16, 16, 0.1);
  --crt-flicker: 0.03;
  --glow-intensity: 5px;
  --crt-flicker-opacity-min: 0.97;
  --crt-flicker-opacity-max: 1;

  /* 타이포그래피 */
  --font-main: 'NeoDunggeunmo', 'VT323', monospace;
  --font-micro-en:
    'Share Tech Mono', 'Consolas', monospace; /* U-037: 영문 마이크로 텍스트 가독성 */
  --font-size-base: 16px;
  --font-size-lg: 1.2rem;
  --font-size-xl: 1.5rem;
  --font-size-2xl: 2rem;
  --line-height-base: 1.5;

  /* 마이크로 텍스트 (U-028: 가독성 상향) */
  --font-size-xs: 0.75rem; /* 12px at 1.0 scale - 최소 마이크로 텍스트 */
  --font-size-sm: 0.875rem; /* 14px at 1.0 scale - 작은 텍스트 */

  /* UI 스케일 (U-028: 전역 스케일 조절) */
  --ui-scale-factor: 1;

  /* 레이아웃 */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  --border-radius: 4px;
  --max-width: 1400px;

  /* 그리드 레이아웃 */
  --header-height: 60px;
  --footer-height: 120px;
  --sidebar-width: 320px;
}

/* ============================================
   2. 폰트 정의
   ============================================ */
@font-face {
  font-family: 'NeoDunggeunmo';
  src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/NeoDunggeunmo.woff')
    format('woff');
  font-weight: normal;
  font-display: swap;
}

/* ============================================
   3. Reset & Base
   ============================================ */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  /* U-028: UI 스케일 적용 - font-size가 스케일 팩터에 반응 */
  font-size: calc(var(--font-size-base) * var(--ui-scale-factor));
  line-height: var(--line-height-base);
}

body {
  font-family: var(--font-main);
  background-color: var(--bg-color);
  color: var(--text-color);
  min-height: 100vh;
  overflow: hidden;
  text-shadow: 0 0 var(--glow-intensity) var(--text-dim);
}

#root {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* ============================================
   4. CRT 오버레이 효과
   ============================================ */

/* 스캔라인 오버레이 */
.crt-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
  background-size: 100% 4px;
  pointer-events: none;
  z-index: 9999; /* 최상단 배치 (로고/헤더 등 일반 요소 덮음) */
  animation: flicker 0.15s infinite;
}

/* 
 * U-037: 중요도 기반 레이어링
 * - Critical: 오버레이(9999) 위로 뚫고 올라와 선명하게 표시
 * - Ambient: 오버레이 아래에 위치하여 CRT 분위기 적용
 */

/* Critical 보호 레이어 (오버레이 위) */
[data-ui-importance='critical'],
.ui-critical,
.phase-item,
.currency-value,
.action-card-cost,
.agent-error {
  position: relative;
  z-index: 10000;
}

/* Ambient 분위기 레이어 (오버레이 아래) */
.game-title,
.panel-header,
.action-card-title {
  position: relative;
  z-index: 1; /* 9999 오버레이보다 아래 */
}

#root {
  min-height: 100vh;
}

/* 플리커(깜빡임) 애니메이션 */
@keyframes flicker {
  0% {
    opacity: 0.97;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0.98;
  }
}

/* 글리치 효과 (타이틀용) */
.glitch {
  position: relative;
}

.glitch::before,
.glitch::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.glitch::before {
  left: 2px;
  text-shadow: -1px 0 #ff0000;
  clip-path: inset(0 0 0 0);
  animation: glitch-anim-1 5s infinite linear alternate-reverse;
}

.glitch::after {
  left: -2px;
  text-shadow: -1px 0 #0000ff;
  clip-path: inset(0 0 0 0);
  animation: glitch-anim-2 5s infinite linear alternate-reverse;
}

@keyframes glitch-anim-1 {
  0%,
  100% {
    clip-path: inset(0 0 95% 0);
  }
  20% {
    clip-path: inset(30% 0 50% 0);
  }
  40% {
    clip-path: inset(10% 0 70% 0);
  }
  60% {
    clip-path: inset(80% 0 5% 0);
  }
  80% {
    clip-path: inset(45% 0 35% 0);
  }
}

@keyframes glitch-anim-2 {
  0%,
  100% {
    clip-path: inset(95% 0 0 0);
  }
  20% {
    clip-path: inset(50% 0 30% 0);
  }
  40% {
    clip-path: inset(70% 0 10% 0);
  }
  60% {
    clip-path: inset(5% 0 80% 0);
  }
  80% {
    clip-path: inset(35% 0 45% 0);
  }
}

/* ============================================
   5. 게임 레이아웃 (CSS Grid)
   - RULE-002: 채팅 UI가 아닌 게임 UI 고정
   ============================================ */

.game-container {
  display: grid;
  grid-template-areas:
    'header header header'
    'sidebar-left center sidebar-right'
    'footer footer footer';
  grid-template-columns: var(--sidebar-width) 1fr var(--sidebar-width);
  grid-template-rows: var(--header-height) 1fr var(--footer-height);
  height: 100vh;
  width: 100%;
  max-width: var(--max-width);
  margin: 0 auto;
  padding: var(--spacing-sm);
  gap: var(--spacing-sm);
}

/* ============================================
   6. Header 영역
   - Title, Language Toggle, Theme Toggle,
     Connection Status, Economy HUD
   ============================================ */

.game-header {
  grid-area: header;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 var(--spacing-md);
  border: 1px solid var(--border-color);
  background-color: var(--panel-bg);
  box-shadow:
    inset 0 0 20px rgba(0, 0, 0, 0.5),
    0 0 10px var(--text-dim);
}

.game-title {
  font-size: var(--font-size-2xl);
  color: var(--text-color);
  text-transform: uppercase;
  letter-spacing: 4px;
}

.header-controls {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
}

.economy-hud {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xs) var(--spacing-sm);
  border: 1px solid var(--text-dim);
  background-color: rgba(0, 0, 0, 0.5);
}

.economy-hud .signal-icon {
  color: var(--accent-color);
}

.connection-status {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  font-size: 0.875rem;
}

.status-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: var(--text-color);
  box-shadow: 0 0 6px var(--text-color);
  animation: pulse 2s infinite;
}

.status-indicator.offline {
  background-color: var(--error-color);
  box-shadow: 0 0 6px var(--error-color);
  animation: none;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* ============================================
   7. Sidebar (Left) 영역
   - Inventory, Quest/Objective, Rule Board
   ============================================ */

.sidebar-left {
  grid-area: sidebar-left;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  overflow-y: auto;
}

/* ============================================
   8. Center 영역
   - Scene Canvas, Narrative Feed (로그 형태)
   ============================================ */

.game-center {
  grid-area: center;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  overflow: hidden;
}

.scene-canvas {
  flex: 1;
  border: 1px solid var(--border-color);
  background-color: var(--panel-bg);
  background-image: url('/ui/placeholders/scene-placeholder-default.png');
  background-size: cover;
  background-position: center;
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  min-height: 200px;
}

.scene-placeholder {
  color: var(--text-color);
  font-size: var(--font-size-lg);
  text-align: center;
  background-color: rgba(0, 0, 0, 0.6);
  padding: var(--spacing-md);
  border: 1px solid var(--text-dim);
  text-shadow: 0 0 10px var(--text-color);
}

/* U-031: Scene Canvas 상태별 placeholder 스타일 */
.scene-status-label {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-sm);
  font-size: var(--font-size-lg);
  text-transform: uppercase;
  letter-spacing: 2px;
}

.scene-status-emoji {
  font-size: 1.5em;
}

.scene-status-message {
  margin-top: var(--spacing-xs);
  font-size: var(--font-size-sm);
}

/* 상태별 배경 이미지 적용 */
.scene-canvas.scene-status-loading,
.scene-canvas.scene-status-offline,
.scene-canvas.scene-status-blocked,
.scene-canvas.scene-status-low_signal,
.scene-canvas.scene-status-default {
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* 로딩 상태: 펄스 애니메이션 */
.scene-canvas.scene-status-loading .scene-placeholder {
  animation: loading-pulse 2s ease-in-out infinite;
}

@keyframes loading-pulse {
  0%,
  100% {
    opacity: 0.7;
  }
  50% {
    opacity: 1;
  }
}

/* 오프라인 상태: 정적 노이즈 효과 */
.scene-canvas.scene-status-offline {
  position: relative;
}

.scene-canvas.scene-status-offline::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.1) 2px,
    rgba(0, 0, 0, 0.1) 4px
  );
  pointer-events: none;
  animation: static-noise 0.5s steps(5) infinite;
}

@keyframes static-noise {
  0%,
  100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.5;
  }
}

/* 차단 상태: 경고색 테두리 */
.scene-canvas.scene-status-blocked {
  border-color: var(--warning-color);
  box-shadow: inset 0 0 30px rgba(255, 170, 0, 0.2);
}

.scene-canvas.scene-status-blocked .scene-status-label {
  color: var(--warning-color);
}

/* 저신호 상태: 희미한 표시 */
.scene-canvas.scene-status-low_signal .scene-placeholder {
  opacity: 0.8;
}

.scene-canvas.scene-status-low_signal .scene-status-label {
  color: var(--text-dim);
}

/* 정상 장면 표시 */
.scene-canvas.scene-active {
  background-color: transparent;
}

.scene-canvas .scene-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ============================================
   8.1 핫스팟 오버레이 (U-010)
   - RULE-009: 좌표 규약 (0~1000 정규화)
   - 클릭 가능한 오브젝트 영역 표시
   ============================================ */

/* 핫스팟 레이어 (장면 이미지 위 오버레이) */
.hotspot-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 10;
}

/* 개별 핫스팟 오버레이 */
.hotspot-overlay {
  position: absolute;
  pointer-events: auto;
  cursor: pointer;
  border: 2px solid var(--text-color);
  border-radius: 2px;
  background-color: rgba(51, 255, 0, 0.05);
  box-shadow:
    0 0 8px rgba(51, 255, 0, 0.3),
    inset 0 0 4px rgba(51, 255, 0, 0.1);
  transition:
    border-color 0.2s,
    background-color 0.2s,
    box-shadow 0.2s,
    transform 0.15s;
}

/* 핫스팟 호버 효과 - 게임스러운 하이라이트 */
.hotspot-overlay.hovered {
  border-color: var(--accent-color);
  background-color: rgba(255, 0, 255, 0.15);
  box-shadow:
    0 0 15px var(--accent-color),
    inset 0 0 10px rgba(255, 0, 255, 0.2);
  transform: scale(1.02);
}

/* 핫스팟 포커스 효과 (접근성) */
.hotspot-overlay:focus {
  outline: 2px solid var(--accent-color);
  outline-offset: 2px;
}

/* 비활성화된 핫스팟 */
.hotspot-overlay.disabled {
  cursor: not-allowed;
  border-color: var(--text-dim);
  background-color: rgba(0, 0, 0, 0.3);
  box-shadow: none;
  opacity: 0.5;
}

.hotspot-overlay.disabled:hover {
  transform: none;
  border-color: var(--text-dim);
  background-color: rgba(0, 0, 0, 0.3);
}

/* 핫스팟 툴팁 */
.hotspot-tooltip {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  min-width: 100px;
  max-width: 200px;
  padding: var(--spacing-xs) var(--spacing-sm);
  background-color: rgba(0, 20, 0, 0.95);
  border: 1px solid var(--accent-color);
  border-radius: 2px;
  box-shadow:
    0 0 10px rgba(255, 0, 255, 0.4),
    0 4px 12px rgba(0, 0, 0, 0.8);
  z-index: 20;
  white-space: nowrap;
  animation: tooltip-fade-in 0.15s ease-out;
}

@keyframes tooltip-fade-in {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* 툴팁 화살표 (하단 가리키기) */
.hotspot-tooltip::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: var(--accent-color);
}

/* 툴팁 라벨 */
.hotspot-tooltip-label {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: bold;
  color: var(--text-color);
  text-transform: uppercase;
  letter-spacing: 1px;
  text-shadow: 0 0 5px var(--text-dim);
}

/* 툴팁 힌트 */
.hotspot-tooltip-hint {
  display: block;
  margin-top: 2px;
  font-size: var(--font-size-xs);
  color: var(--text-dim);
}

/* 핫스팟 있을 때 Scene Canvas 조정 */
.scene-canvas.has-hotspots {
  /* 핫스팟 레이어를 위한 position 컨텍스트 확보 */
  position: relative;
}

/* 모바일에서 핫스팟 터치 영역 확대 */
@media (max-width: 768px) {
  .hotspot-overlay {
    /* 터치 영역 최소 44px 보장 */
    min-width: 44px;
    min-height: 44px;
  }

  .hotspot-tooltip {
    font-size: 0.875rem;
    max-width: 160px;
  }
}

/* 접근성: reduced-motion에서 애니메이션 완화 */
@media (prefers-reduced-motion: reduce) {
  .hotspot-overlay {
    transition: none;
  }

  .hotspot-overlay.hovered {
    transform: none;
  }

  .hotspot-tooltip {
    animation: none;
  }
}

/* 내러티브 피드 - RULE-002: 채팅 버블 아님, 게임 로그 형태 */
.narrative-feed {
  height: 180px;
  border: 1px solid var(--border-color);
  background-color: var(--panel-bg);
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8);
  overflow-y: auto;
  padding: var(--spacing-sm);
}

.narrative-entry {
  padding: var(--spacing-xs) 0;
  border-bottom: 1px solid rgba(51, 255, 0, 0.2);
}

.narrative-entry:last-child {
  border-bottom: none;
}

.narrative-timestamp {
  color: var(--text-dim);
  font-size: 0.75rem;
  margin-right: var(--spacing-sm);
}

.narrative-text {
  color: var(--text-color);
}

/* ============================================
   9. Sidebar (Right) 영역
   - Agent Console, Memory Pin, Scanner Slot
   ============================================ */

.sidebar-right {
  grid-area: sidebar-right;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  overflow-y: auto;
}

/* ============================================
   10. Footer 영역
   - Action Deck, Command Input
   ============================================ */

.game-footer {
  grid-area: footer;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm);
  border: 1px solid var(--border-color);
  background-color: var(--panel-bg);
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
}

/* ============================================
   10.1 Action Deck (U-009: 게임 카드 UI)
   - RULE-002: 채팅 버튼이 아닌 게임 카드
   - RULE-005: 비용/위험/보상 표시
   ============================================ */

.action-deck {
  display: flex;
  gap: var(--spacing-sm);
  overflow-x: auto;
  padding: var(--spacing-xs) 0;
  scrollbar-width: thin;
}

/* 카드 기본 스타일 - 게임 카드처럼 보이게 */
.action-card {
  position: relative;
  min-width: 160px;
  max-width: 200px;
  padding: var(--spacing-sm) var(--spacing-sm) var(--spacing-md);
  border: 2px solid var(--border-color);
  border-radius: var(--border-radius);
  background: linear-gradient(180deg, rgba(0, 30, 0, 0.9) 0%, rgba(0, 15, 0, 0.95) 100%);
  cursor: pointer;
  transition:
    border-color 0.2s,
    box-shadow 0.2s,
    transform 0.15s;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
}

/* 위험도별 테두리 색상 */
.action-card.risk-border-low {
  border-color: var(--text-color);
}

.action-card.risk-border-medium {
  border-color: var(--warning-color);
}

.action-card.risk-border-high {
  border-color: var(--error-color);
}

/* 호버 효과 - 카드가 살짝 올라오는 느낌 */
.action-card:hover:not(:disabled) {
  border-color: var(--accent-color);
  box-shadow:
    0 0 15px var(--accent-color),
    0 4px 20px rgba(0, 0, 0, 0.5);
  transform: translateY(-4px);
}

/* 카드 타이틀 */
.action-card-title {
  font-size: 1rem;
  font-weight: bold;
  color: var(--text-color);
  text-transform: uppercase;
  letter-spacing: 1px;
  text-shadow: 0 0 8px var(--text-dim);
  padding-bottom: var(--spacing-xs);
  border-bottom: 1px solid var(--text-dim);
}

/* 카드 설명 */
.action-card-description {
  font-size: 0.75rem;
  color: var(--text-dim);
  line-height: 1.3;
  min-height: 2em;
}

/* 비용 표시 영역 */
.action-card-cost {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 4px;
  font-size: 0.75rem;
  color: var(--warning-color);
  padding: var(--spacing-xs);
  background-color: rgba(0, 0, 0, 0.4);
  border-radius: 2px;
  margin-top: auto;
}

.action-card-cost .cost-item {
  display: inline-flex;
  align-items: center;
  gap: 2px;
}

.action-card-cost .cost-separator {
  color: var(--text-dim);
  margin: 0 2px;
}

.action-card-cost .cost-value {
  font-weight: bold;
  font-family: var(--font-micro-en);
}

/* 위험도 라벨 색상 */
.action-card-cost .risk-label {
  text-transform: uppercase;
  font-size: 0.625rem;
  font-weight: bold;
}

.action-card-cost .risk-label.risk-low {
  color: var(--text-color);
}

.action-card-cost .risk-label.risk-medium {
  color: var(--warning-color);
}

.action-card-cost .risk-label.risk-high {
  color: var(--error-color);
}

/* 힌트 영역 (위험/보상) */
.action-card-hints {
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 0.625rem;
  padding-top: var(--spacing-xs);
  border-top: 1px dashed var(--text-dim);
}

.action-card-hints .hint-item {
  display: flex;
  align-items: flex-start;
  gap: 4px;
}

.action-card-hints .hint-icon {
  flex-shrink: 0;
}

.action-card-hints .hint-risk {
  color: var(--warning-color);
}

.action-card-hints .hint-reward {
  color: var(--accent-color);
}

.action-card-hints .hint-text {
  color: var(--text-dim);
  line-height: 1.2;
}

/* 대안 카드 배지 */
.action-card .alternative-badge {
  position: absolute;
  top: -8px;
  right: 8px;
  padding: 2px 6px;
  font-size: 0.5rem;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1px;
  background-color: var(--text-color);
  color: var(--bg-color);
  border-radius: 2px;
}

/* 대안 카드 스타일 */
.action-card.card-alternative {
  border-style: dashed;
  opacity: 0.85;
  min-width: 140px;
}

.action-card.card-alternative:hover:not(:disabled) {
  opacity: 1;
}

/* 비활성화된 카드 */
.action-card.card-disabled,
.action-card:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  border-color: var(--text-dim);
  transform: none;
}

.action-card.card-disabled:hover,
.action-card:disabled:hover {
  border-color: var(--text-dim);
  box-shadow: none;
  transform: none;
}

/* 비활성화 오버레이 */
.action-card .card-disabled-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.7);
  border-radius: var(--border-radius);
}

.action-card .card-disabled-overlay .disabled-reason {
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: 0.625rem;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--error-color);
  background-color: rgba(0, 0, 0, 0.8);
  border: 1px solid var(--error-color);
  text-shadow: 0 0 5px var(--error-color);
}

/* 모든 카드 비활성화 안내 */
.action-deck .deck-empty-notice {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 200px;
  padding: var(--spacing-md);
  color: var(--warning-color);
  font-size: 0.75rem;
  text-align: center;
  border: 1px dashed var(--warning-color);
  background-color: rgba(255, 170, 0, 0.1);
}

.command-input-area {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xs);
  border: 1px solid var(--text-dim);
  background-color: rgba(0, 0, 0, 0.5);
}

.command-prompt {
  color: var(--text-color);
  font-size: var(--font-size-lg);
}

.command-input {
  flex: 1;
  background: transparent;
  border: none;
  color: var(--text-color);
  font-family: var(--font-main);
  font-size: var(--font-size-lg);
  outline: none;
  text-shadow: 0 0 5px var(--text-dim);
}

.command-input::placeholder {
  color: var(--text-dim);
}

/* ============================================
   11. 공통 패널 스타일
   ============================================ */

.panel {
  border: 1px solid var(--border-color);
  background-color: var(--panel-bg);
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: column;
}

.panel-header {
  padding: var(--spacing-xs) var(--spacing-sm);
  border-bottom: 1px solid var(--text-dim);
  background-color: rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.panel-title {
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--text-color);
}

.panel-content {
  flex: 1;
  padding: var(--spacing-sm);
  overflow-y: auto;
}

.panel-placeholder {
  color: var(--text-dim);
  font-size: 0.875rem;
  text-align: center;
  padding: var(--spacing-md);
}

/* ============================================
   12. 버튼 스타일
   ============================================ */

button,
.btn {
  background: var(--text-color);
  color: var(--bg-color);
  border: none;
  padding: var(--spacing-xs) var(--spacing-sm);
  font-family: var(--font-main);
  font-size: var(--font-size-lg);
  cursor: pointer;
  text-transform: uppercase;
  font-weight: bold;
  transition:
    background 0.2s,
    color 0.2s;
}

button:hover,
.btn:hover {
  background: var(--accent-color);
  color: white;
}

button:disabled,
.btn:disabled {
  background: var(--text-dim);
  cursor: not-allowed;
}

/* ============================================
   13. 스크롤바 커스터마이징
   ============================================ */

::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: var(--bg-color);
}

::-webkit-scrollbar-thumb {
  background: var(--text-dim);
  border: 1px solid var(--text-color);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-color);
}

/* ============================================
   14. 반응형 디자인
   ============================================ */

@media (max-width: 1200px) {
  .game-container {
    grid-template-areas:
      'header header'
      'center sidebar-right'
      'footer footer';
    grid-template-columns: 1fr var(--sidebar-width);
  }

  .sidebar-left {
    display: none;
  }
}

@media (max-width: 768px) {
  :root {
    font-size: 14px;
    --header-height: 50px;
    --footer-height: 100px;
    --sidebar-width: 100%;
  }

  .game-container {
    grid-template-areas:
      'header'
      'center'
      'footer';
    grid-template-columns: 1fr;
    grid-template-rows: var(--header-height) 1fr var(--footer-height);
    padding: var(--spacing-xs);
    gap: var(--spacing-xs);
  }

  .sidebar-left,
  .sidebar-right {
    display: none;
  }

  .game-header {
    padding: 0 var(--spacing-sm);
  }

  .game-title {
    font-size: var(--font-size-lg);
    letter-spacing: 2px;
  }

  .economy-hud {
    display: none;
  }

  .action-deck {
    flex-wrap: nowrap;
    overflow-x: auto;
  }

  .action-card {
    min-width: 120px;
  }
}

/* ============================================
   15. 유틸리티 클래스
   ============================================ */

.text-dim {
  color: var(--text-dim);
}

.text-accent {
  color: var(--accent-color);
}

.text-warning {
  color: var(--warning-color);
}

.text-error {
  color: var(--error-color);
}

.text-glow {
  text-shadow: 0 0 10px var(--text-color);
}

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ============================================
   16. Agent Console 스타일 (U-008)
   - RULE-008: 단계/배지/복구 표시
   ============================================ */

.agent-console-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
  font-size: 0.75rem;
}

/* 스트리밍 상태 */
.streaming-status {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs);
  border-bottom: 1px solid var(--text-dim);
}

.streaming-status .status-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: var(--text-dim);
  transition: background-color 0.3s;
}

.streaming-status .status-dot.active {
  background-color: var(--accent-color);
  box-shadow: 0 0 8px var(--accent-color);
  animation: pulse 1s infinite;
}

.streaming-status .status-text {
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-dim);
}

.streaming-status .status-dot.active + .status-text {
  color: var(--accent-color);
}

/* 단계 큐 */
.phase-queue {
  padding: var(--spacing-xs);
}

.phase-queue .queue-label,
.badges-panel .badges-label,
.repair-trace .repair-label {
  font-size: 0.75rem; /* 12px로 상향 */
  text-transform: uppercase;
  letter-spacing: 2px;
  color: #33ff00; /* 순수 인광 녹색으로 고정 */
  opacity: 1; /* 투명도 제거하여 최대 밝기 */
  margin-bottom: var(--spacing-sm);
  font-weight: 600; /* 더 굵게 */
  text-shadow: 0 0 5px rgba(51, 255, 0, 0.4); /* 미세 글로우로 강조 */
}

.badges-panel .badges-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 6px; /* 간격 상향 */
  width: 100%;
}

.phase-queue .queue-items {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* 4열 배치 강제 */
  gap: 6px;
  width: 100%;
}

/* U-037: Phase Item 식별성 극대화 */
.phase-item {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 6px 2px;
  background-color: rgba(0, 20, 0, 0.95); /* 배경 더 어둡게 */
  border: 1px solid var(--text-dim);
  border-radius: 2px;
  font-family: var(--font-micro-en);
  font-size: 0.8125rem; /* 13px로 상향 */
  font-weight: 600; /* 더 굵게 */
  letter-spacing: 0.02em;
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.8);
}

/* 텍스트 선명도 및 글로우 최적화 (번짐 방지) */
.phase-item > * {
  position: relative;
  z-index: 2;
  text-shadow: none !important; /* 번짐 방지를 위해 그림자 제거 */
  filter: drop-shadow(0 0 1px rgba(51, 255, 0, 0.3)); /* 미세 테두리 */
  opacity: 1 !important;
}

/* 상태별 색상 대비 상향 */
.phase-item.pending {
  color: #88ff88 !important; /* 더 밝은 녹색 */
  border-color: rgba(51, 255, 0, 0.4);
}

.phase-item.in_progress,
.phase-item.in-progress {
  color: #ff00ff !important;
  border-color: #ff00ff;
  background-color: rgba(30, 0, 30, 0.95);
  box-shadow: 0 0 8px rgba(255, 0, 255, 0.4);
}

/* 씬 플레이스홀더 서브 메시지 가독성 (Critical) */
.scene-status-message {
  color: var(--text-color) !important;
  opacity: 1 !important;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 1) !important;
  font-size: 0.9375rem !important; /* 15px로 상향 */
  font-weight: 500 !important;
  margin-top: var(--spacing-sm);
  z-index: 10;
  position: relative;
}

/* 씬 플레이스홀더 서브 메시지 보호 */
.scene-placeholder .status-sub {
  color: var(--text-color);
  opacity: 0.9;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 1);
  font-size: var(--font-size-sm);
}

/* Scene Canvas는 여전히 강력한 CRT 분위기 유지 (Q2: Option A) */
.scene-canvas::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.3) 50%);
  background-size: 100% 4px;
  pointer-events: none;
  z-index: 5;
  animation: flicker 0.15s infinite;
}

/* Economy HUD 및 기타 Critical 텍스트 보호 */
.currency-value,
.action-card-cost {
  position: relative;
  z-index: 2;
  font-family: var(--font-micro-en);
  text-shadow: 0 0 2px rgba(51, 255, 0, 0.3);
}

/* U-037: pending 상태 - 밝은 색상 + 배경 대비 */
.phase-item.pending {
  color: var(--text-color);
  background-color: rgba(0, 20, 0, 0.5);
  border-color: rgba(51, 255, 0, 0.3);
  opacity: 0.8;
}

.phase-item.in_progress,
.phase-item.in-progress {
  color: var(--accent-color);
  background-color: rgba(40, 0, 40, 0.5);
  border-color: var(--accent-color);
  box-shadow: 0 0 5px var(--accent-color);
  animation: pulse 1s infinite;
}

.phase-item.completed {
  color: var(--text-color);
  background-color: rgba(0, 30, 0, 0.5);
  border-color: var(--text-color);
}

.phase-item.failed {
  color: var(--error-color);
  background-color: rgba(40, 0, 0, 0.5);
  border-color: var(--error-color);
}

.phase-icon {
  font-size: 0.5rem;
}

.phase-icon.in-progress {
  animation: spin 2s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.phase-label {
  white-space: nowrap;
}

/* 배지 패널 */
.badges-panel {
  padding: var(--spacing-xs);
  border-top: 1px solid var(--text-dim);
}

.badges-panel .badges-label {
  font-size: 0.625rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-dim);
  margin-bottom: var(--spacing-xs);
}

.badges-panel .badges-empty {
  color: var(--text-color);
  font-size: 0.8125rem; /* 13px로 상향 */
  font-weight: 500;
  text-align: center;
  padding: var(--spacing-sm);
  opacity: 0.9;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 1);
  position: relative;
  z-index: 2;
}

/* 배지 그리드 가독성 상향 (U-037) */
.badge-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 6px;
  background-color: rgba(0, 20, 0, 0.9);
  border: 1px solid var(--text-dim);
  font-family: var(--font-micro-en);
  font-size: 0.75rem;
  z-index: 2;
  position: relative;
}

.badge-label {
  color: var(--text-color);
  opacity: 0.8;
}

.badge-status {
  font-weight: bold;
  text-transform: uppercase;
}

/* Auto-repair 트레이스 */
.repair-trace {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs);
  border-top: 1px solid var(--text-dim);
  font-size: 0.625rem;
}

.repair-trace .repair-label {
  color: var(--text-dim);
}

.repair-trace .repair-count {
  color: var(--warning-color);
  font-weight: bold;
}

.repair-trace .repair-status {
  color: var(--warning-color);
  font-size: 0.5rem;
}

/* 에러 표시 */
.agent-error {
  display: flex;
  align-items: flex-start;
  gap: var(--spacing-xs);
  padding: var(--spacing-xs);
  background-color: rgba(255, 51, 51, 0.1);
  border: 1px solid var(--error-color);
  font-size: 0.625rem;
}

.agent-error .error-icon {
  color: var(--error-color);
}

.agent-error .error-message {
  color: var(--error-color);
  flex: 1;
  word-break: break-word;
}

.agent-error .error-code {
  color: var(--text-dim);
  font-size: 0.5rem;
}

/* ============================================
   17. 내러티브 스트리밍 효과
   ============================================ */

.narrative-entry.streaming {
  opacity: 0.8;
}

.cursor-blink {
  animation: blink 1s infinite;
  color: var(--accent-color);
}

@keyframes blink {
  0%,
  50% {
    opacity: 1;
  }
  51%,
  100% {
    opacity: 0;
  }
}

/* ============================================
   18. 액션 카드 비활성화 상태
   ============================================ */

.action-card:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  border-color: var(--text-dim);
}

.action-card:disabled:hover {
  border-color: var(--text-dim);
  box-shadow: none;
}

/* ============================================
   19. Economy HUD 아이콘 (U-029: nanobanana 에셋)
   ============================================ */

.economy-hud .shard-icon {
  margin-left: var(--spacing-sm);
}

/* 에셋 아이콘 래퍼 - 폴백 패턴 (U-029/U-030) */
.icon-wrapper {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.icon-wrapper .icon-img {
  width: 20px;
  height: 20px;
  object-fit: contain;
  /* (U-029) 흰 배경 아이콘인 경우 screen/lighten 등으로 조절 가능하지만 rembg 완료됨 */
  display: block;
}

.icon-wrapper .icon-img.hidden {
  display: none;
}

/* 폴백 텍스트는 기본 숨김, 이미지 로드 실패 시 표시 */
.icon-wrapper .icon-fallback {
  display: none;
  font-size: 1rem;
}

/* 이미지 숨김 시 폴백 표시 */
.icon-wrapper .icon-img.hidden + .icon-fallback {
  display: inline;
}

/* Risk 등급별 아이콘 필터링 (필요 시) */
.icon-img.risk-low {
  filter: drop-shadow(0 0 2px var(--text-color));
}

.icon-img.risk-high {
  filter: drop-shadow(0 0 2px var(--error-color));
}

/* 배지 아이콘 (Agent Console) */
.badge-icon-img {
  width: 14px;
  height: 14px;
  object-fit: contain;
  vertical-align: middle;
  margin-right: 2px;
}

/* ============================================
   20. Flex 유틸리티
   ============================================ */

.flex-1 {
  flex: 1;
}

/* ============================================
   21. 중요도 기반 레이어링 (U-037: critical/ambient)
   - critical: 어두운 배경/패널 내부의 작은 텍스트 (마이크로 텍스트)
   - ambient: 분위기/장식, 로고/타이틀/패널 헤더 (기본 스타일)
   - Scene Canvas 중심으로 CRT 분위기 집중 (Q2: Option A)
   ============================================ */

/*
 * Critical 영역 기준 (U-037 재정의):
 * - 박스/패널 내부 콘텐츠 (어두운 배경 위 텍스트)
 * - 마이크로 텍스트 (0.75rem 이하: 배지, 비용, 타임스탬프 등)
 * - 배경색이 다양할 수 있는 영역 (에러 박스 등)
 *
 * Non-Critical (기본 스타일):
 * - 로고/타이틀 (UNKNOWN WORLD) - 충분히 크고 밝음
 * - 패널 헤더/라벨 (INVENTORY, QUEST 등) - 밝은 배경
 * - 액션 카드 제목 (탐색하기 등) - 충분히 큰 폰트
 */

/* Critical 영역: 패널 내부 작은 텍스트 가독성 보장 */
[data-ui-importance='critical'],
.ui-critical {
  /* 텍스트 대비 강화 - 어두운 배경에서 읽힘 보장 */
  color: var(--text-color);
  text-shadow:
    0 0 2px var(--text-color),
    0 1px 1px rgba(0, 0, 0, 0.9);
}

/* Critical 영역 내 보조 텍스트(dim)도 가독성 보장 */
[data-ui-importance='critical'] .text-dim,
.ui-critical .text-dim {
  color: var(--text-dim);
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.9);
}

/* Ambient 영역: CRT 분위기 허용 (기본값) */
[data-ui-importance='ambient'],
.ui-ambient {
  /* 기본 CRT 스타일 유지 - 로고/타이틀/패널 헤더 */
}

/* ============================================
   21.1 마이크로 텍스트 Critical 적용 (작은 폰트)
   - 0.75rem 이하 텍스트는 자동 Critical
   ============================================ */

/* Action Card 비용/위험 정보 (작은 텍스트, 어두운 카드 배경) */
.action-card-cost {
  text-shadow:
    0 0 2px currentColor,
    0 1px 1px rgba(0, 0, 0, 0.9);
}

/* 에러/차단 메시지 (배경색 다양, 중요 정보) */
.agent-error {
  text-shadow:
    0 0 2px var(--error-color),
    0 1px 1px rgba(0, 0, 0, 0.9);
}

/* 배지 상태 텍스트 (작은 폰트, 패널 내부) */
.badge-status {
  text-shadow: 0 0 1px currentColor;
}

/* 내러티브 타임스탬프 (작은 폰트) */
.narrative-timestamp {
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.8);
}

/* 복구 트레이스 (작은 폰트, 경고 정보) */
.repair-trace .repair-count {
  text-shadow: 0 0 2px var(--warning-color);
}

/* ============================================
   21.1 Scene Canvas 중심 CRT 분위기 (Q2: Option A)
   - 전역 오버레이 대신 Scene Canvas에 효과 집중
   ============================================ */

/* 전역 CRT 오버레이: 강도 약화 (critical 영역 보호) */
.crt-overlay {
  opacity: 0.3;
  /* 기존 애니메이션 유지하되 강도 낮춤 */
}

/* Scene Canvas: CRT 분위기 강화 (ambient 영역) */
.scene-canvas {
  position: relative;
}

.scene-canvas::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.15) 50%);
  background-size: 100% 4px;
  pointer-events: none;
  z-index: 1;
  animation: flicker 0.15s infinite;
  opacity: 0.7;
}

/* Scene Canvas placeholder는 분위기 유지하면서 텍스트 읽힘 보장 */
.scene-placeholder {
  position: relative;
  z-index: 2;
}

/* ============================================
   22. 마이크로 텍스트 가독성 상향 (U-028→U-037)
   - 0.625rem → --font-size-xs (0.75rem)
   - Critical 영역은 자동 가독성 보장
   ============================================ */

/* Agent Console 기본 폰트 상향 */
.agent-console-content {
  font-size: var(--font-size-xs);
}

/* 큐 라벨 폰트 상향 */
.phase-queue .queue-label {
  font-size: calc(var(--font-size-xs) * 0.85);
}

/* 단계 아이템 폰트 상향 */
.phase-item {
  font-size: calc(var(--font-size-xs) * 0.85);
}

/* 배지 패널 라벨 상향 */
.badges-panel .badges-label {
  font-size: calc(var(--font-size-xs) * 0.85);
}

.badges-panel .badges-empty {
  font-size: calc(var(--font-size-xs) * 0.85);
}

/* 배지 아이템 상향 */
.badge-item {
  font-size: calc(var(--font-size-xs) * 0.85);
}

/* 복구 트레이스 상향 */
.repair-trace {
  font-size: calc(var(--font-size-xs) * 0.85);
}

.repair-trace .repair-status {
  font-size: calc(var(--font-size-xs) * 0.7);
}

/* 에러 표시 상향 */
.agent-error {
  font-size: calc(var(--font-size-xs) * 0.85);
}

.agent-error .error-code {
  font-size: calc(var(--font-size-xs) * 0.7);
}

/* 내러티브 타임스탬프 상향 */
.narrative-timestamp {
  font-size: var(--font-size-xs);
}

/* 단계 아이콘 상향 */
.phase-icon {
  font-size: calc(var(--font-size-xs) * 0.7);
}

/* ============================================
   22.1 접근성 가드 (U-037: prefers-reduced-motion)
   - 광과민/피로 방지를 위한 자동 완화
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  /* 플리커 애니메이션 비활성화 */
  .crt-overlay {
    animation: none;
    opacity: 0.15;
  }

  .scene-canvas::after {
    animation: none;
    opacity: 0.3;
  }

  /* 글리치 효과 비활성화 */
  .glitch::before,
  .glitch::after {
    animation: none;
    opacity: 0;
  }

  /* 펄스 애니메이션 비활성화 */
  .status-indicator {
    animation: none;
  }

  .streaming-status .status-dot.active {
    animation: none;
  }

  .phase-item.in_progress,
  .phase-item.in-progress {
    animation: none;
  }

  /* 로딩 펄스 비활성화 */
  .scene-canvas.scene-status-loading .scene-placeholder {
    animation: none;
  }

  /* 스태틱 노이즈 비활성화 */
  .scene-canvas.scene-status-offline::before {
    animation: none;
    opacity: 0.2;
  }

  /* 커서 깜빡임 정적 표시 */
  .cursor-blink {
    animation: none;
    opacity: 1;
  }

  /* 스핀 애니메이션 비활성화 */
  .phase-icon.in-progress {
    animation: none;
  }
}

/* ============================================
   22.2 고대비 모드 지원 (prefers-contrast)
   ============================================ */

@media (prefers-contrast: more) {
  /* Critical 텍스트 대비 추가 상향 */
  [data-ui-importance='critical'],
  .ui-critical,
  .economy-hud,
  .action-card-title,
  .action-card-cost {
    text-shadow:
      0 0 4px var(--text-color),
      0 2px 2px rgba(0, 0, 0, 1);
  }

  /* 배경 대비 강화 */
  .panel-content,
  .narrative-feed {
    background-color: rgba(0, 0, 0, 0.9);
  }

  /* 테두리 대비 강화 */
  .panel,
  .action-card {
    border-width: 2px;
  }
}

/* ============================================
   23. UI 스케일 컨트롤 버튼 스타일 (U-028→U-037)
   ============================================ */

.ui-controls {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
}

.ui-scale-btn {
  background: transparent;
  color: var(--text-color);
  border: 1px solid var(--text-dim);
  padding: 2px 6px;
  font-family: var(--font-main);
  font-size: var(--font-size-xs);
  cursor: pointer;
  text-transform: uppercase;
  transition:
    border-color 0.2s,
    color 0.2s,
    box-shadow 0.2s;
  min-width: 28px;
  text-align: center;
}

.ui-scale-btn:hover {
  border-color: var(--accent-color);
  color: var(--accent-color);
}

.ui-scale-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.ui-scale-btn:disabled:hover {
  border-color: var(--text-dim);
  color: var(--text-dim);
}

.ui-scale-display {
  font-size: var(--font-size-xs);
  color: var(--text-dim);
  min-width: 32px;
  text-align: center;
}

/* ============================================
   24. UI Chrome Pack (U-032)
   - 패널/카드에 적용되는 장식(코너/프레임)
   - Readable 모드에서 완화
   ============================================ */

/* Chrome 에셋 경로 변수 */
:root {
  --chrome-panel-corner: url('/ui/chrome/panel-corner-br.png');
  --chrome-card-frame: url('/ui/chrome/card-frame.png');
  --chrome-scanner-frame: url('/ui/chrome/scanner-frame.png');
  --chrome-corner-size: 32px;
  --chrome-glow-color: rgba(51, 255, 0, 0.3);
}

/* Game Header Chrome - 상단 코너 (U-032) */
.game-header.has-chrome {
  position: relative;
}

.game-header.has-chrome::before,
.game-header.has-chrome::after {
  content: '';
  position: absolute;
  width: var(--chrome-corner-size);
  height: var(--chrome-corner-size);
  background-image: var(--chrome-panel-corner);
  background-size: contain;
  background-repeat: no-repeat;
  pointer-events: none;
  opacity: 0.9;
  filter: drop-shadow(0 0 5px var(--chrome-glow-color));
  z-index: 2;
}

.game-header.has-chrome::before {
  top: -2px;
  left: -2px;
  transform: rotate(90deg);
}

.game-header.has-chrome::after {
  top: -2px;
  right: -2px;
  transform: rotate(180deg);
}

/* Panel Header Chrome - 코너 장식 (4방향 CSS transform) */
.panel-header.has-chrome {
  position: relative;
}

.panel-header.has-chrome::before,
.panel-header.has-chrome::after {
  content: '';
  position: absolute;
  width: var(--chrome-corner-size);
  height: var(--chrome-corner-size);
  background-image: var(--chrome-panel-corner);
  background-size: contain;
  background-repeat: no-repeat;
  pointer-events: none;
  opacity: 0.8;
  filter: drop-shadow(0 0 4px var(--chrome-glow-color));
}

/* 좌상단 코너 */
.panel-header.has-chrome::before {
  top: -2px;
  left: -2px;
  transform: rotate(90deg);
}

/* 우상단 코너 */
.panel-header.has-chrome::after {
  top: -2px;
  right: -2px;
  transform: rotate(180deg);
}

/* Panel Chrome - 하단 코너용 래퍼 */
.panel.has-chrome {
  position: relative;
}

.panel.has-chrome .panel-content {
  position: relative;
}

.panel.has-chrome .panel-content::before,
.panel.has-chrome .panel-content::after {
  content: '';
  position: absolute;
  width: var(--chrome-corner-size);
  height: var(--chrome-corner-size);
  background-image: var(--chrome-panel-corner);
  background-size: contain;
  background-repeat: no-repeat;
  pointer-events: none;
  opacity: 0.6;
  filter: drop-shadow(0 0 3px var(--chrome-glow-color));
}

/* 좌하단 코너 */
.panel.has-chrome .panel-content::before {
  bottom: 0;
  left: -2px;
  transform: rotate(0deg);
}

/* 우하단 코너 (원본 방향) */
.panel.has-chrome .panel-content::after {
  bottom: 0;
  right: -2px;
  transform: rotate(270deg);
}

/* Action Card Chrome - 프레임 오버레이 */
.action-card.has-chrome {
  position: relative;
  overflow: visible;
}

.action-card.has-chrome::before {
  content: '';
  position: absolute;
  top: -4px;
  left: -4px;
  right: -4px;
  bottom: -4px;
  background-image: var(--chrome-card-frame);
  background-size: 100% 100%;
  background-repeat: no-repeat;
  pointer-events: none;
  opacity: 0.7;
  filter: drop-shadow(0 0 6px var(--chrome-glow-color));
  z-index: 1;
}

/* Scanner Slot Chrome - 장식 프레임 (U-032) */
.scanner-slot.has-chrome {
  position: relative;
  min-height: 100px;
  border: 1px dashed var(--text-dim);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: var(--spacing-md) var(--spacing-sm);
  background-color: rgba(0, 0, 0, 0.4);
}

.scanner-slot.has-chrome::before {
  content: '';
  position: absolute;
  top: -10px;
  left: -10px;
  right: -10px;
  bottom: -10px;
  background-image: var(--chrome-scanner-frame);
  background-size: 100% 100%;
  background-repeat: no-repeat;
  pointer-events: none;
  opacity: 0.8;
  filter: drop-shadow(0 0 8px var(--chrome-glow-color));
  z-index: 1;
}

/* Chrome 호버 효과 강화 */
.action-card.has-chrome:hover::before,
.scanner-slot.has-chrome:hover::before {
  opacity: 1;
  filter: drop-shadow(0 0 10px var(--accent-color));
}

/* reduced-motion: Chrome 효과 완화 */
@media (prefers-reduced-motion: reduce) {
  .game-header.has-chrome::before,
  .game-header.has-chrome::after,
  .panel-header.has-chrome::before,
  .panel-header.has-chrome::after,
  .panel.has-chrome .panel-content::before,
  .panel.has-chrome .panel-content::after {
    filter: none;
  }

  .action-card.has-chrome::before,
  .scanner-slot.has-chrome::before {
    filter: none;
  }

  .action-card.has-chrome:hover::before,
  .scanner-slot.has-chrome:hover::before {
    filter: none;
  }
}

/* Chrome 폴백: 이미지 로딩 실패 시 CSS 테두리로 대체 */
.panel-header.has-chrome.chrome-fallback::before,
.panel-header.has-chrome.chrome-fallback::after,
.panel.has-chrome.chrome-fallback .panel-content::before,
.panel.has-chrome.chrome-fallback .panel-content::after {
  background-image: none;
  background-color: var(--text-color);
  width: 8px;
  height: 8px;
  border-radius: 1px;
}

.action-card.has-chrome.chrome-fallback::before,
.scanner-slot.has-chrome.chrome-fallback::before {
  background-image: none;
  border: 1px solid var(--text-color);
  background-color: transparent;
}
